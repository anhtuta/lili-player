{"version":3,"file":"static/js/96.5f920e30.chunk.js","mappings":"wKAGA,MAYA,EAZgBA,IACd,MAAM,KAAEC,EAAI,QAAEC,EAAO,SAAEC,GAAW,GAAUH,EACtCI,EAAYJ,EAAMI,UAAYJ,EAAMI,UAAY,cAChDC,EAAO,OAAAC,OAAUF,GAEvB,OACEG,EAAAA,EAAAA,KAAA,UAAQH,UAAW,OAASC,EAASH,QAASA,EAASC,SAAUA,EAASK,SACvEP,K,OCLP,MAAMQ,UAAkBC,EAAAA,cACtBC,WAAAA,CAAYX,GACVY,MAAMZ,GAAO,KAOfa,SAAYC,IACV,MAAM,MAAEC,GAAUD,EAAEE,OACdC,EAAYC,KAAKlB,MAAMiB,UACzBC,KAAKlB,MAAMiB,UAdc,IAgB7B,IAAIE,EAAW,GAEXJ,EAAMK,OAASH,EACjBE,EAAW,2BAA6BF,EAC9BC,KAAKG,gBAAgBN,KAC/BI,EAAWD,KAAKlB,MAAMsB,cAAgBJ,KAAKlB,MAAMsB,cAAgB,oBAGnEJ,KAAKK,SAAS,CACZR,QACAI,aAGFD,KAAKlB,MAAMa,SAAS,CAClBW,KAAMN,KAAKlB,MAAMwB,KACjBT,QACAU,UAAWN,KAEb,KAEFO,WAAcZ,IACZ,MAAM,WAAEY,GAAeR,KAAKlB,MACxB0B,GACFA,EAAWZ,IAEb,KAEFO,gBAAmBN,IACjB,MAAMY,EAAQT,KAAKlB,MAAM2B,MAAQT,KAAKlB,MAAM2B,MAAQ,GACpD,MAAc,KAAVZ,GAA0B,KAAVY,GACbZ,EAAMa,MAAMD,IAzCnBT,KAAKW,MAAQ,CACXd,MAAOf,EAAM8B,aAAe9B,EAAM8B,aAAe,GACjDX,SAAU,GAEd,CAwCAY,MAAAA,GACE,MAAM,KACJP,EAAI,MACJQ,EAAK,SACL7B,GAAW,EAAK,UAChB8B,GAAY,EAAK,KACjBC,EAAO,OAAM,YACbC,GACEjB,KAAKlB,OAEH,MAAEe,EAAK,SAAEI,GAAaD,KAAKW,MAEjC,OACEO,EAAAA,EAAAA,MAAA,OAAKhC,UAAU,gBAAeI,SAAA,CAC3BwB,IACCI,EAAAA,EAAAA,MAAA,SAAOhC,UAAU,cAAaI,SAAA,CAC3BwB,EACAC,IAAa1B,EAAAA,EAAAA,KAAA,QAAMH,UAAU,gBAAeI,SAAC,cAGlD4B,EAAAA,EAAAA,MAAA,OAAKhC,UAAU,qBAAoBI,SAAA,EACjCD,EAAAA,EAAAA,KAAA,SACE2B,KAAMA,EACNV,KAAMA,EACNT,MAAOA,EACPZ,SAAUA,EACVU,SAAUK,KAAKL,SACfT,UAAW,cAAkBe,EAAW,eAAiB,IACzDgB,YAAaA,EACbT,WAAYR,KAAKQ,eAEhBP,IAAYZ,EAAAA,EAAAA,KAAA,OAAKH,UAAU,kBAAiBI,SAAEW,SAIzD,EAGF,U,sBClFA,MAAMkB,UAAc3B,EAAAA,cAClBC,WAAAA,CAAYX,GACVY,MAAMZ,GAAO,KAUfa,SAAYyB,IACVpB,KAAKK,SAAS,CACZ,CAACe,EAAId,MAAOc,EAAIvB,SAElB,KAEFwB,aAAe,KACb,MAAM,SAAEC,EAAQ,SAAEC,GAAavB,KAAKW,MAC9Ba,EAAO,CACXF,WACAC,YAEFE,EAAAA,EAAKC,MACHF,EACA,KACMxB,KAAKlB,MAAM6C,SAAShB,QACtBX,KAAK4B,KAAO5B,KAAKlB,MAAM6C,SAAShB,MAAMiB,MAExCC,OAAOF,SAASG,KAAO9B,KAAK4B,KAAKG,SAGjCF,OAAOF,SAASK,UAEjBC,IACCC,EAAAA,EAAMC,MAAMF,MAjChBjC,KAAKW,MAAQ,CACXW,SAAU,GACVC,SAAU,GACVY,OAAO,EACPC,iBAAiB,GAEnBpC,KAAK4B,KAAO,CAAEG,SAAU,IAC1B,CA+BAlB,MAAAA,GACE,MAAM,SAAES,EAAQ,SAAEC,EAAQ,gBAAEa,GAAoBpC,KAAKW,MAErD,OAAIyB,GACK/C,EAAAA,EAAAA,KAACgD,EAAAA,GAAQ,CAACC,GAAItC,KAAK4B,QAI1BV,EAAAA,EAAAA,MAAA,OAAKhC,UAAU,gBAAeI,SAAA,EAC5BD,EAAAA,EAAAA,KAAA,MAAIH,UAAU,eAAcI,SAAC,WAC7BD,EAAAA,EAAAA,KAACE,EAAS,CAACuB,MAAM,WAAWR,KAAK,WAAWT,MAAOyB,EAAU3B,SAAUK,KAAKL,YAC5EN,EAAAA,EAAAA,KAACE,EAAS,CAACuB,MAAM,WAAWR,KAAK,WAAWT,MAAO0B,EAAU5B,SAAUK,KAAKL,SAAUqB,KAAK,cAC3F3B,EAAAA,EAAAA,KAACkD,EAAM,CAACxD,KAAK,QAAQC,QAASgB,KAAKqB,iBAGzC,EAGF,S,kFCrDAmB,EAAAA,EAAMC,aAAaC,QAAQC,IACzB,SAAUC,GACR,MAAMC,GAASC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACVF,GAAM,IACTG,iBAAmBC,IACjBC,SAAAA,EAAYC,WAdA9B,EAcqB4B,EAbvCG,OAAOC,KAAKhC,GAAKiC,QAASC,IACT,OAAXlC,EAAIkC,SAA0BC,IAAXnC,EAAIkC,WAClBlC,EAAIkC,KAGRlC,GAQyC,CAAEoC,YAAa,WAd7CpC,OAedqC,QAASC,iDAETC,SAAOb,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACFF,EAAOe,SAAO,IACjBC,OAAQ,eASZ,OAJIC,aAAaC,QAAQC,EAAAA,MACvBlB,EAAUc,QAAQK,cAAa,UAAA5E,OAAayE,aAAaC,QAAQC,EAAAA,MAG5DlB,CACT,EACCV,IACC8B,QAAQC,IAAI/B,GACLgC,QAAQC,OAAOjC,KAI1BK,EAAAA,EAAMC,aAAa4B,SAAS1B,IACzB0B,GACKA,GAAYA,EAAS7C,KAAa6C,EAAS7C,KACxC6C,EAERlC,GACKA,EAAMkC,UAAYlC,EAAMkC,SAASC,QACL,MAA1BnC,EAAMkC,SAASC,QACjB7C,EAAAA,EAAK8C,sBAGAJ,QAAQC,OAAOjC,EAAMkC,WAErBF,QAAQC,OAAOjC,IAK5B,QAAeK,EAAK,C,gECcb,IAAIf,EAAO,IApElB,MACEhC,WAAAA,GAAe,KAIf+E,gBAAkB,MACKX,aAAaC,QAAQC,EAAAA,IAE1C,KAEFrC,MAAQ,CAAA+C,EAAyBC,EAAiBC,KAAkB,IAA3D,SAAErD,EAAQ,SAAEC,GAAUkD,EAC7B,MAAMjD,EAAO,CACXF,WACAC,YAEFqD,EAAAA,EACGC,KAAK,UAAWrD,GAChBsD,KAAMC,IACLlB,aAAamB,QAAQjB,EAAAA,GAAcgB,EAAIhB,EAAAA,KACvCW,MAEDO,MAAOhD,IACN0C,EAAa1C,EAAIT,KAAOS,EAAIT,KAAOS,MAEvC,KAEFiD,OAAS,KACPN,EAAAA,EACGC,KAAK,YACLC,KAAMC,IACLlB,aAAasB,WAAWpB,EAAAA,IACxBlC,OAAOF,SAAW,MAEnBsD,MAAOhD,IACNgC,QAAQC,IAAIjC,GACZC,EAAAA,EAAMC,MAAMF,MAEhB,KAEFmD,MAAQ,IACCR,EAAAA,EAAYS,IAAI,gBACvB,KAEFd,oBAAsB,KACpBrC,EAAAA,EAAMoD,KAAK,4BACXzB,aAAasB,WAAWpB,EAAAA,IACxBlC,OAAOF,SAASG,KAAO,UAGzB,KAKAyD,mBAAqB,CAACC,EAAOC,KAC3B,IAAKC,EAAAA,GAAWD,GAAO,OAAO,EAC9B,IAAK,IAAIE,EAAI,EAAGA,EAAIH,EAAMtF,OAAQyF,IAChC,GAAID,EAAAA,GAAWD,GAAMG,SAASJ,EAAMG,IAAK,OAAO,EAOlD,OAAO,GA9DP3F,KAAK6F,SAAW,IAClB,E,gECLF,MAAMC,EAAU,CACdC,SAAU,YACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAU9C,GA8BZ,EAPoB,CAClB+B,KArBYvG,IACZuH,EAAAA,GAAMhB,KAAKvG,EAAM+G,IAqBjBS,QAlBexH,IACfuH,EAAAA,GAAMC,QAAQxH,EAAM+G,IAkBpBU,KAfYzH,IACZuH,EAAAA,GAAME,KAAKzH,EAAM+G,IAejB3D,MAZaF,IACb,IAAIwE,EAC8BA,EAA9BxE,EAAIT,MAAQS,EAAIT,KAAKkF,QAAezE,EAAIT,KAAKkF,QACxCzE,EAAWA,EAAI0E,WACb,oCACXL,EAAAA,GAAMnE,MAAMsE,EAAKX,I","sources":["components/Button/Button.js","components/Input/InputText.js","pages/Login/Login.js","service/axiosClient.js","components/Auth/Auth.js","components/Toast/Toast.js"],"sourcesContent":["import React from 'react';\nimport './Button.scss';\n\nconst Button = (props) => {\n  const { text, onClick, disabled = false } = props;\n  const className = props.className ? props.className : 'btn-success';\n  const classes = `btn ${className}`;\n\n  return (\n    <button className={'btn ' + classes} onClick={onClick} disabled={disabled}>\n      {text}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { PureComponent } from 'react';\nimport './Input.scss';\n\nconst DEFAULT_INPUT_MAX_LENGTH = 200;\n\nclass InputText extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.defaultValue ? props.defaultValue : '',\n      errorMsg: ''\n    };\n  }\n\n  onChange = (e) => {\n    const { value } = e.target;\n    const maxLength = this.props.maxLength\n      ? this.props.maxLength\n      : DEFAULT_INPUT_MAX_LENGTH;\n    let errorMsg = '';\n\n    if (value.length > maxLength) {\n      errorMsg = 'Max length of input is: ' + maxLength;\n    } else if (!this.regexValidation(value)) {\n      errorMsg = this.props.regexErrorMsg ? this.props.regexErrorMsg : 'Input is invalid';\n    }\n\n    this.setState({\n      value,\n      errorMsg\n    });\n\n    this.props.onChange({\n      name: this.props.name,\n      value,\n      invalid: !!errorMsg\n    });\n  };\n\n  onKeyPress = (e) => {\n    const { onKeyPress } = this.props;\n    if (onKeyPress) {\n      onKeyPress(e);\n    }\n  };\n\n  regexValidation = (value) => {\n    const regex = this.props.regex ? this.props.regex : '';\n    if (value === '' || regex === '') return true;\n    return value.match(regex);\n  };\n\n  render() {\n    const {\n      name,\n      label,\n      disabled = false,\n      isRequire = false,\n      type = 'text',\n      placeholder\n    } = this.props;\n\n    const { value, errorMsg } = this.state;\n\n    return (\n      <div className=\"input-wrapper\">\n        {label && (\n          <label className=\"input-label\">\n            {label}\n            {isRequire && <span className=\"input-require\">&nbsp;*</span>}\n          </label>\n        )}\n        <div className=\"input-text-wrapper\">\n          <input\n            type={type}\n            name={name}\n            value={value}\n            disabled={disabled}\n            onChange={this.onChange}\n            className={'input-text' + (!!errorMsg ? ' input-error' : '')}\n            placeholder={placeholder}\n            onKeyPress={this.onKeyPress}\n          />\n          {!!errorMsg && <div className=\"input-error-msg\">{errorMsg}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default InputText;\n","import React, { PureComponent } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport Button from '../../components/Button/Button';\nimport InputText from '../../components/Input/InputText';\nimport { auth } from '../../components/Auth/Auth';\nimport Toast from '../../components/Toast/Toast';\nimport './Login.scss';\n\nclass Login extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      error: false,\n      redirectToRefer: false\n    };\n    this.from = { pathname: '/' };\n  }\n\n  onChange = (obj) => {\n    this.setState({\n      [obj.name]: obj.value\n    });\n  };\n\n  handleSubmit = () => {\n    const { username, password } = this.state;\n    const data = {\n      username,\n      password\n    };\n    auth.login(\n      data,\n      () => {\n        if (this.props.location.state) {\n          this.from = this.props.location.state.from;\n        }\n        window.location.hash = this.from.pathname;\n\n        // reload to rerender Nav (some menu could be displayed only after login)\n        window.location.reload();\n      },\n      (err) => {\n        Toast.error(err);\n      }\n    );\n  };\n\n  render() {\n    const { username, password, redirectToRefer } = this.state;\n\n    if (redirectToRefer) {\n      return <Navigate to={this.from} />;\n    }\n\n    return (\n      <div className=\"login-wrapper\">\n        <h2 className=\"login-header\">Login</h2>\n        <InputText label=\"Username\" name=\"username\" value={username} onChange={this.onChange} />\n        <InputText label=\"Password\" name=\"password\" value={password} onChange={this.onChange} type=\"password\" />\n        <Button text=\"Login\" onClick={this.handleSubmit} />\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import axios from 'axios';\nimport queryString from 'query-string';\nimport { ACCESS_TOKEN } from '../constants/Constants';\nimport { auth } from '../components/Auth/Auth';\n\nconst cleanParam = (obj) => {\n  Object.keys(obj).forEach((k) => {\n    if (obj[k] === null || obj[k] === undefined) {\n      delete obj[k];\n    }\n  });\n  return obj;\n};\n\naxios.interceptors.request.use(\n  function (config) {\n    const newConfig = {\n      ...config,\n      paramsSerializer: (params) =>\n        queryString.stringify(cleanParam(params), { arrayFormat: 'repeat' }),\n      baseURL: process.env.REACT_APP_HOST_API,\n      // withCredentials: true,\n      headers: {\n        ...config.headers,\n        Pragma: 'no-cache'\n      }\n    };\n\n    // Add auth token\n    if (localStorage.getItem(ACCESS_TOKEN)) {\n      newConfig.headers.Authorization = `Bearer ${localStorage.getItem(ACCESS_TOKEN)}`;\n    }\n\n    return newConfig;\n  },\n  (error) => {\n    console.log(error);\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    if (response && response.data) return response.data;\n    return response;\n  },\n  (error) => {\n    if (error.response && error.response.status) {\n      if (error.response.status === 401) {\n        auth.redirectToLoginPage();\n      }\n      //... handle other statuses\n      return Promise.reject(error.response);\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default axios;\n","import { ACCESS_TOKEN } from '../../constants/Constants';\nimport axiosClient from '../../service/axiosClient';\nimport Toast from '../Toast/Toast';\nimport { ROLE_TABLE } from '../../constants/Constants';\n\nclass Auth {\n  constructor() {\n    this.userInfo = null;\n  }\n\n  isAuthenticated = () => {\n    const access_token = localStorage.getItem(ACCESS_TOKEN);\n    return !!access_token;\n  };\n\n  login = ({ username, password }, successCallback, failCallback) => {\n    const data = {\n      username,\n      password\n    };\n    axiosClient\n      .post('/signin', data)\n      .then((res) => {\n        localStorage.setItem(ACCESS_TOKEN, res[ACCESS_TOKEN]);\n        successCallback();\n      })\n      .catch((err) => {\n        failCallback(err.data ? err.data : err);\n      });\n  };\n\n  logout = () => {\n    axiosClient\n      .post('/signout')\n      .then((res) => {\n        localStorage.removeItem(ACCESS_TOKEN);\n        window.location = '/';\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n      });\n  };\n\n  getMe = () => {\n    return axiosClient.get('/api/user/me');\n  };\n\n  redirectToLoginPage = () => {\n    Toast.info('You need to login first!');\n    localStorage.removeItem(ACCESS_TOKEN);\n    window.location.hash = '/login';\n  };\n\n  /**\n   * Check xem mảng roles có tồn tại role nào có quyền truy cập path hay ko\n   * @param {string[]} roles - Array of role\n   * @param {string} path - URL\n   */\n  rolesHasPermission = (roles, path) => {\n    if (!ROLE_TABLE[path]) return true;\n    for (let i = 0; i < roles.length; i++) {\n      if (ROLE_TABLE[path].includes(roles[i])) return true;\n    }\n    // Dùng forEach: bất đồng bộ nên ko được nhé!\n    // Nó sẽ return false trước khi chạy vào trong forEach\n    // roles.forEach(role => {\n    //   if (ROLE_TABLE[path].includes(role)) return true;\n    // });\n    return false;\n  };\n}\n\nexport let auth = new Auth();\n","import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst options = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined\n};\n\nconst info = (text) => {\n  toast.info(text, options);\n};\n\nconst success = (text) => {\n  toast.success(text, options);\n};\n\nconst warn = (text) => {\n  toast.warn(text, options);\n};\n\nconst error = (err) => {\n  let msg;\n  if (err.data && err.data.message) msg = err.data.message;\n  else if (err) msg = err.toString();\n  else msg = 'Error: unexpected error occurred!';\n  toast.error(msg, options);\n};\n\nconst customToast = {\n  info,\n  success,\n  warn,\n  error\n};\n\nexport default customToast;\n"],"names":["props","text","onClick","disabled","className","classes","concat","_jsx","children","InputText","PureComponent","constructor","super","onChange","e","value","target","maxLength","this","errorMsg","length","regexValidation","regexErrorMsg","setState","name","invalid","onKeyPress","regex","match","state","defaultValue","render","label","isRequire","type","placeholder","_jsxs","Login","obj","handleSubmit","username","password","data","auth","login","location","from","window","hash","pathname","reload","err","Toast","error","redirectToRefer","Navigate","to","Button","axios","interceptors","request","use","config","newConfig","_objectSpread","paramsSerializer","params","queryString","stringify","Object","keys","forEach","k","undefined","arrayFormat","baseURL","process","headers","Pragma","localStorage","getItem","ACCESS_TOKEN","Authorization","console","log","Promise","reject","response","status","redirectToLoginPage","isAuthenticated","_ref","successCallback","failCallback","axiosClient","post","then","res","setItem","catch","logout","removeItem","getMe","get","info","rolesHasPermission","roles","path","ROLE_TABLE","i","includes","userInfo","options","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","toast","success","warn","msg","message","toString"],"sourceRoot":""}