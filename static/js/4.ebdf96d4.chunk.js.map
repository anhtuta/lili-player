{"version":3,"sources":["components/Toast/Toast.js","components/Auth/Auth.js","service/axiosClient.js","assets/images/background.jpg","assets/images/spin.jpg","assets/icons/music_icon.jpg","assets/icons/favicon.png","../../index.js","pages/BaiHat/BaiHatService.js","components/Input/SearchBox.js","components/Modal/Modal.jsx","pages/BaiHat/BaiHatTable.js","pages/BaiHat/Player.js","service/scroll.js","pages/BaiHat/Setting.js","pages/BaiHat/Waveform.js","pages/BaiHat/LeftPlayground.js","pages/BaiHat/BaiHat.js","buildInfo.js"],"names":["options","position","toast","POSITION","TOP_RIGHT","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","customToast","info","text","success","warn","error","err","msg","data","message","toString","auth","constructor","isAuthenticated","localStorage","getItem","ACCESS_TOKEN","login","_ref","successCallback","failCallback","username","password","axiosClient","post","then","res","setItem","catch","logout","removeItem","window","location","console","log","Toast","getMe","get","redirectToLoginPage","hash","rolesHasPermission","roles","path","ROLE_TABLE","i","length","includes","this","userInfo","axios","interceptors","request","use","config","newConfig","paramsSerializer","params","queryString","stringify","obj","Object","keys","forEach","k","arrayFormat","baseURL","process","headers","Pragma","Authorization","Promise","reject","response","status","module","exports","getWait","wait","defer","deferred","promise","resolve","fn","arguments","lastCallAt","timer","pendingArgs","currentWait","currentTime","Date","getTime","isCold","_len","args","Array","_key","leading","accumulate","call","result","apply","concat","clearTimeout","push","setTimeout","flush","bind","argsIndex","results","thisDeferred","getKaraokeWordStyle","lyric_playground","isLightTheme","classList","contains","fillKaraokeWord","word","setAttribute","BaiHatService","getAllSongs","getLyric","file","updateListen","put","setBulletText","emptyWord","bullet","innerHTML","runKaraokeEffect","myAudio","currWord","st","en","emptyKaraokeWord","SearchBox","PureComponent","props","super","onChange","e","value","target","maxLength","errorMsg","regexValidation","regexErrorMsg","setState","onKeyUp","searchText","keyCode","onSearch","typingTimer","onKeyDown","state","name","onClear","regex","match","invalid","focus","render","label","disabled","isRequire","type","placeholder","React","createElement","className","onClick","Modal","title","onClose","children","caption","BaiHatTable","showModalPicture","setShowModalPicture","useState","selectedSong","setSelectedSong","artist","rainbowColors","lastSoyBg","uniqueSoys","Set","songData","map","song","song_of_the_year","filter","Boolean","sort","a","b","getSoyBackgroundColor","soy","index","indexOf","getSoyTextColor","id","cellSpacing","cellPadding","style","textAlign","cursor","minWidth","sortBy","sortOrder","image_url","getAbsoluteUrl","musicIcon","key","currSong","src","alt","onClickPicture","href","playSong","isPlaying","listens","background","color","formatCreatedDate","onCloseModal","width","maxWidth","Player","_this","setMediaSessionMeta","imgUrl","favicon","navigator","mediaSession","metadata","MediaMetadata","artwork","sizes","setActionHandler","prevSong","nextSong","playAudio","pauseAudio","setPlayList","pl","activeAudioIdx","playList","initPlayList","activeAudio","setPlayType","getSetting","setActiveAudio","setMouseDown","mouseDown","clearMouseDown","toggleShuffle","playType","SHUFFLE","SEQUENCE","toggleRepeat","REPEAT_ONE","togglePlay","secsToMins","time","int","Math","floor","slice","getCurrentTime","currentTimeFormatted","currentTimePercentage","getDuration","innerText","progressBar","showCurrentTime","requestAnimationFrame","cancelAnimationFrame","showDuration","durationFormatted","duration","updateProgressBar","totalWidth","progressWrapper","offsetWidth","offsetPercentage","nativeEvent","offsetX","onSeeked","Infinity","playPromise","play","onPlay","pause","onPause","pt","shuffle","saveSetting","createRef","llPlayer","llPlayPause","componentDidMount","getPlayerInstance","onMouseDown","onMouseUp","ref","node","album","onMouseMove","preload","songURL","onLoadedMetadata","onEnded","crossOrigin","getRelativePos","elm","pPos","parentNode","getBoundingClientRect","cPos","pos","top","scrollTop","right","bottom","left","easeInOutQuad","t","scrollInsideElementToCenter","container","element","now","elapsed","offset","start","change","startTime","performance","animateScroll","scrollInsideElement","offsetHeight","scrollPage","startingY","pageYOffset","elementY","diff","document","body","scrollHeight","innerHeight","step","timestamp","percent","min","scrollTo","Setting","onChangeVolume","volume","initSettingsAtPlayer","lyricAlign","settingLyricAlign","theme","changeTheme","speed","playbackRate","vol","setKaraokeMode","setBlurMode","setGiganticLine","setWordAppear","setLineAppear","align","div_result","settingTheme","themeName","div_background","display","remove","add","toggleKaraokeMode","isKaraokeMode","toggleBlurMode","isBlurMode","toggleGiganticLine","isGiganticLine","flipWaveform","flip","updateFlipWaveform","toggleWordAppear","isWordAppear","toggleLineAppear","isLineAppear","updateSpeed","Number","toFixed","showSetting","openSetting","isFullscreen","max","Waveform","drawWaveform","analyser","canvas","innerWidth","height","canvasContext","getContext","bufferLength","frequencyBinCount","totalBar","parseInt","dataArray","Uint8Array","peakArr","fill","velocityArr","WIDTH","HEIGHT","barWidth","averageRGB","getAverageRGB","barHeight","barColor","x","renderFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","paused","waveformAniFr","getBarColor","heightRatio","barRatio","stopWaveform","getWaveformInstance","onresize","debounce","LeftPlayground","toggleWaveform","showWaveform","initAnalyzer","Fragment","BaiHat","audioContext","AudioContext","webkitAudioContext","audioSrcNode","createMediaElementSource","createAnalyser","connect","destination","fftSize","isPlaySong","loading","newParams","currInx","find","idx","playerInstance","scrollTableToActiveSong","isScrollTr","zing_id","zingStream","spinImage","songTable","getById","allSongValue","activeTr","FETCHING_LYRIC","lines","lyric","endsWith","isLrc","hasTranslation","LYRIC_NOT_FOUND","setNoLyric","saveLyric","trim","split","initLyric","isNoLyric","setPlayLyricInterval","startTimes","endTimes","tranMaps","cntWord","offsetTime","currWordID","NO_LYRIC","metaExist","lyricMeta","initLrcLyric","initTrcLyric","async","temp","startLine","words","startWord","endWord","divLine","line","decodeTime","substring","createNewElement","parseFloat","myParseFloat","spanWord","replace","appendChild","readLyricMeta","appendLyricMeta","lineTimeLen","lineTranTag","tranNum","lineTranText","lineWords","lineTime","lineMap","Map","lineTranMap","reduce","total","curr","lineT","set","has","size","spanTran","end","lastIndexOf","by","date","source","divLyricInfo","d","dStr","isValidDate","formatDateMY","playLyricInterval","setInterval","updateLyric","clearPlayLyricInterval","clearInterval","clearCountdownInterval","reUpdateWordPass","scrollLyric","spinning","waveformInstance","drawWave","countdownAtEmptyWord","timeDiff","timeLeft","ceil","prevWord","prevParent","getAttribute","gotoNextWord","getCurrentWordByTime","currParent","child","activeAtCurr","removeActiveLastLine","currIndex","childNodes","finalLine","offsetTop","clientHeight","sec","mid","lo","hi","currErrWord","countdownInterval","passedWord","removeLineActive","notPassWord","toggleSetting","isShow","toggleFullscreen","setFullscreen","unsetFullscreen","body_wrapper","getByClass","filterTable","page","div_left_wrapper","addEventListener","componentWillUnmount","context","file_name","backgroundURL","backgroundImage","THEME_LIGHT","func","clear","contextType","LiliContext","withRouter"],"mappings":"uHAAA,kBAGA,MAAMA,EAAU,CACdC,SAAUC,IAAMC,SAASC,UACzBC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,GAuBNC,EAAc,CAClBC,KArBYC,IACZZ,IAAMW,KAAKC,EAAMd,IAqBjBe,QAlBeD,IACfZ,IAAMa,QAAQD,EAAMd,IAkBpBgB,KAfYF,IACZZ,IAAMc,KAAKF,EAAMd,IAejBiB,MAZaC,IACb,IAAIC,EAC8BA,EAA9BD,EAAIE,MAAQF,EAAIE,KAAKC,QAAeH,EAAIE,KAAKC,QACxCH,EAAWA,EAAII,WACb,oCACXpB,IAAMe,MAAME,EAAKnB,KAUJY,O,gCCxCf,6DAyEO,IAAIW,EAAO,IApElB,MACEC,cAAe,KAIfC,gBAAkB,MACKC,aAAaC,QAAQC,KAE1C,KAEFC,MAAQ,CAAAC,EAAyBC,EAAiBC,KAAkB,IAA3D,SAAEC,EAAQ,SAAEC,GAAUJ,EAC7B,MAAMV,EAAO,CACXa,WACAC,YAEFC,IACGC,KAAK,UAAWhB,GAChBiB,KAAMC,IACLZ,aAAaa,QAAQX,IAAcU,EAAIV,MACvCG,MAEDS,MAAOtB,IACNc,EAAad,EAAIE,KAAOF,EAAIE,KAAOF,MAEvC,KAEFuB,OAAS,KACPN,IACGC,KAAK,YACLC,KAAMC,IACLZ,aAAagB,WAAWd,KACxBe,OAAOC,SAAW,MAEnBJ,MAAOtB,IACN2B,QAAQC,IAAI5B,GACZ6B,IAAM9B,MAAMC,MAEhB,KAEF8B,MAAQ,IACCb,IAAYc,IAAI,gBACvB,KAEFC,oBAAsB,KACpBH,IAAMlC,KAAK,4BACXa,aAAagB,WAAWd,KACxBe,OAAOC,SAASO,KAAO,UACvB,KAOFC,mBAAqB,CAACC,EAAOC,KAC3B,IAAKC,IAAWD,GAAO,OAAO,EAC9B,IAAK,IAAIE,EAAI,EAAGA,EAAIH,EAAMI,OAAQD,IAChC,GAAID,IAAWD,GAAMI,SAASL,EAAMG,IAAK,OAAO,EAOlD,OAAO,GA9DPG,KAAKC,SAAW,Q,gCCPpB,4CAcAC,IAAMC,aAAaC,QAAQC,KACzB,SAAUC,GACR,MAAMC,EAAY,IACbD,EACHE,iBAAmBC,IACjBC,WAAYC,WAdAC,EAcqBH,EAbvCI,OAAOC,KAAKF,GAAKG,QAASC,IACT,OAAXJ,EAAII,SAA0BhE,IAAX4D,EAAII,WAClBJ,EAAII,KAGRJ,GAQyC,CAAEK,YAAa,WAd7CL,OAedM,QAASC,iDAETC,QAAS,IACJd,EAAOc,QACVC,OAAQ,aASZ,OAJItD,aAAaC,QAAQC,OACvBsC,EAAUa,QAAQE,cAAgB,UAAUvD,aAAaC,QAAQC,MAG5DsC,IAERjD,IACC4B,QAAQC,IAAI7B,GACLiE,QAAQC,OAAOlE,KAI1B4C,IAAMC,aAAasB,SAASpB,IACzBoB,GACKA,GAAYA,EAAShE,KAAagE,EAAShE,KACxCgE,EAERnE,GACKA,EAAMmE,UAAYnE,EAAMmE,SAASC,QACL,MAA1BpE,EAAMmE,SAASC,QACjB9D,IAAK2B,sBAGAgC,QAAQC,OAAOlE,EAAMmE,WAErBF,QAAQC,OAAOlE,IAKb4C,MAAK,G,wCC3DpByB,EAAOC,QAAU,IAA0B,wC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,sCCA3CD,EAAOC,QAAU,uhZ,mBCAjBD,EAAOC,QAAU,IAA0B,qC,qDCsD3C,SAASC,EAASC,GAChB,MAAwB,oBAATA,EAAuBA,IAASA,EAGjD,SAASC,IACP,IAAMC,EAAW,GAKjB,OAJAA,EAASC,QAAU,IAAIV,SAAQ,SAACW,EAASV,GACvCQ,EAASE,QAAUA,EACnBF,EAASR,OAASA,KAEbQ,EA9DTL,EAAOC,QAAU,SAAmBO,GAA4B,IAAxBL,EAAwBM,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAjB,EAAG/F,EAAc+F,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAJ,GACtDC,OAAA,EACAL,OAAA,EACAM,OAAA,EACAC,EAAc,GAClB,OAAO,WACL,IAAMC,EAAcX,EAAQC,GACtBW,GAAc,IAAIC,MAAOC,UAEzBC,GAAUP,GAAeI,EAAcJ,EAAcG,EAE3DH,EAAaI,EANqB,QAAAI,EAAAT,UAAAtC,OAANgD,EAAMC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAANF,EAAME,GAAAZ,UAAAY,GAQlC,GAAIJ,GAAUvG,EAAQ4G,QACpB,OAAO5G,EAAQ6G,WACX3B,QAAQW,QAAQC,EAAGgB,KAAKnD,KAAM,CAAC8C,KAAQpE,MAAK,SAAA0E,GAAA,OAAUA,EAAO,MAC7D7B,QAAQW,QAAQC,EAAGgB,KAAHE,MAAAlB,EAAA,CAAQnC,MAARsD,OAAiBR,KAYvC,GATId,EACFuB,aAAajB,GAEbN,EAAWD,IAGbQ,EAAYiB,KAAKV,GACjBR,EAAQmB,WAAWC,EAAMC,KAAK3D,MAAOwC,GAEjCnG,EAAQ6G,WAAY,CACtB,IAAMU,EAAYrB,EAAYzC,OAAS,EACvC,OAAOkC,EAASC,QAAQvD,MAAK,SAAAmF,GAAA,OAAWA,EAAQD,MAGlD,OAAO5B,EAASC,SAGlB,SAASyB,IACP,IAAMI,EAAe9B,EACrBuB,aAAajB,GAEbf,QAAQW,QACN7F,EAAQ6G,WACJf,EAAGgB,KAAKnD,KAAMuC,GACdJ,EAAGkB,MAAMrD,KAAMuC,EAAYA,EAAYzC,OAAS,KAEnDpB,KAAKoF,EAAa5B,QAAS4B,EAAatC,QAE3Ce,EAAc,GACdP,EAAW,Q,uGChDf,MAYM+B,EAAsBA,CAACC,EAAkB7C,KAC7C,IAAI8C,EAAeD,EAAiBE,UAAUC,SAAS,kBACvD,MACE,mDAGCF,EAAe,UAAY,QAC5B,IACA9C,EACA,OACC8C,EAAe,OAAS,QACzB,QAIEG,EAAkBA,CAACJ,EAAkBK,KACzCA,EAAKC,aAAa,QAASP,EAAoBC,EAAkB,OA6BpDO,MAXO,CACpBC,YA/CmB/D,GACZjC,IAAYc,IAAI,gBAAiB,CAAEmB,WA+C1CgE,SA5CgBC,GACTlG,IAAYc,IAAI,mBAAqBoF,GA4C5CC,aAzCoBhF,GACbnB,IAAYoG,IAAI,0BAA4BjF,GAyCnDoE,sBACAK,kBACAS,cArBoBA,CAACb,EAAkBc,EAAWC,KAElDD,EAAUE,UADM,CAAC,SAAU,SAAK,eAAM,qBAAO,2BAAQ,kCACrBD,GAChCX,EAAgBJ,EAAkBc,IAmBlCG,iBAhBuBA,CAACjB,EAAkBkB,EAASC,EAAUC,EAAIC,KACjE,IAAIlE,EAAwC,KAA5B+D,EAAQzC,YAAc2C,IAAcC,EAAKD,GACzDD,EAASb,aAAa,QAASP,EAAoBC,EAAkB7C,KAerEmE,iBAZwBjB,IACxBA,EAAKC,aAAa,QAAS,M,wCCvC7B,MAAMiB,UAAkBC,gBACtB3H,YAAY4H,GACVC,MAAMD,GAAO,KAUfE,SAAYC,IACV,MAAM,MAAEC,GAAUD,EAAEE,OACdC,EAAY/F,KAAKyF,MAAMM,UAAY/F,KAAKyF,MAAMM,UAjBvB,IAkB7B,IAAIC,EAAW,GAEXH,EAAM/F,OAASiG,EACjBC,EAAW,iCAAmCD,EACpC/F,KAAKiG,gBAAgBJ,KAC/BG,EAAWhG,KAAKyF,MAAMS,cAAgBlG,KAAKyF,MAAMS,cAAgB,0BAGnElG,KAAKmG,SAAS,CACZN,QACAG,cAEF,KAEFI,QAAU,CAACR,EAAGS,KACM,KAAdT,EAAEU,QAEJtG,KAAKuG,SAASF,GAEdrG,KAAKwG,YAAc/C,WAAW,KAC5BzD,KAAKuG,SAASF,IArCE,MAwCpB,KAEFI,UAAY,KACVlD,aAAavD,KAAKwG,cAClB,KAEFD,SAAW,KACT,IAAI,MAAEV,GAAU7F,KAAK0G,MACrB1G,KAAKyF,MAAMc,SAAS,CAAEI,KAAM3G,KAAKyF,MAAMkB,KAAMd,WAC7C,KAEFe,QAAU,KACR5G,KAAKmG,SAAS,CACZN,MAAO,KAET7F,KAAKyF,MAAMc,SAAS,CAAEI,KAAM3G,KAAKyF,MAAMkB,KAAMd,MAAO,QACpD,KAEFI,gBAAmBJ,IACjB,MAAMgB,EAAQ7G,KAAKyF,MAAMoB,MAAQ7G,KAAKyF,MAAMoB,MAAQ,GACpD,MAAc,KAAVhB,GAA0B,KAAVgB,GACbhB,EAAMiB,MAAMD,IAxDnB7G,KAAK0G,MAAQ,CACXb,MAAO,GACPG,SAAU,GACVe,SAAS,EACTC,OAAO,GAEThH,KAAKwG,YAAc,KAqDrBS,SACE,MAAM,KAAEN,EAAI,MAAEO,EAAK,SAAEC,GAAW,EAAK,UAAEC,GAAY,EAAK,KAAEC,EAAO,OAAM,YAAEC,EAAc,aAAgBtH,KAAKyF,OAEtG,MAAEI,EAAK,SAAEG,GAAahG,KAAK0G,MAEjC,OACEa,IAAAC,cAAA,OAAKC,UAAU,iBACZP,GACCK,IAAAC,cAAA,SAAOC,UAAU,eACdP,EACAE,GAAaG,IAAAC,cAAA,QAAMC,UAAU,iBAAgB,UAGlDF,IAAAC,cAAA,OAAKC,UAAU,wBACbF,IAAAC,cAAA,KAAGC,UAAU,iCAAiCC,QAAS1H,KAAKuG,WAC5DgB,IAAAC,cAAA,SACEH,KAAMA,EACNV,KAAMA,EACNd,MAAOA,EACPsB,SAAUA,EACVxB,SAAU3F,KAAK2F,SACf8B,UAAW,iCAAqCzB,EAAW,eAAiB,IAC5EsB,YAAaA,EACblB,QAASpG,KAAKoG,QACdK,UAAWzG,KAAKyG,YAEjBZ,GAAS0B,IAAAC,cAAA,KAAGC,UAAU,+BAA+BC,QAAS1H,KAAK4G,YACjEZ,GAAYuB,IAAAC,cAAA,OAAKC,UAAU,mBAAmBzB,MAO5CT,Q,MCvFAoC,MAZAlC,GAEX8B,IAAAC,cAAA,OAAKC,UAAU,iBACbF,IAAAC,cAAA,QAAMC,UAAU,QAAQG,MAAM,QAAQF,QAASjC,EAAMoC,SAAS,QAG9DN,IAAAC,cAAA,OAAKC,UAAU,iBAAiBhC,EAAMqC,UACtCP,IAAAC,cAAA,OAAKC,UAAU,WAAWhC,EAAMsC,U,yBC6IvBC,MAjJMvC,IACnB,MAAOwC,EAAkBC,GAAuBX,IAAMY,UAAS,IACxDC,EAAcC,GAAmBd,IAAMY,SAAS,MAcjDJ,EAAUK,EAAeA,EAAaE,OAAS,MAAQF,EAAaR,MAAQ,GAC5EW,EAAgB,CAGpB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEIC,EAAYD,EAAcA,EAAczI,OAAS,GACjD2I,EAAa,IAAI,IAAIC,IAAIjD,EAAMkD,SAASC,IAAKC,GAASA,EAAKC,kBAAkBC,OAAOC,WAAWC,KAAK,CAACC,EAAGC,IAAMA,EAAID,GAClHE,EAAyBC,IAC7B,IAAKA,EAAK,OAAOb,EACjB,MAAMc,EAAQb,EAAWc,QAAQF,GAEjC,OADAnK,QAAQC,IAAI,wBAAyBkK,EAAKC,GACnCf,EAAce,IAAUd,GAE3BgB,EAAmBH,IACvB,IAAKA,EAAK,MAAO,OAEjB,OADcZ,EAAWc,QAAQF,GAClBd,EAAczI,OAAS,EAAI,OAAS,QAQrD,OACEyH,IAAAC,cAAA,OAAKiC,GAAG,aACNlC,IAAAC,cAAA,OAAKC,UAAU,kBACbF,IAAAC,cAACjC,EAAS,CAACoB,KAAK,aAAaJ,SAAUd,EAAMc,YAE/CgB,IAAAC,cAAA,OAAKC,UAAU,mCACbF,IAAAC,cAAA,SAAOC,UAAU,gBAAgBgC,GAAG,YAAYC,YAAY,IAAIC,YAAY,KAC1EpC,IAAAC,cAAA,aACED,IAAAC,cAAA,UACED,IAAAC,cAAA,MAAIoC,MAAO,CAAEC,UAAW,UAAW,OACnCtC,IAAAC,cAAA,MACEoC,MAAO,CAAEE,OAAQ,UAAWC,SAAU,SACtCrC,QAASA,IAAMjC,EAAMjB,YAAY,CAAEwF,OAAQ,QAASC,UAAW,SAChE,QAGD1C,IAAAC,cAAA,MAAIoC,MAAO,CAAEE,OAAQ,WAAapC,QAASA,IAAMjC,EAAMjB,YAAY,CAAEwF,OAAQ,UAAWC,UAAW,UAAW,WAG9G1C,IAAAC,cAAA,MACEoC,MAAO,CAAEE,OAAQ,WACjBpC,QAASA,IAAMjC,EAAMjB,YAAY,CAAEwF,OAAQ,mBAAoBC,UAAW,SAC1ErC,MAAM,oBACP,OAGDL,IAAAC,cAAA,MAAIoC,MAAO,CAAEE,OAAQ,WAAapC,QAASA,IAAMjC,EAAMjB,YAAY,CAAEwF,OAAQ,OAAQC,UAAW,SAAU,QAG1G1C,IAAAC,cAAA,MAAIoC,MAAO,CAAEE,OAAQ,WAAapC,QAASA,IAAMjC,EAAMjB,YAAY,CAAEwF,OAAQ,cAAeC,UAAW,UAAW,UAKtH1C,IAAAC,cAAA,aACG/B,EAAMkD,SAASC,IAAI,CAACC,EAAMS,KACzB,MAAMY,EAAYrB,EAAKqB,UAAYC,YAAetB,EAAKqB,WAAaE,IACpE,OACE7C,IAAAC,cAAA,MACE6C,IAAKxB,EAAKY,GACVhC,UAAWhC,EAAM6E,UAAY7E,EAAM6E,SAAS3K,OAASkJ,EAAKlJ,KAAO,YAAc,GAC/E8J,GAAI,MAAQZ,EAAKY,IAEjBlC,IAAAC,cAAA,UAAK8B,EAAQ,GACb/B,IAAAC,cAAA,MAAIC,UAAU,gBACZF,IAAAC,cAAA,OACEC,UAAU,eACV8C,IAAKL,EACLM,IAAK3B,EAAKP,OAAS,MAAQO,EAAKjB,MAChCF,QAASA,IArGLmB,KAClBA,EAAKqB,YACP7B,EAAgB,IAAKQ,IACrBX,GAAoB,KAkGWuC,CAAe5B,KAEhCtB,IAAAC,cAAA,KAAGC,UAAU,YAAYiD,KAAM,aAAe7B,EAAKlJ,KAAM+H,QAASA,IAAMjC,EAAMkF,SAAS9B,IACrFtB,IAAAC,cAAA,OAAKC,UAAU,cAAcoB,EAAKjB,OAClCL,IAAAC,cAAA,OAAKC,UAAU,eAAeoB,EAAKP,SAErCf,IAAAC,cAAA,KAAGC,UAAW,cAAgBhC,EAAMmF,UAAY,UAAY,YAE9DrD,IAAAC,cAAA,UAAKqB,EAAKgC,SACVtD,IAAAC,cAAA,UACGqB,EAAKC,kBACJvB,IAAAC,cAAA,QACEC,UAAU,MACVmC,MAAO,CACLkB,WAAY1B,EAAsBP,EAAKC,kBACvCiC,MAAOvB,EAAgBX,EAAKC,mBAE9BlB,MAAO,qBAAqBiB,EAAKC,kBAEhCD,EAAKC,mBAIZvB,IAAAC,cAAA,UAAKqB,EAAKxB,MACVE,IAAAC,cAAA,UAAKqB,EAAKmC,yBAOrB/C,GACCV,IAAAC,cAACG,EAAK,CAACE,QA9HQoD,KACnB5C,EAAgB,MAChBH,GAAoB,IA4HcH,QAASA,GACrCR,IAAAC,cAAA,OAAKoC,MAvFS,CACpBsB,MAAO,QACPC,SAAU,OAqFuB1D,UAAU,YAAY8C,IAAKJ,YAAe/B,EAAa8B,WAAYM,IAAKzC,O,8BCzI7G,MAAMqD,UAAe5F,gBACnB3H,YAAY4H,GAAQ,IAAD4F,EACjB3F,MAAMD,GAAM4F,EAAArL,KAAC,KAuCfsL,oBAAsB,CAAC1D,EAAOU,EAAQiD,KAC/BA,IACHA,EAASC,KAGP,iBAAkBxM,OAAOyM,WAC3BzM,OAAOyM,UAAUC,aAAaC,SAAW,IAAI3M,OAAO4M,cAAc,CAChEhE,MAAOA,EACPU,OAAQA,EACRuD,QAAS,CACP,CAAEtB,IAAKgB,EAAQO,MAAO,QAASzE,KAAM,aACrC,CAAEkD,IAAKgB,EAAQO,MAAO,UAAWzE,KAAM,aACvC,CAAEkD,IAAKgB,EAAQO,MAAO,UAAWzE,KAAM,aACvC,CAAEkD,IAAKgB,EAAQO,MAAO,UAAWzE,KAAM,aACvC,CAAEkD,IAAKgB,EAAQO,MAAO,UAAWzE,KAAM,aACvC,CAAEkD,IAAKgB,EAAQO,MAAO,UAAWzE,KAAM,gBAG3CrI,OAAOyM,UAAUC,aAAaK,iBAAiB,gBAAiB/L,KAAKgM,UACrEhN,OAAOyM,UAAUC,aAAaK,iBAAiB,YAAa/L,KAAKiM,UACjEjN,OAAOyM,UAAUC,aAAaK,iBAAiB,OAAQ/L,KAAKkM,WAC5DlN,OAAOyM,UAAUC,aAAaK,iBAAiB,QAAS/L,KAAKmM,YAC7DnN,OAAOyM,UAAUC,aAAaK,iBAAiB,OAAQ/L,KAAKmM,aAE5DjN,QAAQC,IAAI,kDAEd,KAMFiN,YAAc,CAACC,EAAIC,KAKjBtM,KAAKuM,SAAW,IAAIF,GACpBrM,KAAKwM,aAAe,IAAIH,GACxBrM,KAAKyM,YAAcH,EACnBtM,KAAK0M,YAAYC,YAAW,cAC5B,KAEFC,eAAkB/D,IAGhB,GAAI7I,KAAKuM,SAASvM,KAAKyM,aAAahD,KAAOZ,EAAKY,GAAhD,CAGA,IAAK,IAAI5J,EAAI,EAAGA,EAAIG,KAAKuM,SAASzM,OAAQD,IACxC,GAAIG,KAAKuM,SAAS1M,GAAG4J,KAAOZ,EAAKY,GAAI,CACnCzJ,KAAKyM,YAAc5M,EACnB,MAGJX,QAAQC,IAAI,sBAAuBa,KAAKyM,eACxC,KAEFI,aAAe,KACb7M,KAAK8M,WAAY,GACjB,KAEFC,eAAiB,KACf/M,KAAK8M,WAAY,GACjB,KAOFE,cAAgB,KACdhN,KAAK0G,MAAMuG,WAAaC,IAAUlN,KAAK0M,YAAYS,KAAYnN,KAAK0M,YAAYQ,MAChF,KAEFE,aAAe,KACbpN,KAAK0G,MAAMuG,WAAaI,IAAarN,KAAK0M,YAAYS,KAAYnN,KAAK0M,YAAYW,MACnF,KAEFC,WAAa,KACXtN,KAAK0G,MAAMkE,UAAY5K,KAAKmM,aAAenM,KAAKkM,aAChD,KAEFF,SAAW,KACT,MAAM,SAAEiB,GAAajN,KAAK0G,MAC1B,GAAIuG,IAAaI,IAAY,CAC3B,GAAyB,IAArBrN,KAAKyM,YAEP,YADArN,IAAM/B,KAAK,2CAEN2C,KAAKyM,cAEdzM,KAAKyF,MAAMkF,SAAS3K,KAAKuM,SAASvM,KAAKyM,cAAc,IACrD,KAEFR,SAAW,KACT,MAAM,SAAEgB,GAAajN,KAAK0G,MAC1B,GAAIuG,IAAaI,IAAY,CAC3B,GAAIrN,KAAKyM,cAAgBzM,KAAKuM,SAASzM,OAAS,EAG9C,OAFAV,IAAM/B,KAAK,4FACX2C,KAAKsN,aAEAtN,KAAKyM,cAEdzM,KAAKyF,MAAMkF,SAAS3K,KAAKuM,SAASvM,KAAKyM,cAAc,IACrD,KAEFc,WAAcC,IACZ,IAAIC,EAAMC,KAAKC,MAAMH,GAKrB,OAJSE,KAAKC,MAAMF,EAAM,IAEP,KAAO,IADjBA,EAAM,IACuBG,OAAO,IAG7C,KAEFC,eAAiB,KACf,IAAK7N,KAAKkF,QAAS,OAEnB,MAAM4I,EAAuB9N,KAAKuN,WAAWvN,KAAKkF,QAAQzC,aACxDsL,EAAyB/N,KAAKkF,QAAQzC,YAAczC,KAAKgO,cAAiB,IAE5EhO,KAAKyC,YAAYwL,UAAYH,EAC7B9N,KAAKkO,YAAYtE,MAAMsB,MAAQ6C,EAAwB,IAEnD/N,KAAK0G,MAAMkE,UACb5K,KAAKmO,gBAAkBC,sBAAsBpO,KAAK6N,gBAElDQ,qBAAqBrO,KAAKmO,kBAE5B,KAEFG,aAAe,KACb,IAAIC,EAAoBvO,KAAKuN,WAAWvN,KAAKgO,eAC7ChO,KAAKwO,SAASP,UAAYM,GAC1B,KAMFE,kBAAqB7I,IACnB,MAAM8I,EAAa1O,KAAK2O,gBAAgBC,YAElCC,EADUjJ,EAAEkJ,YAAYC,QACKL,GAE/B1O,KAAK8M,WAAwB,UAAXlH,EAAEyB,QACtBrH,KAAKkF,QAAQzC,YAAczC,KAAKgO,cAAgBa,EAE3C7O,KAAK0G,MAAMkE,WACd5K,KAAK6N,iBAEP7N,KAAKyF,MAAMuJ,aAEb,KAIFhB,YAAc,IACLhO,KAAKkF,QAAQsJ,WAAaS,IAAW,IAAMjP,KAAKkF,QAAQsJ,SAC/D,KAEFtC,UAAY,KACV,IAAIgD,EAAclP,KAAKkF,QAAQiK,YAIXnS,IAAhBkS,EACFA,EACGxQ,KAAK,KAEJsB,KAAKmG,SAAS,CAAEyE,WAAW,GAAQ,KACjC5K,KAAK6N,iBACL7N,KAAKyF,MAAM2J,aAGdvQ,MAAOvB,IAEN0C,KAAKmM,aACLjN,QAAQC,IAAI,uBAAwB7B,GACpC8B,IAAM9B,MAAM,mMAGhB0C,KAAKmM,aACL/M,IAAM9B,MAAM,0DAEd,KAEF6O,WAAa,KACXnM,KAAKkF,QAAQmK,QACbrP,KAAKyF,MAAM6J,UACXtP,KAAKmG,SAAS,CAAEyE,WAAW,KAC3B,KAGF8B,YAAc,WAAoB,IAAnB6C,EAAEnN,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAG+K,IAElB,GADA9B,EAAKlF,SAAS,CAAE8G,SAAUsC,IACtBA,IAAOrC,IAAS,CAClB,MAAM5C,EAAWe,EAAKkB,SAASlB,EAAKoB,aAGpC+C,YAAQnE,EAAKkB,UAGb,IAAK,IAAI1M,EAAI,EAAGA,EAAIwL,EAAKkB,SAASzM,OAAQD,IACxC,GAAIwL,EAAKkB,SAAS1M,GAAG4J,KAAOa,EAASb,GAAI,EACtC4B,EAAKkB,SAAS1M,GAAIwL,EAAKkB,SAAS,IAAM,CAAClB,EAAKkB,SAAS,GAAIlB,EAAKkB,SAAS1M,IACxEwL,EAAKoB,YAAc,EACnB,WAQC,CACL,MAAMnC,EAAWe,EAAKkB,SAASlB,EAAKoB,aACpCpB,EAAKkB,SAAW,IAAIlB,EAAKmB,cAGzB,IAAK,IAAI3M,EAAI,EAAGA,EAAIwL,EAAKkB,SAASzM,OAAQD,IACxC,GAAIwL,EAAKkB,SAAS1M,GAAG4J,KAAOa,EAASb,GAAI,CACvC4B,EAAKoB,YAAc5M,EACnB,OAUN4P,YAAY,WAAYF,IA/QxBvP,KAAK0G,MAAQ,CACXuG,SAAUE,IACVvC,WAAW,GAEb5K,KAAKkF,QAAUqC,IAAMmI,YACrB1P,KAAKyC,YAAc8E,IAAMmI,YACzB1P,KAAK2O,gBAAkBpH,IAAMmI,YAC7B1P,KAAKkO,YAAc3G,IAAMmI,YACzB1P,KAAK2P,SAAWpI,IAAMmI,YACtB1P,KAAK4P,YAAcrI,IAAMmI,YACzB1P,KAAKwO,SAAWjH,IAAMmI,YACtB1P,KAAK8M,WAAY,EACjB9M,KAAKmO,gBAAkB,KACvBnO,KAAKuM,SAAW,GAChBvM,KAAKwM,aAAe,GACpBxM,KAAKyM,YAAc,EAGrBoD,oBAGE7P,KAAKyF,MAAMqK,kBAAkB9P,MA6P/BiH,SACE,MAAM,KAAE4B,GAAS7I,KAAKyF,OAChB,SAAEwH,EAAQ,UAAErC,GAAc5K,KAAK0G,MAErC,OACEa,IAAAC,cAAA,OACEC,UAAW,cAAamD,EAAY,aAAe,aACnDmF,YAAa/P,KAAK6M,aAClBmD,UAAWhQ,KAAK+M,eAChBkD,IAAMC,GAAUlQ,KAAK2P,SAAWO,GAEhC3I,IAAAC,cAAA,OAAKC,UAAU,QACbF,IAAAC,cAAA,OAAKiC,GAAG,gBACNlC,IAAAC,cAAA,OAAKC,UAAU,cAAcoB,EAAKjB,OAClCL,IAAAC,cAAA,OAAKC,UAAU,eAAeoB,EAAKP,QACnCf,IAAAC,cAAA,OAAKC,UAAU,cAAa,IAAEoB,EAAKsH,MAAQtH,EAAKsH,MAAQ,WAAW,OAIvE5I,IAAAC,cAAA,OAAKC,UAAU,kBACbF,IAAAC,cAAA,UACEC,UAAW,eAAcwF,IAAaC,IAAU,SAAW,IAC3DtF,MAAO,IAAGqF,IAAaC,IAAU,mBAAqB,WACtDxF,QAAS1H,KAAKgN,eAEdzF,IAAAC,cAAA,OAAKC,UAAU,UACfF,IAAAC,cAAA,OAAKC,UAAU,WAEjBF,IAAAC,cAAA,UAAQC,UAAU,wBAAwBG,MAAM,WAAWF,QAAS1H,KAAKgM,UACvEzE,IAAAC,cAAA,OAAKC,UAAU,0BACfF,IAAAC,cAAA,OAAKC,UAAU,WAEjBF,IAAAC,cAAA,UACEC,UAAU,0BACVG,MAAOgD,EAAY,QAAU,OAC7BlD,QAAS1H,KAAKsN,WACd2C,IAAMC,GAAUlQ,KAAK4P,YAAcM,GAEnC3I,IAAAC,cAAA,OAAKC,UAAU,2BAEjBF,IAAAC,cAAA,UAAQC,UAAU,wBAAwBG,MAAM,OAAOF,QAAS1H,KAAKiM,UACnE1E,IAAAC,cAAA,OAAKC,UAAU,0BACfF,IAAAC,cAAA,OAAKC,UAAU,WAEjBF,IAAAC,cAAA,UACEC,UAAW,cAAawF,IAAaI,IAAa,SAAW,IAC7DzF,MAAM,aACNF,QAAS1H,KAAKoN,gBAIlB7F,IAAAC,cAAA,OAAKC,UAAU,QACbF,IAAAC,cAAA,QAAMC,UAAU,eAAewI,IAAMC,GAAUlQ,KAAKyC,YAAcyN,GAAO,QAGzE3I,IAAAC,cAAA,QACEC,UAAU,WACVwI,IAAMC,GAAUlQ,KAAK2O,gBAAkBuB,EACvCxI,QAAS1H,KAAKyO,kBACd2B,YAAapQ,KAAKyO,mBAElBlH,IAAAC,cAAA,QAAMyI,IAAMC,GAAUlQ,KAAKkO,YAAcgC,KAE3C3I,IAAAC,cAAA,QAAMC,UAAU,WAAWwI,IAAMC,GAAUlQ,KAAKwO,SAAW0B,GAAO,SAKpE3I,IAAAC,cAAA,SACEyI,IAAMC,GAAUlQ,KAAKkF,QAAUgL,EAC/BzG,GAAG,UACH4G,QAAQ,WACR9F,IAAKvK,KAAKyF,MAAM6K,QAChBC,iBAAkBvQ,KAAKsO,aACvBkC,QAASxQ,KAAKiM,SACdwE,YAAY,gBAOPrF,QC9Wf,SAASsF,EAAeC,GACtB,IAAIC,EAAOD,EAAIE,WAAWC,wBACxBC,EAAOJ,EAAIG,wBACXE,EAAM,GAOR,OALAA,EAAIC,IAAMF,EAAKE,IAAML,EAAKK,IAAMN,EAAIE,WAAWK,UAC/CF,EAAIG,MAAQJ,EAAKI,MAAQP,EAAKO,MAC9BH,EAAII,OAASL,EAAKK,OAASR,EAAKQ,OAChCJ,EAAIK,KAAON,EAAKM,KAAOT,EAAKS,KAErBL,EAOT,SAASM,EAAcC,GACrB,OAAOA,EAAI,GAAM,EAAIA,EAAIA,GAAU,EAAI,EAAIA,GAAKA,EAAlB,EAqCzB,SAASC,EAA4BC,EAAWC,EAASlD,IA1BzD,SAA6BiD,EAAWC,EAASlD,GAAuB,IAK3EmD,EACAC,EACAL,EAP8DM,EAAMzP,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAG,EACrE4O,EAAMN,EAAegB,GACrBI,EAAQL,EAAUP,UACpBa,EAASf,EAAIC,IAAMa,EACnBE,EAAYC,YAAYN,MAK1B,SAASO,IACPP,EAAMM,YAAYN,MAClBC,EAAUD,EAAMK,EAChBT,EAAIK,EAAUpD,EAEdiD,EAAUP,UAAYY,EAAQC,EAAST,EAAcC,GAAKM,EAEtDN,EAAI,GAAGvS,OAAOoP,sBAAsB8D,GAG1CA,IAQAC,CAAoBV,EAAWC,EAASlD,GAAWiD,EAAUW,aAAe,EAAIV,EAAQU,aAAe,GAQlG,SAASC,EAAWX,EAASlD,GAClC,IAOIsD,EAPAQ,EAAYtT,OAAOuT,YACnBC,EAAWxT,OAAOuT,YAAcb,EAAQZ,wBAAwBG,IAKhEwB,GADFC,SAASC,KAAKC,aAAeJ,EAAWxT,OAAO6T,YAAcH,SAASC,KAAKC,aAAe5T,OAAO6T,YAAcL,GAC5FF,EAGhBG,GAGLzT,OAAOoP,uBAAsB,SAAS0E,EAAKC,GACpCjB,IAAOA,EAAQiB,GAEpB,IAAIvF,EAAOuF,EAAYjB,EAGnBkB,EAAUtF,KAAKuF,IAAIzF,EAAOgB,EAAU,GArE5C,IAAwB+C,EAyEpByB,GAzEoBzB,EAyEKyB,GAxEhB,GAAM,EAAIzB,EAAIA,EAAIA,GAAKA,EAAI,IAAM,EAAIA,EAAI,IAAM,EAAIA,EAAI,GAAK,EA0ErEvS,OAAOkU,SAAS,EAAGZ,EAAYG,EAAOO,GAGlCxF,EAAOgB,GACTxP,OAAOoP,sBAAsB0E,MCxFnC,MAAMK,UAAgB3N,gBACpB3H,YAAY4H,GACVC,MAAMD,GAAO,KAMf2N,eAAkBxN,IAChB,MAAM,MAAEC,GAAUD,EAAEE,OACduN,EAASxN,EAAQ,IACvB7F,KAAKmG,SAAS,CAAEkN,OAAQxN,IACxB7F,KAAKyF,MAAMP,QAAQmO,OAASA,EAC5B5D,YAAY,SAAU4D,IACtB,KAUFC,qBAAuB,KACrB,MAAM,QAAEpO,EAAO,iBAAElB,GAAqBhE,KAAKyF,MAC3C,IAAI8N,EAAa5G,YAAW,cACxB4G,GAAYvT,KAAKwT,kBAAkBD,GAEvC,IAAIE,EAAQ9G,YAAW,SACvB,GAAI8G,EACF,OAAQA,GACN,IAAK,OACHzT,KAAK0T,YAAY,QACjB,MACF,IAAK,QACH1T,KAAK0T,YAAY,SACjB,MACF,IAAK,aACH1T,KAAK0T,YAAY,cAQvB,IAAIC,EAAQhH,YAAW,SACnBgH,IAAOzO,EAAQ0O,aAAeD,GAGlC,IAAIE,EAAMlH,YAAW,UACjBkH,IACF3O,EAAQmO,OAASQ,EACjB7T,KAAKmG,SAAS,CAAEkN,OAAc,IAANQ,KAG1B7T,KAAK8T,eAAenH,YAAW,gBAC/B3M,KAAK+T,YAAYpH,YAAW,aAC5B3M,KAAKgU,gBAAgBrH,YAAW,iBAChC3M,KAAKiU,cAActH,YAAW,eAC9B3M,KAAKkU,cAAcvH,YAAW,eAC9BlJ,WAAW,KACT4O,EAAWrO,EAAkB,MAC5B,KACH,KAEFwP,kBAAqBW,IACnBnU,KAAKyF,MAAM2O,WAAWxK,MAAMC,UAAYsK,EACxC1E,YAAY,aAAc0E,IAC1B,KAEFE,aAAgBC,IACdtU,KAAK0T,YAAYY,GACjB7E,YAAY,QAAS6E,IACrB,KAMFZ,YAAeY,IACb,MAAM,iBAAEtQ,EAAgB,eAAEuQ,GAAmBvU,KAAKyF,MAElD8O,EAAe3K,MAAM4K,QAAwB,eAAdF,EAA6B,GAAK,OAEjEtQ,EAAiBE,UAAUnD,QAAS0G,IAC9BA,EAAU1H,SAAS,cAAciE,EAAiBE,UAAUuQ,OAAOhN,KAEzEzD,EAAiBE,UAAUwQ,IAAI,YAAcJ,IAC7C,KAEFK,kBAAoB,KACb3U,KAAKyF,MAAM2O,WAAWlQ,UAAUC,SAAS,gBAG5CnE,KAAK8T,gBAAe,GAFpB9T,KAAK8T,gBAAe,IAItB,KACFA,eAAkBc,IAChB,MAAM,WAAER,GAAepU,KAAKyF,OACN,IAAlBmP,GACFR,EAAWlQ,UAAUwQ,IAAI,gBACzBN,EAAWlQ,UAAUuQ,OAAO,eAC5BhF,YAAY,eAAe,KACA,IAAlBmF,IACTR,EAAWlQ,UAAUuQ,OAAO,gBAC5BL,EAAWlQ,UAAUwQ,IAAI,eACzBjF,YAAY,eAAe,KAE7B,KAEFoF,eAAiB,KACf,MAAM,WAAET,GAAepU,KAAKyF,MACvB2O,EAAWlQ,UAAUC,SAAS,aAGjCnE,KAAK+T,aAAY,GAFjB/T,KAAK+T,aAAY,IAInB,KACFA,YAAee,IACb,MAAM,WAAEV,GAAepU,KAAKyF,OACT,IAAfqP,GACFV,EAAWlQ,UAAUwQ,IAAI,aACzBjF,YAAY,YAAY,KACA,IAAfqF,IACTV,EAAWlQ,UAAUuQ,OAAO,aAC5BhF,YAAY,YAAY,KAE1B,KAEFsF,mBAAqB,KACnB,MAAM,WAAEX,GAAepU,KAAKyF,MACvB2O,EAAWlQ,UAAUC,SAAS,2BAGjCnE,KAAKgU,iBAAgB,GAFrBhU,KAAKgU,iBAAgB,IAIvB,KACFA,gBAAmBgB,IACjB,MAAM,WAAEZ,GAAepU,KAAKyF,OACL,IAAnBuP,GACFZ,EAAWlQ,UAAUwQ,IAAI,2BACzBjF,YAAY,gBAAgB,KACA,IAAnBuF,IACTZ,EAAWlQ,UAAUuQ,OAAO,2BAC5BhF,YAAY,gBAAgB,KAE9B,KAEFwF,aAAe,KACb,IAAIC,EAAOvI,YAAW,gBAEpBuI,GADEA,IAAiB,IAATA,EAKZzF,YAAY,eAAgByF,GAC5B9V,IAAMlC,KAAK,mBAAmBgY,mCAI9BlV,KAAKyF,MAAM0P,mBAAmBD,IAC9B,KAEFE,iBAAmB,KACjB,MAAM,WAAEhB,GAAepU,KAAKyF,MACvB2O,EAAWlQ,UAAUC,SAAS,eAGjCnE,KAAKiU,eAAc,GAFnBjU,KAAKiU,eAAc,IAIrB,KACFA,cAAiBoB,IACf,MAAM,WAAEjB,GAAepU,KAAKyF,OACP,IAAjB4P,GACFjB,EAAWlQ,UAAUwQ,IAAI,eACzBjF,YAAY,cAAc,KACA,IAAjB4F,IACTjB,EAAWlQ,UAAUuQ,OAAO,eAC5BhF,YAAY,cAAc,KAE5B,KAEF6F,iBAAmB,KACjB,MAAM,WAAElB,GAAepU,KAAKyF,MACvB2O,EAAWlQ,UAAUC,SAAS,eAGjCnE,KAAKkU,eAAc,GAFnBlU,KAAKkU,eAAc,IAIrB,KACFA,cAAiBqB,IACf,MAAM,WAAEnB,GAAepU,KAAKyF,OACP,IAAjB8P,GACFnB,EAAWlQ,UAAUwQ,IAAI,eACzBjF,YAAY,cAAc,KACA,IAAjB8F,IACTnB,EAAWlQ,UAAUuQ,OAAO,eAC5BhF,YAAY,cAAc,KAE5B,KAEF+F,YAAe3D,IACb,IAAI8B,EAAQ3T,KAAKyF,MAAMP,QAAQ0O,aAAe/B,EAC9C8B,EAAQ8B,OAAO9B,EAAM+B,QAAQ,MAC7B1V,KAAKyF,MAAMP,QAAQ0O,aAAeD,EAClCvU,IAAMlC,KAAK,UAAYyW,EAAQ,KAC/BlE,YAAY,QAASkE,IA7MrB3T,KAAK0G,MAAQ,CACX2M,OAAQ,KAYZxD,oBACE7P,KAAKyF,MAAM6N,qBAAqBtT,KAAKsT,sBAkMvCrM,SACE,MAAM,YAAE0O,EAAW,YAAEC,EAAW,aAAEC,GAAiB7V,KAAKyF,OAClD,OAAE4N,GAAWrT,KAAK0G,MACxB,OACEa,IAAAC,cAAA,OAAKC,UAAU,kBAAkBmC,MAAO,CAAE4K,QAASqB,EAAe,OAAS,MACvEF,GACApO,IAAAC,cAAA,OAAKC,UAAU,qBAAqBG,MAAM,WAAWF,QAASkO,GAC5DrO,IAAAC,cAAA,KAAGC,UAAU,wBAIdkO,GACDpO,IAAAC,cAAA,OAAKiC,GAAG,mBACNlC,IAAAC,cAAA,WACED,IAAAC,cAAA,QAAMC,UAAU,kBAAiB,cACjCF,IAAAC,cAAA,KAAGC,UAAU,6BAA6BG,MAAM,uBAChDL,IAAAC,cAAA,KAAGC,UAAU,iCAAiCG,MAAM,uBACpDL,IAAAC,cAAA,KAAGC,UAAU,qBAAoB,KACjCF,IAAAC,cAAA,KACEC,UAAU,4CACVG,MAAM,uBACNF,QAASA,IAAM1H,KAAKwT,kBAAkB,UAExCjM,IAAAC,cAAA,KACEC,UAAU,gDACVG,MAAM,eACNF,QAASA,IAAM1H,KAAKwT,kBAAkB,YAExCjM,IAAAC,cAAA,KACEC,UAAU,8CACVG,MAAM,wBACNF,QAASA,IAAM1H,KAAKwT,kBAAkB,YAI1CjM,IAAAC,cAAA,WACED,IAAAC,cAAA,QAAMC,UAAU,kBAAiB,cACjCF,IAAAC,cAAA,KACEC,UAAU,wCACVG,MAAM,aACNF,QAASA,IAAM1H,KAAKqU,aAAa,UAEnC9M,IAAAC,cAAA,KACEC,UAAU,yCACVG,MAAM,cACNF,QAASA,IAAM1H,KAAKqU,aAAa,WAEnC9M,IAAAC,cAAA,KACEC,UAAU,iDACVG,MAAM,2BACNF,QAASA,IAAM1H,KAAKqU,aAAa,iBAIrC9M,IAAAC,cAAA,WACED,IAAAC,cAAA,QAAMC,UAAU,kBAAiB,aACjCF,IAAAC,cAAA,KACEC,UAAU,8CACVG,MAAM,eACNF,QAAS1H,KAAK2U,oBAEhBpN,IAAAC,cAAA,KAAGC,UAAU,sCAAsCG,MAAM,YAAYF,QAAS1H,KAAK6U,iBACnFtN,IAAAC,cAAA,KACEC,UAAU,4CACVG,MAAM,qCACNF,QAAS1H,KAAKoV,mBAEhB7N,IAAAC,cAAA,KACEC,UAAU,yBACVG,MAAM,4CACNF,QAAS1H,KAAKsV,mBAEhB/N,IAAAC,cAAA,KACEC,UAAU,gDACVG,MAAM,gBACNF,QAAS1H,KAAK+U,qBAEhBxN,IAAAC,cAAA,KACEC,UAAU,4CACVG,MAAM,6BACNF,QAAS1H,KAAKiV,gBAIlB1N,IAAAC,cAAA,WACED,IAAAC,cAAA,QAAMC,UAAU,kBAAiB,cACjCF,IAAAC,cAAA,KACEC,UAAU,iDACVG,MAAM,iBACNF,QAASA,IAAM1H,KAAKwV,YAAY,MAElCjO,IAAAC,cAAA,KACEC,UAAU,kDACVG,MAAM,iBACNF,QAASA,IAAM1H,KAAKwV,aAAa,OAIrCjO,IAAAC,cAAA,WACED,IAAAC,cAAA,QAAMC,UAAU,kBAAiB,eACjCF,IAAAC,cAAA,SAAOH,KAAK,QAAQ4L,IAAI,IAAI6C,IAAI,MAAMjQ,MAAOwN,EAAQ5L,UAAU,gBAAgB9B,SAAU3F,KAAKoT,qBAS7FD,Q,iBC9Tf,MAAM4C,UAAiBxO,IAAM/B,cAC3B3H,YAAY4H,GACVC,MAAMD,GAAO,KAUfuQ,aAAe,KACb,MAAM,aAAEf,EAAY,SAAEgB,GAAajW,KAAKyF,MACxC,IAAKwQ,EAAU,OACfjW,KAAKkW,OAAOhL,MAAQlM,OAAOmX,WAC3BnW,KAAKkW,OAAOE,OAASpX,OAAO6T,YAC5B,MAAMwD,EAAgBrW,KAAKkW,OAAOI,WAAW,MACvCC,EAAeN,EAASO,kBAGxBC,EAAWC,SAASH,EAAe,KACnCI,EAAY,IAAIC,WAAWH,GAC3BI,EAAU9T,MAAM0T,GAAUK,KAAK,GAC/BC,EAAchU,MAAM0T,GAAUK,KAAK,GAEnCE,EAAQhX,KAAKkW,OAAOhL,MACpB+L,EAASjX,KAAKkW,OAAOE,OACrBc,EAAWR,SAASM,EAAQP,GAE5BU,EAAaC,cACnB,IAAIC,EAAWC,EAAUC,EAIzB,GAFArY,QAAQC,IAAI,0CAA2CoX,EAAcE,EAAUO,EAAOC,GAElFjY,OAAOmX,YAAc,IAAK,OAE9BjX,QAAQC,IAAI,6BAKZ,MAAMqY,EAAcA,KAClBvB,EAASwB,qBAAqBd,GAC9BN,EAAcqB,UAAU,EAAG,EAAGV,EAAOC,GAIrC,IAAK,IAAIpX,EAAI,EAAGA,EAAI4W,EAAU5W,IAS1BwX,GADmB,IAAjBpC,EACU,EAAIyB,SAAUC,EAAUF,EAAW5W,GA5BjC,IA4BqDoX,GAEvD,EAAIP,SAAUC,EAAU9W,GA9BtB,IA8B0CoX,GAG1DK,EAAWH,EACXI,GAAKL,EAAW,GAAKrX,EAGrBwW,EAAcsB,UAAYL,EAC1BjB,EAAcuB,SAASL,EAAGN,EAASI,EAAWH,EAAUG,GAGpDA,EAAYR,EAAQhX,KACtBgX,EAAQhX,GAAKwX,EACbN,EAAYlX,GAAK,GAEfgX,EAAQhX,GAAK,IACfwW,EAAcwB,YACdxB,EAAcyB,YAAcR,EAC5BjB,EAAc0B,UAAY,EAC1B1B,EAAc2B,OAAOT,EAAGN,EAASJ,EAAQhX,IACzCwW,EAAc4B,OAAOV,EAAIL,EAAUD,EAASJ,EAAQhX,IACpDwW,EAAc6B,SACdnB,EAAYlX,IAxDG,IAyDfgX,EAAQhX,GAAKgX,EAAQhX,GAAKkX,EAAYlX,IAMrCG,KAAKyF,MAAMP,QAAQiT,SAAQnY,KAAKoY,cAAgBhK,sBAAsBoJ,KAG7EA,KACA,KAOFa,YAAc,CAACC,EAAaC,IAInB,OAHG7B,SAAS,IAAM6B,GAGL,KAFV,IAAM,GAAKD,GAEd,QACP,KAEFE,aAAe,KACbnK,qBAAqBrO,KAAKoY,gBAxG1BpY,KAAKkW,OAAS3O,IAAMmI,YACpB1P,KAAKoY,cAAgB,KAGvBvI,oBACE7P,KAAKyF,MAAMgT,oBAAoBzY,MAC/BhB,OAAO0Z,SAAWC,IAAS3Y,KAAKgW,aAAc,KAqGhD/O,SACE,OAAOM,IAAAC,cAAA,UAAQC,UAAU,kBAAkBwI,IAAMC,GAAUlQ,KAAKkW,OAAShG,KAI9D6F,QC/FA6C,MAxBSnT,IACtB,MAAM,eAAEoT,EAAc,aAAEC,EAAY,aAAE7D,EAAY,SAAEgB,EAAQ,aAAE8C,EAAY,QAAE7T,EAAO,oBAAEuT,EAAmB,KAAE5P,GAASpD,EACnH,OACE8B,IAAAC,cAAA,OAAKC,UAAU,YAAYC,QAASmR,EAAgBjR,MAAOkR,EAAe,sBAAwB,sBAC/FA,GACCvR,IAAAC,cAACuO,EAAQ,CACPE,SAAUA,EACV8C,aAAcA,EACd7T,QAASA,EACTuT,oBAAqBA,EACrBxD,aAAcA,KAGhB6D,GACAvR,IAAAC,cAAAD,IAAAyR,SAAA,KACEzR,IAAAC,cAAA,OAAKC,UAAU,cAAcoB,EAAKjB,OAClCL,IAAAC,cAAA,OAAKC,UAAU,eAAeoB,EAAKP,QACnCf,IAAAC,cAAA,OAAKC,UAAU,cAAa,IAAEoB,EAAKsH,MAAQtH,EAAKsH,MAAQ,WAAW,Q,cCS7E,MAAM8I,UAAezT,gBAGnB3H,YAAY4H,GAAQ,IAAD4F,EACjB3F,MAAMD,GAAM4F,EAAArL,KAAC,KAwFf+Y,aAAe,KACb,GAAI/Y,KAAK0G,MAAMuP,SAAU,OACzB,MAAMiD,EAAe,IAAKla,OAAOma,cAAgBna,OAAOoa,oBAClDC,EAAeH,EAAaI,yBAAyBtZ,KAAKkF,SAC1D+Q,EAAWiD,EAAaK,iBAC9BF,EAAaG,QAAQvD,GACrBA,EAASuD,QAAQN,EAAaO,aAC9BxD,EAASyD,QAAU,IACnB1Z,KAAKmG,SAAS,CACZ8P,cAEF,KAEFzR,YAAc,SAAC/D,GAAgC,IAAxBkZ,EAAUvX,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,IAAAA,UAAA,GAC/BiJ,EAAKlF,SAAS,CAAEyT,SAAS,IACzB,MAAM3Q,EAAOxI,EAAOuJ,OAASvJ,EAAOuJ,OAAS,IAAMvJ,EAAOwJ,UAAYoB,EAAK3E,MAAMjG,OAAOwI,KACpFxI,EAAOuJ,SACTyF,YAAY,SAAUhP,EAAOuJ,QAC7ByF,YAAY,YAAahP,EAAOwJ,YAElC,MAAM4P,EAAY,IACbxO,EAAK3E,MAAMjG,UACXA,EACHwI,QAEFoC,EAAKlF,SAAS,CACZ1F,OAAQoZ,IAEVtV,EAAcC,YAAYqV,GACvBnb,KAAMC,IACL,MAAMgB,EAAO0L,EAAK5F,MAAMqB,MAAMrG,OAAOgJ,GACrC,IAAIZ,EAAO,GACPiR,EAAU,EACVna,IACFkJ,EAAOlK,EAAIob,KAAK,CAACnZ,EAAKoZ,IAChBpZ,EAAIjB,OAASA,IACfma,EAAUE,GACH,KAMb3O,EAAKlF,SAAS,CACZwC,SAAUhK,EACVib,SAAS,IAEXvO,EAAK4O,eAAe7N,YAAYzN,EAAKmb,GACjCH,GAAc9Q,EAAKlJ,MACrB0L,EAAKV,SAAS9B,GAEhBwC,EAAK6O,wBAAwBrR,KAE9BhK,MAAOtB,IACN2B,QAAQC,IAAI5B,GACZ6B,IAAM9B,MAAMC,GACZ8N,EAAKlF,SAAS,CACZyT,SAAS,OAGf,KAMFjP,SAAW,SAAC9B,GAA8B,IAAxBsR,EAAU/X,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,IAAAA,UAAA,GAC1BlD,QAAQC,IAAI,iBAAiB0J,EAAKjB,WAAWiB,EAAKP,aAC9C+C,EAAK5F,MAAMqB,MAAMrG,OAAOgJ,KAAOZ,EAAKlJ,OACtCX,OAAOC,SAASyL,KAAO,aAAe7B,EAAKlJ,MAGzCkJ,EAAKuR,UACPvR,EAAKwR,WAAalQ,YAAe,mCAAqCtB,EAAKuR,UAO7E/O,EAAKlF,SAAS,CAAE0C,QAAQ,KACtBwC,EAAK5G,SAASoE,KAEhB,MAAMqB,EAAYrB,GAAQA,EAAKqB,UAAYC,YAAetB,EAAKqB,WAAaoQ,IAC5EjP,EAAK4O,eAAerN,eAAe/D,GACnCwC,EAAK4O,eAAe3O,oBAAoBzC,EAAKjB,MAAOiB,EAAKP,OAAQ4B,GAE7DiQ,GACF9O,EAAK6O,wBAAwBrR,IAE/B,KAEFqR,wBAA0B,WAAgB,IAAfrR,EAAIzG,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAG,GAChC,MAAMmY,EAAYC,YAAQ,aAC1B,IAAKD,IAAc1R,EAAKY,GAAI,OAC5B,MAAMgR,EAAeF,EAAU1J,WACzB6J,EAAWF,YAAQ,MAAQ3R,EAAKY,IAEtC+H,EAA4BiJ,EAAcC,EAAU,MACpD,KAEFjW,SAAYoE,IAEV7I,KAAKoU,WAAWpP,UAAY2V,IAC5B3a,KAAK4a,MAAQ,GACT/R,EAAKgS,OAMHhS,EAAKgS,MAAMC,SAAS,SACtB9a,KAAK+a,OAAQ,EACb/a,KAAKgb,gBAAiB,GACbnS,EAAKgS,MAAMC,SAAS,UAC7B9a,KAAK+a,OAAQ,EACb/a,KAAKgb,gBAAiB,IAEtBhb,KAAK+a,OAAQ,EACb/a,KAAKgb,gBAAiB,GAExBzW,EAAcE,SAASoE,EAAKgS,OACzBnc,KAAMC,IACDA,IAAQsc,IAAiBjb,KAAKkb,aAC7Blb,KAAKmb,UAAUxc,KAErBE,MAAOtB,IACN2B,QAAQC,IAAI5B,GACZ6B,IAAM9B,MAAMC,MAGhByC,KAAKkb,cAEP,KAEFC,UAAaN,IACX7a,KAAK4a,MAAQC,EAAMO,OAAOC,MAAM,MAChCrb,KAAKsb,aACL,KAEFC,UAAY,IACmB,IAAtBvb,KAAK4a,MAAM9a,OAClB,KAEFob,WAAa,KACXlb,KAAK4a,MAAQ,GACb5a,KAAKsb,aACL,KAEFA,UAAY,KACVtb,KAAKwb,uBACLxb,KAAKoU,WAAWpP,UAAY,GAC5BhF,KAAKyb,WAAa,GAClBzb,KAAK0b,SAAW,GAChB1b,KAAK2b,SAAW,GAChB3b,KAAK4b,QAAU,EACf5b,KAAK6b,WAAa,EAClB7b,KAAK8b,YAAc,EACnB9b,KAAKia,eAAe/N,YAEhBlM,KAAKub,YACPvb,KAAKoU,WAAWpP,UAAY+W,KAE5B/b,KAAKgc,WAAY,EACjBhc,KAAKic,UAAY,GACjBjc,KAAKoU,WAAWpP,UAAY,GACxBhF,KAAK+a,MAAO/a,KAAKkc,eAChBlc,KAAKmc,gBAGZnc,KAAKsT,wBACL,KAEF6I,aAAeC,UACb,IAAIC,EAAMC,EAAWC,EAAOC,EAAWC,EAASC,EAIhD,UAAW,IAAIC,KAAQ3c,KAAK4a,MAE1B,GADAyB,EAAOM,EAAK7V,MAAM,qBACN,MAARuV,EAAc,CAMhB,GALAC,EAAYM,YAAWP,EAAK,IAC5BA,EAAOM,EAAKE,UAAUR,EAAK,GAAGvc,QAC9Byc,EAAQF,EAAKvV,MAAM,eACnB4V,EAAUI,YAAiB,MAAO,KAAM,QAE3B,MAATP,EAIF,SAGFC,EAAYF,EACZ,UAAW,IAAIjY,KAAQkY,EAAO,CAI5BE,EAAUD,EAAYO,WAAW1Y,EAAKyC,MAAM,OAAO,IAAM,IACzD2V,EAAUO,YAAaP,GAIvB,IAAIQ,EAAWH,YAAiB,OAAQ,QAAU9c,KAAK4b,QAAS,gBAAiB,CAC/E,aAAcY,EACd,WAAYC,IAEdQ,EAAShP,UAAY5J,EAAK6Y,QAAQ,QAAS,IACT,KAA9BD,EAAShP,UAAUmN,SACrB6B,EAASjY,UAAY,SACrBiY,EAAS3Y,aAAa,WAAY,MAEpCtE,KAAKyb,WAAWzb,KAAK4b,SAAWY,EAChCxc,KAAK0b,SAAS1b,KAAK4b,SAAWa,EAE9BD,EAAYC,EACZzc,KAAK4b,UACLc,EAAQS,YAAYF,GAEtBjd,KAAKoU,WAAW+I,YAAYT,QAE5B1c,KAAKod,cAAcT,GAIvB3c,KAAKqd,mBACL,KAEFnB,aAAeE,UACb,IACEkB,EACAC,EACAC,EACAC,EACAC,EACApB,EANEqB,EAAW,GAOXC,EAAU,IAAIC,IAGdC,EAAc,IAAID,IAKtB,UAAW,IAAIlB,KAAQ3c,KAAK4a,MAU1B,GARA+C,EAAWhB,EAAK7V,MAAM,qBAMtByW,EAAcZ,EAAK7V,MAAM,gBAET,MAAZ6W,EAAkB,CAEpBL,EAAcK,EAASI,OAAO,CAACC,EAAOC,IAASD,EAAQC,EAAKne,OAAQ,GACpE4d,EAAYf,EAAKE,UAAUS,GAE3B,UAAW,MAAMY,KAASP,EACxBrB,EAAYM,YAAWsB,GACvBle,KAAKyb,WAAWzb,KAAK4b,SAAWU,EAGhCsB,EAAQO,IAAI7B,EAAWoB,GAEvB1d,KAAK4b,eAEiB,MAAf2B,GAETC,EAAUD,EAAY,GAAGV,UAAU,EAAGU,EAAY,GAAGzd,OAAS,GAC9D2d,EAAed,EAAKE,UAAUU,EAAY,GAAGzd,QACxCge,EAAYM,IAAIZ,IACnBM,EAAYK,IAAIX,EAAS,IAAIK,KAE/BC,EAAYxe,IAAIke,GAASW,IAAI7B,EAAWmB,IAExCzd,KAAKod,cAAcT,GAIvB3c,KAAKyb,WAAWxS,MAAK,SAAUC,EAAGC,GAChC,OAAOD,EAAIC,KAKb,IAAK,IAAItJ,EAAI,EAAGA,EAAIG,KAAKyb,WAAW3b,OAAQD,IAAK,CAC/C,IAAI6c,EAAUI,YAAiB,MAAO,KAAM,QAExCG,EAAWH,YAAiB,OAAQ,QAAUjd,EAAG,gBAAiB,MAStE,GARAod,EAAShP,UAAY2P,EAAQte,IAAIU,KAAKyb,WAAW5b,IACtB,KAAvBod,EAAShP,YACXgP,EAASjY,UAAY,QACrBiY,EAAS3Y,aAAa,WAAY,MAEpCoY,EAAQS,YAAYF,GAGhBa,EAAYO,KAAO,EACrB,IAAK,IAAKhU,EAAKxE,KAAUiY,EACvB,GAAIjY,EAAMuY,IAAIpe,KAAKyb,WAAW5b,IAAK,CACjC,IAAIye,EAAWxB,YAAiB,MAAO,KAAM,aAAezS,EAAK,MACjEiU,EAASrQ,UAAYpI,EAAMvG,IAAIU,KAAKyb,WAAW5b,IAC/C6c,EAAQS,YAAYmB,GAK1Bte,KAAKoU,WAAW+I,YAAYT,GAE9B1c,KAAKqd,kBAEL,IAAK,IAAIxd,EAAI,EAAGA,EAAIG,KAAKyb,WAAW3b,OAAS,EAAGD,IAC9CG,KAAK0b,SAAS7b,GAAKG,KAAKyb,WAAW5b,EAAI,GAEzCG,KAAK0b,SAAS1b,KAAKyb,WAAW3b,OAAS,GAAKE,KAAKkF,QAAQsJ,UACzD,KAKF4O,cAAgB,WAAgB,IAAfT,EAAIva,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAG,GACtB,MAAMmc,EAAM5B,EAAK6B,YAAY,KACzB7B,EAAK5c,SAAS,YAEhBsL,EAAKwQ,WAAac,EAAK7V,MAAM,aAC7BuE,EAAKwQ,WAAanF,SAASrL,EAAKwQ,aACvBc,EAAK5c,SAAS,aAGvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAUwC,GAAK9B,EAAKE,UAAU,WAAW/c,OAAQye,GAAKnD,QAClDuB,EAAK5c,SAAS,SAEvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAUwC,GAAK9B,EAAKE,UAAU,OAAO/c,OAAQye,GAAKnD,QAC9CuB,EAAK5c,SAAS,kBAGvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAUyC,KAAO/B,EAAKE,UAAU,gBAAgB/c,OAAQye,GAAKnD,QACzDuB,EAAK5c,SAAS,WAEvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAUyC,KAAO/B,EAAKE,UAAU,SAAS/c,OAAQye,GAAKnD,QAClDuB,EAAK5c,SAAS,aAEvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAU0C,OAAShC,EAAKE,UAAU,WAAW/c,OAAQye,GAAKnD,QACtDuB,EAAK5c,SAAS,SAEvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAUrU,MAAQ+U,EAAKE,UAAU,OAAO/c,OAAQye,GAAKnD,QACjDuB,EAAK5c,SAAS,UAEvBsL,EAAK2Q,WAAY,EACjB3Q,EAAK4Q,UAAU3T,OAASqU,EAAKE,UAAU,OAAO/c,OAAQye,GAAKnD,SAE7D,KAEFiC,gBAAkB,KAChB,GAAIrd,KAAKgc,UAAW,CAClBhc,KAAKoU,WAAW+I,YAAYL,YAAiB,MAAO,KAAM,cAC1D,IAAIJ,EAAUI,YAAiB,MAAO,KAAM,aAC5CJ,EAAQzO,UAAY,cACpBjO,KAAKoU,WAAW+I,YAAYT,GAE5B,MAAMkC,EAAe9B,YAAiB,MAAO,KAAM,cAqBnD,GApBA9c,KAAKoU,WAAW+I,YAAYyB,GAGxB5e,KAAKic,UAAUrU,QACjB8U,EAAUI,YAAiB,MAAO,KAAM,YAAa,CAAElT,MAAO,qBAC9D8S,EAAQzO,UAAYjO,KAAKic,UAAUrU,MAAQ,MAAQ5H,KAAKic,UAAU3T,OAClEsW,EAAazB,YAAYT,IAIvB1c,KAAKic,UAAUwC,KACjB/B,EAAUI,YAAiB,MAAO,KAAM,aACxCJ,EAAQzO,UAAY,kBAAoBjO,KAAKic,UAAUwC,GACvDG,EAAazB,YAAYT,IAEvB1c,KAAKic,UAAU0C,SACjBjC,EAAUI,YAAiB,MAAO,KAAM,aACxCJ,EAAQzO,UAAY,WAAajO,KAAKic,UAAU0C,OAChDC,EAAazB,YAAYT,IAEvB1c,KAAKic,UAAUyC,KAAM,CACvB,MAAMG,EAAI,IAAInc,KAAK1C,KAAKic,UAAUyC,MAC5BI,EAAOC,YAAYF,GAAKG,YAAaH,GAAKA,EAChDnC,EAAUI,YAAiB,MAAO,KAAM,aACxCJ,EAAQzO,UAAY,SAAW6Q,EAC/BF,EAAazB,YAAYT,MAG7B,KAEFlB,qBAAuB,KACjBxb,KAAKkF,UAAYlF,KAAKkF,QAAQiT,SAChCnY,KAAKif,kBAAoBC,YAAY,KACnClf,KAAKmf,eACJ,MAEL,KAEFC,uBAAyB,KACnBpf,KAAKif,mBAAmBI,cAAcrf,KAAKif,mBAC/Cjf,KAAKif,kBAAoB,MACzB,KAEFjQ,SAAW,KACThP,KAAKsf,yBACAtf,KAAKif,mBACRjf,KAAKmf,cAEP1b,WAAW,KACJzD,KAAKub,aACRvb,KAAKuf,oBAEN,GACHvf,KAAKwf,eACL,KAEFlQ,QAAU,KACRtP,KAAKsf,yBACLtf,KAAKof,yBACLpf,KAAKmG,SAAS,CAAEyE,WAAW,EAAO6U,UAAU,IACxCzf,KAAK0f,kBAAkB1f,KAAK0f,iBAAiBlH,gBACjD,KAEFpJ,OAAS,KAGP,GAFKpP,KAAKif,mBAAmBjf,KAAKwb,uBAClCxb,KAAKmG,SAAS,CAAEyE,WAAW,EAAM6U,UAAU,IACV,IAA7Bzf,KAAKkF,QAAQzC,YAAmB,CAClC,MAAM9C,EAAOK,KAAKyF,MAAMqB,MAAMrG,OAAOgJ,GACjC9J,GACF8D,WAAW,KACMzD,KAAKyF,MAAMqB,MAAMrG,OAAOgJ,KACtB9J,GACf4E,EAAcI,aAAahF,GACxBjB,KAAMC,IACLO,QAAQC,IAAIR,KAEbE,MAAOtB,IACN2B,QAAQC,IAAI5B,GACZ6B,IAAM9B,MAAMC,MAGjB,KAELkG,WAAW,KAET,GAAI+W,YAAQ,YAAcxa,KAAKub,YAC7B,IAAK,IAAI1b,EAAI,EAAGA,EAAIG,KAAK4b,QAAS/b,IAChC2a,YAAQ,QAAU3a,GAAGqE,UAAUwQ,IAAI,kBAGtC,GAED1U,KAAK0G,MAAMoS,cAAgB9Y,KAAK0f,kBAAkB1f,KAAK2f,YAC3D,KAEFC,qBAAwBza,IAEtB,GADeqV,YAAQ,SAAWxa,KAAK8b,WAAa,IACtC,CACZ,IAAI+D,EAAW7f,KAAK0b,SAAS1b,KAAK8b,YAAc9b,KAAKyb,WAAWzb,KAAK8b,YACjEgE,EAAW9f,KAAK0b,SAAS1b,KAAK8b,YAAc9b,KAAK6b,WAAa,IAAO7b,KAAKkF,QAAQzC,aACjFod,GAAY,GAAKC,GAAY,GAAOD,GAAY,GAAKC,GAAY,IACpEvb,EAAcM,cAAc7E,KAAKgE,iBAAkBmB,EAAUuI,KAAKqS,KAAKD,MAG3E,KAEFX,YAAc/C,UACZ,GAAIpc,KAAKub,YAEP,YADAvb,KAAKof,yBAIP,IAAIY,EAAUC,EAGd,GAAIjgB,KAAK8b,YAAc,EAAG,CACxB,MAAM1W,EAAKpF,KAAKyb,WAAWzb,KAAK8b,YAAc9b,KAAK6b,WAAa,IAC1DxW,EAAKrF,KAAK0b,SAAS1b,KAAK8b,YAAc9b,KAAK6b,WAAa,IACxD1W,EAAWqV,YAAQ,QAAUxa,KAAK8b,YAExC,GAAI1W,GAAMpF,KAAKkF,QAAQzC,aAAe4C,GAAMrF,KAAKkF,QAAQzC,YASvD,OAPIzC,KAAKoU,WAAWlQ,UAAUC,SAAS,iBACrCI,EAAcU,iBAAiBjF,KAAKgE,iBAAkBhE,KAAKkF,QAASC,EAAUC,EAAIC,QAE1C,MAAtCF,EAAS+a,aAAa,aACxBlgB,KAAK4f,qBAAqBza,IAQ9B6a,EAAWxF,YAAQ,QAAUxa,KAAK8b,YAC9BkE,GAAkD,MAAtCA,EAASE,aAAa,aAEpC3b,EAAcM,cAAc7E,KAAKgE,iBAAkBgc,EAAU,GAI/Dzb,EAAcH,gBAAgBpE,KAAKgE,iBAAkBgc,GAErDC,EAAaD,EAASnP,WACtBmP,EAAS9b,UAAUuQ,OAAO,cAAe,aAM3CzU,KAAKmgB,aAAaH,EAAUC,IAC5B,KAEFE,aAAe/D,MAAO4D,EAAUC,KAE9B,GADAjgB,KAAK8b,WAAa9b,KAAKogB,qBAAqBpgB,KAAKkF,QAAQzC,aACrDzC,KAAK8b,YAAc,EAAG,CACxB,MAAM3W,EAAWqV,YAAQ,QAAUxa,KAAK8b,YAClCuE,EAAalb,EAAS0L,WAK5B,GAHA1L,EAASjB,UAAUwQ,IAAI,cAAe,aACtCvP,EAASjB,UAAUuQ,OAAO,iBAEtBwL,IAAeI,EAAY,CAC7B,GAAIJ,EAAY,CACdA,EAAW/b,UAAUuQ,OAAO,eAC5B,UAAW,IAAI6L,KAASL,EAAWnY,SAAU,CAC3C,GAAIwY,IAAUN,EAAU,MACxBM,EAAMpc,UAAUuQ,OAAO,gBAI3B4L,EAAWnc,UAAUwQ,IAAI,eAE3B1U,KAAKugB,aAAapb,EAAUkb,QAE5BrgB,KAAKwgB,wBAEP,KAOFD,aAAe,CAACpb,EAAUkb,KACxB,IAAII,EACJ,IAAK,IAAI5gB,EAAI,EAAGA,EAAIwgB,EAAWvY,SAAShI,OAAQD,IAAK,CACnD,GAAIwgB,EAAWvY,SAASjI,KAAOsF,EAAU,CACvCsb,EAAY5gB,EACZ,MAEFwgB,EAAWvY,SAASjI,GAAGqE,UAAUwQ,IAAI,eAEvC,IAAK,IAAI7U,EAAI4gB,EAAY,EAAG5gB,EAAIwgB,EAAWvY,SAAShI,QAC7CugB,EAAWvY,SAASjI,GAAGqE,UAAUC,SAAS,eADWtE,IAE1DwgB,EAAWvY,SAASjI,GAAGqE,UAAUuQ,OAAO,eAItCtP,IAAakb,EAAWK,WAAW,IACrCjd,WAAW,KACTzD,KAAKwf,eACJ,MAEL,KAKFgB,qBAAuBpE,UACrB,MAAMuE,EAAYnG,YAAQ,SAAWxa,KAAK4b,QAAU,IAAI/K,WACxD,GAAI8P,EAAUzc,UAAUC,SAAS,eAAgB,CAC/Cwc,EAAUzc,UAAUuQ,OAAO,eAC3B,UAAW,IAAI6L,KAASK,EAAU7Y,SAChCwY,EAAMpc,UAAUuQ,OAAO,iBAG3B,KAGF+K,YAAc,WAAsB,IAArBra,EAAQ/C,UAAAtC,OAAA,QAAA9C,IAAAoF,UAAA,GAAAA,UAAA,GAAG,KACR,MAAZ+C,IACFA,EAAWqV,YAAQ,QAAUnP,EAAKyQ,aAEpB,MAAZ3W,IACFkG,EAAK+I,WAAWlD,UACd,GACA/L,EAAS0L,WAAW+P,UACpBpG,YAAQ,UAAUoG,UAClBvV,EAAK+I,WAAWhC,aAAe,EAC/BjN,EAAS0L,WAAWgQ,aAAe,IAEvC,KAEFT,qBAAwBU,IACtB,IAEIC,EAAK3b,EAAIC,EAFT2b,EAAK,EACPC,EAAKjhB,KAAK4b,QAAU,EAGtB,KAAOoF,GAAMC,GAAI,CAKf,GAJAF,EAAMrK,UAAUsK,EAAKC,GAAM,GAC3B7b,EAAKpF,KAAKyb,WAAWsF,GAAO/gB,KAAK6b,WAAa,IAC9CxW,EAAKrF,KAAK0b,SAASqF,GAAO/gB,KAAK6b,WAAa,IAExCzW,GAAM0b,GAAOzb,GAAMyb,EAKrB,OAFA1b,EAAKpF,KAAKyb,WAAWsF,EAAM,GAAK/gB,KAAK6b,WAAa,IAClDxW,EAAKrF,KAAK0b,SAASqF,EAAM,GAAK/gB,KAAK6b,WAAa,IAC5CzW,GAAM0b,GAAOzb,GAAMyb,EAAYC,EAAM,EAC7BA,EACH3b,EAAK0b,EAAKG,EAAKF,EAAM,EAC3BC,EAAKD,EAAM,EAiBlB,OAdY,IAARA,GAAaA,IAAQ/gB,KAAK4b,QAAU,EAAGmF,GAAO,EAK5CA,GAAOA,IAAQ/gB,KAAKkhB,cACtB9hB,IAAM/B,KAAK,uCAAuCmd,YAAQ,QAAUuG,GAAK9S,cACzEjO,KAAKkhB,YAAcH,GAKnBD,EAAM9gB,KAAK0b,SAAS1b,KAAK4b,QAAU,IAAI5b,KAAKof,yBAEzC2B,GACP,KAEFzB,uBAAyB,KACvBD,cAAcrf,KAAKmhB,mBACnBnhB,KAAKmhB,kBAAoB,MACzB,KAEF5B,iBAAmB,KAGjB,GADAvf,KAAK8b,WAAa9b,KAAKogB,qBAAqBpgB,KAAKkF,QAAQzC,aACrDzC,KAAK8b,YAAc,EAAG,CACxB,IAAK,IAAIjc,EAAI,EAAGA,EAAIG,KAAK8b,WAAYjc,IAAK,CACxC,IAAIuhB,EAAa5G,YAAQ,QAAU3a,GACnCuhB,EAAWld,UAAUuQ,OAAO,iBACgB,MAAxC2M,EAAWlB,aAAa,cAC1BkB,EAAWpc,UAAY,UAEzBT,EAAcH,gBAAgBpE,KAAKgE,iBAAkBod,GACrDphB,KAAKqhB,iBAAiBD,GAExB,IAAK,IAAIvhB,EAAIG,KAAK8b,WAAYjc,EAAIG,KAAK4b,QAAS/b,IAAK,CACnD,IAAIyhB,EAAc9G,YAAQ,QAAU3a,GACpCyhB,EAAYpd,UAAUwQ,IAAI,iBACmB,MAAzC4M,EAAYpB,aAAa,cAC3BoB,EAAYtc,UAAY,UAE1BT,EAAce,iBAAiBgc,GAC/BthB,KAAKqhB,iBAAiBC,GAGxB9G,YAAQ,QAAUxa,KAAK8b,YAAYjL,WAAW3M,UAAUwQ,IAAI,iBAE9D,KAEF2M,iBAAoBf,IACdA,EAAMzP,WAAW3M,UAAUC,SAAS,gBACtCmc,EAAMzP,WAAW3M,UAAUuQ,OAAO,gBAEpC,KAEF8M,cAAiBC,IACfxhB,KAAKmG,SAAS,CACZwP,YAAa6L,KAEf,KAEFC,iBAAmB,KACjB,MAAM5L,GAAgB7V,KAAK0G,MAAMmP,aAC7BA,EACF7V,KAAK0hB,gBAEL1hB,KAAK2hB,kBAEP3hB,KAAKmG,SAAS,CAAE0P,iBAChBpG,YAAY,aAAcoG,GAC1BpS,WAAW,KACTzD,KAAKwf,eACJ,MACH,KAEF3G,eAAiB,KACf,MAAMC,GAAgB9Y,KAAK0G,MAAMoS,aACjC9Y,KAAKmG,SAAS,CAAE2S,gBAAgB,KACzB9Y,KAAK0f,mBACN5G,EAAc9Y,KAAK2f,WAClB3f,KAAK0f,iBAAiBlH,kBAE7B/I,YAAY,eAAgBqJ,IAC5B,KAEF6G,SAAWvD,gBAEHpc,KAAK+Y,eACX/Y,KAAK0f,iBAAiB1J,gBACtB,KAEF0L,cAAgB,KACd,IAAIE,EAAeC,YAAW,gBAC9BnP,SAASC,KAAKzO,UAAUwQ,IAAI,mBAC5BkN,EAAa1d,UAAUwQ,IAAI,WAC3BkN,EAAa1d,UAAUuQ,OAAO,gBAC9B,KAEFkN,gBAAkB,KAChB,IAAIC,EAAeC,YAAW,gBAC9BnP,SAASC,KAAKzO,UAAUuQ,OAAO,mBAC/BmN,EAAa1d,UAAUuQ,OAAO,WAC9BmN,EAAa1d,UAAUwQ,IAAI,eAC3BjR,WAAW,KACT4O,EAAWrS,KAAKgE,iBAAkB,MACjC,MACH,KAEFuC,SAAY3F,IACVkhB,YAAY,YAAa,EAAGlhB,EAAIiF,MAAQjF,EAAIiF,MAAQ,KApzBpD,IAAIoP,EAAetI,YAAW,qBACT3P,IAAjBiY,GAA+C,OAAjBA,IAChCA,GAAe,GAEjBjV,KAAK0G,MAAQ,CACXiC,SAAU,GACVlI,OAAQ,CACNshB,KAAM,GAER9L,SAAU,KACV2D,SAAS,EACT/Q,KAAM,GACN8M,aAAa,EACbE,eAAgBlJ,YAAW,cAC3BmM,aAAcnM,YAAW,kBAAmB,EAC5CsI,aAAcA,EACdrK,WAAW,EACX6U,UAAU,GAGZzf,KAAK4a,MAAQ,GACb5a,KAAK+a,OAAQ,EACb/a,KAAKgb,gBAAiB,EACtBhb,KAAKyb,WAAa,GAClBzb,KAAK0b,SAAW,GAChB1b,KAAK4b,QAAU,EACf5b,KAAK6b,WAAa,EAClB7b,KAAK8b,YAAc,EACnB9b,KAAKgc,WAAY,EACjBhc,KAAKic,UAAY,GACjBjc,KAAKkF,QAAU,KACflF,KAAKif,kBAAoB,KACzBjf,KAAKmhB,kBAAoB,KACzBnhB,KAAKkhB,YAAc,KACnBlhB,KAAKia,eAAiB,KACtBja,KAAK0f,iBAAmB,KACxB1f,KAAKsT,qBAAuB,KAC5BtT,KAAKoU,WAAa7M,IAAMmI,YACxB1P,KAAKgE,iBAAmBuD,IAAMmI,YAC9B1P,KAAKuU,eAAiBhN,IAAMmI,YAC5B1P,KAAKgiB,iBAAmBza,IAAMmI,YAGhCG,oBACE,MAAM7F,EAAS2C,YAAW,UACpB1C,EAAY0C,YAAW,aAC7B3M,KAAKwE,YACH,CACEwF,SACAC,cAEF,GAOFjK,KAAKkF,QAAUlF,KAAKsgB,MAAMpb,QAEtBlF,KAAK0G,MAAMmP,cACb7V,KAAK0hB,gBAGP1iB,OAAOijB,iBAAiB,UAAYrc,IAClC,GAAK5F,KAAKkF,QAEV,OAAQU,EAAEyE,KACR,IAAK,YACHrK,KAAKkF,QAAQzC,aAAe,EAC5BzC,KAAKgP,WACL,MACF,IAAK,aACHhP,KAAKkF,QAAQzC,aAAe,EAC5BzC,KAAKgP,cAQbkT,uBACEliB,KAAKof,yBACLpf,KAAKsf,yBAmuBPrY,SACE,MAAM,SAAE0B,EAAQ,KAAEE,EAAI,YAAE8M,EAAW,aAAEE,EAAY,UAAEjL,EAAS,SAAE6U,EAAQ,aAAE3G,EAAY,aAAE7D,EAAY,SAAEgB,GAAajW,KAAK0G,OAChH,MAAE+M,GAAUzT,KAAKmiB,QACvB,IAAI7R,EAEFA,EADEzH,EAAKuR,QACGvR,EAAKwR,YAED,OAAJxR,QAAI,IAAJA,OAAI,EAAJA,EAAMuZ,WAAYjY,YAAe,uBAAyBtB,EAAKuZ,WAAa,KAExF,MAAMlY,GAAgB,OAAJrB,QAAI,IAAJA,OAAI,EAAJA,EAAMqB,WAAYC,YAAetB,EAAKqB,WAAaoQ,IAC/D+H,EAAgB,QAAW,OAAJxZ,QAAI,IAAJA,OAAI,EAAJA,EAAMqB,WAAY,IAAMC,YAAetB,EAAKqB,WAAa,IAAMoY,OAE5F,OACE/a,IAAAC,cAAA,OACEC,UAAW,gBAAgBgM,IAAU8O,IAAc,aAAe,eAChE1M,EAAe,UAAY,iBAG7BtO,IAAAC,cAAA,OAAKiC,GAAG,oBACNlC,IAAAC,cAAA,OAAKC,UAAU,aAAY,0CCz2BZ,cDy2B0F,KACxGkB,GAAgC,IAApBA,EAAS7I,QACpByH,IAAAC,cAACQ,EAAW,CACVW,SAAUA,EACV2B,SAAUzB,EACVrE,YAAaxE,KAAKwE,YAClBmG,SAAU3K,KAAK2K,SACfpE,SAAUvG,KAAKuG,SACfqE,UAAWA,KAKjBrD,IAAAC,cAAC4D,EAAM,CACLvC,KAAMA,EACNyH,QAASA,EACTtB,SAAUhP,KAAKgP,SACfM,QAAStP,KAAKsP,QACdF,OAAQpP,KAAKoP,OACba,IAAMC,IACJlQ,KAAKsgB,MAAQpQ,GAEfJ,kBAAoBmK,IAClBja,KAAKia,eAAiBA,GAExBtP,SAAU3K,KAAK2K,WAGjBpD,IAAAC,cAAA,OAAKiC,GAAG,mBAAmBwG,IAAMC,GAAUlQ,KAAKgE,iBAAmBkM,EAAOzI,UAAU,uBAClFF,IAAAC,cAAA,OAAKC,UAAU,sBACbF,IAAAC,cAAA,OACEiC,GAAG,iBACHwG,IAAMC,GAAUlQ,KAAKuU,eAAiBrE,EACtCzI,UAAU,WACVmC,MAAO,CAAE0Y,gBAAiBD,EAAexY,UAAW,aAGxDtC,IAAAC,cAAA,OAAKC,UAAU,iBACbF,IAAAC,cAAA,OAAKiC,GAAG,mBAAmBhC,UAAU,eAAewI,IAAMC,GAAUlQ,KAAKgiB,iBAAmB9R,GAC1F3I,IAAAC,cAAA,OACEiC,GAAG,eACHgH,YAAY,YACZ7G,MAAO,CAAEE,OAAQ,WACjBrC,UAAW,sBAAqBgY,EAAW,GAAK,eAChDlV,IAAKL,EACLM,IAAI,YACJ9C,QAASA,KACP1H,KAAKmG,SAAS,CAAEsZ,UAAWA,OAG/BlY,IAAAC,cAAA,UAAQiC,GAAG,kBAAkBG,MAAO,CAAE4K,QAAS,UAC/CjN,IAAAC,cAACoR,EAAc,CACbC,eAAgB7Y,KAAK6Y,eACrBC,aAAcA,EACd7D,aAAcA,EACdgB,SAAUA,EACV8C,aAAc/Y,KAAK+Y,aACnB7T,QAASlF,KAAKkF,QACduT,oBAAsBiH,IACpB1f,KAAK0f,iBAAmBA,GAE1B7W,KAAMA,KAGVtB,IAAAC,cAAA,OACEiC,GAAG,aACHhC,UAAU,wDACVmC,MAAO,CAAEC,UAAW,UACpBoG,IAAMC,GAAUlQ,KAAKoU,WAAalE,EAClCxI,QAASA,IAAM1H,KAAKuhB,eAAc,MAItCha,IAAAC,cAAC2L,EAAO,CACNiB,WAAYpU,KAAKoU,WACjBpQ,iBAAkBhE,KAAKgE,iBACvBuQ,eAAgBvU,KAAKuU,eACrByN,iBAAkBhiB,KAAKgiB,iBACvB9c,QAASlF,KAAKkF,QACdyQ,YAAaA,EACbE,aAAcA,EACd2J,YAAaxf,KAAKwf,YAClBlM,qBAAuBkP,GAAUxiB,KAAKsT,qBAAuBkP,EAC7D5M,YAAaA,IAAM5V,KAAKuhB,eAAc,GACtCpM,mBAAqBD,GAASlV,KAAKmG,SAAS,CAAE8O,aAAcC,MAG9D3N,IAAAC,cAAA,OAAKC,WAAcoO,EAAe,YAAc,IAAhC,mBACdtO,IAAAC,cAAA,KAAGC,UAAU,4CAA4CC,QAAS1H,KAAKyhB,oBAEzEla,IAAAC,cAAA,OAAKoC,MAAO,CAAE6Y,MAAO,aAz6BzBxJ,EACGyJ,YAAcC,IA+6BRC,sBAAW3J","file":"static/js/4.ebdf96d4.chunk.js","sourcesContent":["import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nconst options = {\n  position: toast.POSITION.TOP_RIGHT, //\"top-right\"\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined\n};\n\nconst info = (text) => {\n  toast.info(text, options);\n};\n\nconst success = (text) => {\n  toast.success(text, options);\n};\n\nconst warn = (text) => {\n  toast.warn(text, options);\n};\n\nconst error = (err) => {\n  let msg;\n  if (err.data && err.data.message) msg = err.data.message;\n  else if (err) msg = err.toString();\n  else msg = 'Error: unexpected error occurred!';\n  toast.error(msg, options);\n};\n\nconst customToast = {\n  info,\n  success,\n  warn,\n  error\n};\n\nexport default customToast;\n","import { ACCESS_TOKEN } from '../../constants/Constants';\nimport axiosClient from '../../service/axiosClient';\nimport Toast from '../Toast/Toast';\nimport { ROLE_TABLE } from '../../constants/Constants';\n\nclass Auth {\n  constructor() {\n    this.userInfo = null;\n  }\n\n  isAuthenticated = () => {\n    const access_token = localStorage.getItem(ACCESS_TOKEN);\n    return !!access_token;\n  };\n\n  login = ({ username, password }, successCallback, failCallback) => {\n    const data = {\n      username,\n      password\n    };\n    axiosClient\n      .post('/signin', data)\n      .then((res) => {\n        localStorage.setItem(ACCESS_TOKEN, res[ACCESS_TOKEN]);\n        successCallback();\n      })\n      .catch((err) => {\n        failCallback(err.data ? err.data : err);\n      });\n  };\n\n  logout = () => {\n    axiosClient\n      .post('/signout')\n      .then((res) => {\n        localStorage.removeItem(ACCESS_TOKEN);\n        window.location = '/';\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n      });\n  };\n\n  getMe = () => {\n    return axiosClient.get('/api/user/me');\n  };\n\n  redirectToLoginPage = () => {\n    Toast.info('You need to login first!');\n    localStorage.removeItem(ACCESS_TOKEN);\n    window.location.hash = '/login';\n  };\n\n  /**\n   * Check xem mảng roles có tồn tại role nào có quyền truy cập path hay ko\n   * @param {string[]} roles - Array of role\n   * @param {string} path - URL\n   */\n  rolesHasPermission = (roles, path) => {\n    if (!ROLE_TABLE[path]) return true;\n    for (let i = 0; i < roles.length; i++) {\n      if (ROLE_TABLE[path].includes(roles[i])) return true;\n    }\n    // Dùng forEach: bất đồng bộ nên ko được nhé!\n    // Nó sẽ return false trước khi chạy vào trong forEach\n    // roles.forEach(role => {\n    //   if (ROLE_TABLE[path].includes(role)) return true;\n    // });\n    return false;\n  };\n}\n\nexport let auth = new Auth();\n","import axios from 'axios';\nimport queryString from 'query-string';\nimport { ACCESS_TOKEN } from '../constants/Constants';\nimport { auth } from '../components/Auth/Auth';\n\nconst cleanParam = (obj) => {\n  Object.keys(obj).forEach((k) => {\n    if (obj[k] === null || obj[k] === undefined) {\n      delete obj[k];\n    }\n  });\n  return obj;\n};\n\naxios.interceptors.request.use(\n  function (config) {\n    const newConfig = {\n      ...config,\n      paramsSerializer: (params) =>\n        queryString.stringify(cleanParam(params), { arrayFormat: 'repeat' }),\n      baseURL: process.env.REACT_APP_HOST_API,\n      // withCredentials: true,\n      headers: {\n        ...config.headers,\n        Pragma: 'no-cache'\n      }\n    };\n\n    // Add auth token\n    if (localStorage.getItem(ACCESS_TOKEN)) {\n      newConfig.headers.Authorization = `Bearer ${localStorage.getItem(ACCESS_TOKEN)}`;\n    }\n\n    return newConfig;\n  },\n  (error) => {\n    console.log(error);\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    if (response && response.data) return response.data;\n    return response;\n  },\n  (error) => {\n    if (error.response && error.response.status) {\n      if (error.response.status === 401) {\n        auth.redirectToLoginPage();\n      }\n      //... handle other statuses\n      return Promise.reject(error.response);\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default axios;\n","module.exports = __webpack_public_path__ + \"static/media/background.ab8abda0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/spin.b192bd62.jpg\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4RDmRXhpZgAATU0AKgAAAAgABAE7AAIAAAAJAAAISodpAAQAAAABAAAIVJydAAEAAAASAAAQzOocAAcAAAgMAAAAPgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFuaHR1IFRhAAAABZADAAIAAAAUAAAQopAEAAIAAAAUAAAQtpKRAAIAAAADMDEAAJKSAAIAAAADMDEAAOocAAcAAAgMAAAIlgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIwMjA6MDE6MDMgMjI6NTg6NTIAMjAyMDowMTowMyAyMjo1ODo1MgAAAEEAbgBoAHQAdQAgAFQAYQAAAP/hCxtodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+DQo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIj48cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPjxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSJ1dWlkOmZhZjViZGQ1LWJhM2QtMTFkYS1hZDMxLWQzM2Q3NTE4MmYxYiIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIi8+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPjx4bXA6Q3JlYXRlRGF0ZT4yMDIwLTAxLTAzVDIyOjU4OjUyLjAxMjwveG1wOkNyZWF0ZURhdGU+PC9yZGY6RGVzY3JpcHRpb24+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxkYzpjcmVhdG9yPjxyZGY6U2VxIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHJkZjpsaT5Bbmh0dSBUYTwvcmRmOmxpPjwvcmRmOlNlcT4NCgkJCTwvZGM6Y3JlYXRvcj48L3JkZjpEZXNjcmlwdGlvbj48L3JkZjpSREY+PC94OnhtcG1ldGE+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9J3cnPz7/2wBDAAcF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\"","module.exports = __webpack_public_path__ + \"static/media/favicon.b192bd62.png\";","/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce (fn, wait = 0, options = {}) {\n  let lastCallAt\n  let deferred\n  let timer\n  let pendingArgs = []\n  return function debounced (...args) {\n    const currentWait = getWait(wait)\n    const currentTime = new Date().getTime()\n\n    const isCold = !lastCallAt || (currentTime - lastCallAt) > currentWait\n\n    lastCallAt = currentTime\n\n    if (isCold && options.leading) {\n      return options.accumulate\n        ? Promise.resolve(fn.call(this, [args])).then(result => result[0])\n        : Promise.resolve(fn.call(this, ...args))\n    }\n\n    if (deferred) {\n      clearTimeout(timer)\n    } else {\n      deferred = defer()\n    }\n\n    pendingArgs.push(args)\n    timer = setTimeout(flush.bind(this), currentWait)\n\n    if (options.accumulate) {\n      const argsIndex = pendingArgs.length - 1\n      return deferred.promise.then(results => results[argsIndex])\n    }\n\n    return deferred.promise\n  }\n\n  function flush () {\n    const thisDeferred = deferred\n    clearTimeout(timer)\n\n    Promise.resolve(\n      options.accumulate\n        ? fn.call(this, pendingArgs)\n        : fn.apply(this, pendingArgs[pendingArgs.length - 1])\n    )\n      .then(thisDeferred.resolve, thisDeferred.reject)\n\n    pendingArgs = []\n    deferred = null\n  }\n}\n\nfunction getWait (wait) {\n  return (typeof wait === 'function') ? wait() : wait\n}\n\nfunction defer () {\n  const deferred = {}\n  deferred.promise = new Promise((resolve, reject) => {\n    deferred.resolve = resolve\n    deferred.reject = reject\n  })\n  return deferred\n}\n","import axiosClient from '../../service/axiosClient';\n\nconst getAllSongs = (params) => {\n  return axiosClient.get('/api/song/all', { params });\n};\n\nconst getLyric = (file) => {\n  return axiosClient.get('/api/lyric?file=' + file);\n};\n\nconst updateListen = (path) => {\n  return axiosClient.put('/api/song/listens?path=' + path);\n};\n\nconst getKaraokeWordStyle = (lyric_playground, process) => {\n  let isLightTheme = lyric_playground.classList.contains('lyric-pg-light');\n  return (\n    'background-image:' +\n    //\"-webkit-linear-gradient(top, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%), \" +\n    '-webkit-linear-gradient(left, ' +\n    (isLightTheme ? '#2199F9' : '#FC0') +\n    ' ' +\n    process +\n    '%, ' +\n    (isLightTheme ? '#333' : '#FFF') +\n    ' 0%)'\n  );\n};\n\nconst fillKaraokeWord = (lyric_playground, word) => {\n  word.setAttribute('style', getKaraokeWordStyle(lyric_playground, 100));\n};\n\nconst setBulletText = (lyric_playground, emptyWord, bullet) => {\n  let bulletArr = ['&nbsp;', '•', '••', '•••', '••••', '•••••'];\n  emptyWord.innerHTML = bulletArr[bullet];\n  fillKaraokeWord(lyric_playground, emptyWord);\n};\n\nconst runKaraokeEffect = (lyric_playground, myAudio, currWord, st, en) => {\n  let process = ((myAudio.currentTime - st) * 100) / (en - st);\n  currWord.setAttribute('style', getKaraokeWordStyle(lyric_playground, process));\n};\n\nconst emptyKaraokeWord = (word) => {\n  word.setAttribute('style', '');\n};\n\nconst BaiHatService = {\n  getAllSongs,\n  getLyric,\n  updateListen,\n  getKaraokeWordStyle,\n  fillKaraokeWord,\n  setBulletText,\n  runKaraokeEffect,\n  emptyKaraokeWord\n};\n\nexport default BaiHatService;\n","import React, { PureComponent } from 'react';\nimport './Input.scss';\n\nconst DEFAULT_INPUT_MAX_LENGTH = 200;\nconst TYPING_INTERVAL = 300;\n\nclass SearchBox extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      errorMsg: '',\n      invalid: false,\n      focus: false\n    };\n    this.typingTimer = null;\n  }\n\n  onChange = (e) => {\n    const { value } = e.target;\n    const maxLength = this.props.maxLength ? this.props.maxLength : DEFAULT_INPUT_MAX_LENGTH;\n    let errorMsg = '';\n\n    if (value.length > maxLength) {\n      errorMsg = 'Max length of search text is: ' + maxLength;\n    } else if (!this.regexValidation(value)) {\n      errorMsg = this.props.regexErrorMsg ? this.props.regexErrorMsg : 'Search text is invalid';\n    }\n\n    this.setState({\n      value,\n      errorMsg\n    });\n  };\n\n  onKeyUp = (e, searchText) => {\n    if (e.keyCode === 13) {\n      // Enter\n      this.onSearch(searchText);\n    } else {\n      this.typingTimer = setTimeout(() => {\n        this.onSearch(searchText);\n      }, TYPING_INTERVAL);\n    }\n  };\n\n  onKeyDown = () => {\n    clearTimeout(this.typingTimer);\n  };\n\n  onSearch = () => {\n    let { value } = this.state;\n    this.props.onSearch({ name: this.props.name, value });\n  };\n\n  onClear = () => {\n    this.setState({\n      value: ''\n    });\n    this.props.onSearch({ name: this.props.name, value: null });\n  };\n\n  regexValidation = (value) => {\n    const regex = this.props.regex ? this.props.regex : '';\n    if (value === '' || regex === '') return true;\n    return value.match(regex);\n  };\n\n  render() {\n    const { name, label, disabled = false, isRequire = false, type = 'text', placeholder = 'Search...' } = this.props;\n\n    const { value, errorMsg } = this.state;\n\n    return (\n      <div className=\"input-wrapper\">\n        {label && (\n          <label className=\"input-label\">\n            {label}\n            {isRequire && <span className=\"input-require\">&nbsp;*</span>}\n          </label>\n        )}\n        <div className=\"input-search-wrapper\">\n          <i className=\"fa fa-search input-icon-search\" onClick={this.onSearch}></i>\n          <input\n            type={type}\n            name={name}\n            value={value}\n            disabled={disabled}\n            onChange={this.onChange}\n            className={'input-text input-text-search ' + (!!errorMsg ? ' input-error' : '')}\n            placeholder={placeholder}\n            onKeyUp={this.onKeyUp}\n            onKeyDown={this.onKeyDown}\n          />\n          {value && <i className=\"fa fa-times input-icon-clear\" onClick={this.onClear}></i>}\n          {!!errorMsg && <div className=\"input-error-msg\">{errorMsg}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchBox;\n","import React from 'react';\nimport './Modal.scss';\n\nconst Modal = (props) => {\n  return (\n    <div className=\"modal-wrapper\">\n      <span className=\"close\" title=\"Close\" onClick={props.onClose}>\n        &times;\n      </span>\n      <div className=\"modal-content\">{props.children}</div>\n      <div className=\"caption\">{props.caption}</div>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport SearchBox from '../../components/Input/SearchBox';\nimport Modal from '../../components/Modal/Modal';\nimport { getAbsoluteUrl } from '../../service/UtilService';\nimport musicIcon from '../../assets/icons/music_icon.jpg';\n\nconst BaiHatTable = (props) => {\n  const [showModalPicture, setShowModalPicture] = React.useState(false);\n  const [selectedSong, setSelectedSong] = React.useState(null);\n\n  const onClickPicture = (song) => {\n    if (song.image_url) {\n      setSelectedSong({ ...song });\n      setShowModalPicture(true);\n    }\n  };\n\n  const onCloseModal = () => {\n    setSelectedSong(null);\n    setShowModalPicture(false);\n  };\n\n  const caption = selectedSong ? selectedSong.artist + ' - ' + selectedSong.title : '';\n  const rainbowColors = [\n    // '#f80c12', // Lots of red, currently i don't want it\n    // '#ee1100',\n    '#ff3311',\n    '#ff4422',\n    '#ff6644',\n    '#ff9933',\n    '#feae2d',\n    '#ccbb33',\n    '#d0c310',\n    '#aacc22',\n    '#69d025',\n    '#22ccaa',\n    '#12bdb9',\n    '#11aabb',\n    '#4444dd',\n    '#3311bb',\n    '#3b0cbd',\n    '#442299'\n  ];\n  const lastSoyBg = rainbowColors[rainbowColors.length - 1];\n  const uniqueSoys = [...new Set(props.songData.map((song) => song.song_of_the_year).filter(Boolean))].sort((a, b) => b - a); // Descending: highest first\n  const getSoyBackgroundColor = (soy) => {\n    if (!soy) return lastSoyBg; // default color if no SOY\n    const index = uniqueSoys.indexOf(soy);\n    console.log('getSoyBackgroundColor', soy, index);\n    return rainbowColors[index] || lastSoyBg;\n  };\n  const getSoyTextColor = (soy) => {\n    if (!soy) return '#fff'; // default color if no SOY\n    const index = uniqueSoys.indexOf(soy);\n    return index < rainbowColors.length / 2 ? '#000' : '#fff';\n  };\n\n  const imgModalStyle = {\n    width: '400px', // nếu browser width >= 400px thì img width cũng chỉ 400px\n    maxWidth: '80%' // để resize theo with của browser nếu browser width < 400px\n  };\n\n  return (\n    <div id=\"all_songs\">\n      <div className=\"search-wrapper\">\n        <SearchBox name=\"searchText\" onSearch={props.onSearch} />\n      </div>\n      <div className=\"all-song-value custom-scrollbar\">\n        <table className=\"table_striped\" id=\"songTable\" cellSpacing=\"0\" cellPadding=\"0\">\n          <thead>\n            <tr>\n              <th style={{ textAlign: 'right' }}>No.</th>\n              <th\n                style={{ cursor: 'pointer', minWidth: '220px' }}\n                onClick={() => props.getAllSongs({ sortBy: 'title', sortOrder: 'ASC' })}\n              >\n                Song\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'listens', sortOrder: 'DESC' })}>\n                Listens\n              </th>\n              <th\n                style={{ cursor: 'pointer' }}\n                onClick={() => props.getAllSongs({ sortBy: 'song_of_the_year', sortOrder: 'DESC' })}\n                title=\"Song of the year\"\n              >\n                SOY\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'type', sortOrder: 'ASC' })}>\n                Type\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'createdDate', sortOrder: 'DESC' })}>\n                Date\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {props.songData.map((song, index) => {\n              const image_url = song.image_url ? getAbsoluteUrl(song.image_url) : musicIcon;\n              return (\n                <tr\n                  key={song.id}\n                  className={props.currSong && props.currSong.path === song.path ? 'tr-active' : ''}\n                  id={'tr-' + song.id}\n                >\n                  <td>{index + 1}</td>\n                  <td className=\"td-song-info\">\n                    <img\n                      className=\"song-picture\"\n                      src={image_url}\n                      alt={song.artist + ' - ' + song.title}\n                      onClick={() => onClickPicture(song)}\n                    />\n                    <a className=\"song-item\" href={'#/bai-hat/' + song.path} onClick={() => props.playSong(song)}>\n                      <div className=\"song-title\">{song.title}</div>\n                      <div className=\"song-artist\">{song.artist}</div>\n                    </a>\n                    <i className={'icon-play ' + (props.isPlaying ? 'playing' : 'pause')}></i>\n                  </td>\n                  <td>{song.listens}</td>\n                  <td>\n                    {song.song_of_the_year && (\n                      <span\n                        className=\"soy\"\n                        style={{\n                          background: getSoyBackgroundColor(song.song_of_the_year),\n                          color: getSoyTextColor(song.song_of_the_year)\n                        }}\n                        title={`Song of the Year: ${song.song_of_the_year}`}\n                      >\n                        {song.song_of_the_year}\n                      </span>\n                    )}\n                  </td>\n                  <td>{song.type}</td>\n                  <td>{song.formatCreatedDate}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n      {showModalPicture && (\n        <Modal onClose={onCloseModal} caption={caption}>\n          <img style={imgModalStyle} className=\"img-modal\" src={getAbsoluteUrl(selectedSong.image_url)} alt={caption} />\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default BaiHatTable;\n","import React, { PureComponent } from 'react';\nimport Toast from '../../components/Toast/Toast';\nimport { saveSetting, getSetting, shuffle } from '../../service/UtilService';\nimport { SEQUENCE, SHUFFLE, REPEAT_ONE } from '../../constants/Constants';\nimport favicon from '../../assets/icons/favicon.png';\nimport './Player.css';\n\nclass Player extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playType: SEQUENCE,\n      isPlaying: false\n    };\n    this.myAudio = React.createRef();\n    this.currentTime = React.createRef();\n    this.progressWrapper = React.createRef();\n    this.progressBar = React.createRef();\n    this.llPlayer = React.createRef();\n    this.llPlayPause = React.createRef();\n    this.duration = React.createRef();\n    this.mouseDown = false;\n    this.showCurrentTime = null;\n    this.playList = []; // danh sách bài hát sẽ được phát\n    this.initPlayList = []; // danh sách ban đầu, để khi shuffle, xong lại chuyển về sequence, thì sẽ lấy list này\n    this.activeAudio = 0; // Index of current song in playList\n  }\n\n  componentDidMount() {\n    // truyền instance của class này cho component cha,\n    // để thằng cha có thể gọi các function trong class này\n    this.props.getPlayerInstance(this);\n  }\n\n  // Hiện tại BE ko còn lỗi ko get được duration của API streaming MP3 nữa,\n  // nên tạm thời ko cần show warning\n  // componentDidUpdate(prevProps) {\n  //   if (this.props.songURL !== prevProps.songURL) {\n  //     const interShowDurationIssue = setInterval(() => {\n  //       if (this.myAudio && this.myAudio.duration === Infinity) {\n  //         Toast.warn('Cannot get duration of this song from Zing');\n  //         clearInterval(interShowDurationIssue);\n  //       }\n  //     }, 1000);\n  //   }\n  // }\n\n  // Ref: https://developer.mozilla.org/en-US/docs/Web/API/MediaSession\n  setMediaSessionMeta = (title, artist, imgUrl) => {\n    if (!imgUrl) {\n      imgUrl = favicon;\n    }\n\n    if ('mediaSession' in window.navigator) {\n      window.navigator.mediaSession.metadata = new window.MediaMetadata({\n        title: title,\n        artist: artist,\n        artwork: [\n          { src: imgUrl, sizes: '96x96', type: 'image/png' },\n          { src: imgUrl, sizes: '128x128', type: 'image/png' },\n          { src: imgUrl, sizes: '192x192', type: 'image/png' },\n          { src: imgUrl, sizes: '256x256', type: 'image/png' },\n          { src: imgUrl, sizes: '384x384', type: 'image/png' },\n          { src: imgUrl, sizes: '512x512', type: 'image/png' }\n        ]\n      });\n      window.navigator.mediaSession.setActionHandler('previoustrack', this.prevSong);\n      window.navigator.mediaSession.setActionHandler('nexttrack', this.nextSong);\n      window.navigator.mediaSession.setActionHandler('play', this.playAudio);\n      window.navigator.mediaSession.setActionHandler('pause', this.pauseAudio);\n      window.navigator.mediaSession.setActionHandler('stop', this.pauseAudio);\n    } else {\n      console.log(\"Your browser doesn't not support MediaSession\");\n    }\n  };\n\n  // Mỗi lần parent muốn đổi sang phát 1 danh sách khác thì parent phải\n  // truyền danh sách phát mới đó thông qua function này, và phải setPlayType lại,\n  // vì nếu playType = shuffle thì cũng cần shuffle lại cái playList vừa được\n  // truyền vào đó (mà việc shuffle này được thực hiện trong function setPlayType)\n  setPlayList = (pl, activeAudioIdx) => {\n    // Note dùng như sau là sai nhé:\n    // this.playList = pl;\n    // Đây là truyền tham chiếu, do đó nếu sau này thay đổi biến this.playList\n    // (shuffle nó chẳng hạn, thì biến pl từ component cha cũng sẽ thay đổi theo => hỏng)\n    this.playList = [...pl];\n    this.initPlayList = [...pl];\n    this.activeAudio = activeAudioIdx;\n    this.setPlayType(getSetting('playType'));\n  };\n\n  setActiveAudio = (song) => {\n    // Nếu click Next/Previous button thì sẽ rơi vào case này: activeAudio đã được update\n    // ở 2 function đó rồi\n    if (this.playList[this.activeAudio].id === song.id) return;\n\n    // Nếu click trực tiếp trên songTable để phát bài mới thì ta cần update lại activeAudio\n    for (let i = 0; i < this.playList.length; i++) {\n      if (this.playList[i].id === song.id) {\n        this.activeAudio = i;\n        break;\n      }\n    }\n    console.log('reset ActiveAudio: ', this.activeAudio);\n  };\n\n  setMouseDown = () => {\n    this.mouseDown = true;\n  };\n\n  clearMouseDown = () => {\n    this.mouseDown = false;\n  };\n\n  // Trong app này, việc toggle được áp dụng với các button có 2 state: ON, OFF.\n  // Toggle sẽ lấy giá trị mới ngược với giá trị hiện tại.\n  // Trong các function toggle sẽ KHÔNG update state, và sẽ gọi các function abc() khác\n  // để bọn chúng setState, vì có thể có chỗ khác cũng sẽ gọi các function abc() đó,\n  // nếu update state trong toggle thì nơi khác gọi abc() sẽ ko update state được\n  toggleShuffle = () => {\n    this.state.playType === SHUFFLE ? this.setPlayType(SEQUENCE) : this.setPlayType(SHUFFLE);\n  };\n\n  toggleRepeat = () => {\n    this.state.playType === REPEAT_ONE ? this.setPlayType(SEQUENCE) : this.setPlayType(REPEAT_ONE);\n  };\n\n  togglePlay = () => {\n    this.state.isPlaying ? this.pauseAudio() : this.playAudio();\n  };\n\n  prevSong = () => {\n    const { playType } = this.state;\n    if (playType !== REPEAT_ONE) {\n      if (this.activeAudio === 0) {\n        Toast.warn('This is the first song of playing list!');\n        return;\n      } else this.activeAudio--;\n    }\n    this.props.playSong(this.playList[this.activeAudio], true);\n  };\n\n  nextSong = () => {\n    const { playType } = this.state;\n    if (playType !== REPEAT_ONE) {\n      if (this.activeAudio === this.playList.length - 1) {\n        Toast.warn('This is the last song of playing list. Please select another song manually to play!');\n        this.togglePlay(); // stop playing\n        return;\n      } else this.activeAudio++;\n    }\n    this.props.playSong(this.playList[this.activeAudio], true);\n  };\n\n  secsToMins = (time) => {\n    let int = Math.floor(time),\n      mins = Math.floor(int / 60),\n      secs = int % 60,\n      newTime = mins + ':' + ('0' + secs).slice(-2);\n\n    return newTime;\n  };\n\n  getCurrentTime = () => {\n    if (!this.myAudio) return;\n\n    const currentTimeFormatted = this.secsToMins(this.myAudio.currentTime),\n      currentTimePercentage = (this.myAudio.currentTime / this.getDuration()) * 100;\n\n    this.currentTime.innerText = currentTimeFormatted;\n    this.progressBar.style.width = currentTimePercentage + '%';\n\n    if (this.state.isPlaying) {\n      this.showCurrentTime = requestAnimationFrame(this.getCurrentTime);\n    } else {\n      cancelAnimationFrame(this.showCurrentTime);\n    }\n  };\n\n  showDuration = () => {\n    let durationFormatted = this.secsToMins(this.getDuration());\n    this.duration.innerText = durationFormatted;\n  };\n\n  /**\n   * Dùng updateProgressBar cho cả 2 event onClick và onMouseMove để khi user click và kéo,\n   * sau đó thả thì nó vẫn tua được tới vị trí user thả chuột\n   */\n  updateProgressBar = (e) => {\n    const totalWidth = this.progressWrapper.offsetWidth;\n    const offsetX = e.nativeEvent.offsetX; // https://stackoverflow.com/a/31520106/7688028\n    const offsetPercentage = offsetX / totalWidth;\n\n    if (this.mouseDown || e.type === 'click') {\n      this.myAudio.currentTime = this.getDuration() * offsetPercentage;\n      // Nếu isPlaying = true, thì việc update time đã được thực hiện ở requestAnimationFrame ở trên rồi\n      if (!this.state.isPlaying) {\n        this.getCurrentTime();\n      }\n      this.props.onSeeked();\n    }\n  };\n\n  // Nếu ko get được duration thì API streaming MP3 phía BE bị lỗi, cần fix BE.\n  // Hiện tại thì BE chưa có lỗi này, nhưng nếu chẳng may dính thì để duration = 10min\n  getDuration = () => {\n    return this.myAudio.duration === Infinity ? 600 : this.myAudio.duration;\n  };\n\n  playAudio = () => {\n    let playPromise = this.myAudio.play();\n\n    // In browsers that haven't yet supported this functionality,\n    // playPromise won't be defined.\n    if (playPromise !== undefined) {\n      playPromise\n        .then(() => {\n          // Automatic playback started!\n          this.setState({ isPlaying: true }, () => {\n            this.getCurrentTime();\n            this.props.onPlay();\n          });\n        })\n        .catch((error) => {\n          // Automatic playback failed.\n          this.pauseAudio();\n          console.log('Error playing file: ', error);\n          Toast.error('Lỗi: KHÔNG thể tự động phát nhạc, do bạn chưa tương tác với trang, hoặc Zing không cho phép phát bài này');\n        });\n    } else {\n      this.pauseAudio();\n      Toast.error(\"Your browser hasn't yet supported this functionality\");\n    }\n  };\n\n  pauseAudio = () => {\n    this.myAudio.pause();\n    this.props.onPause();\n    this.setState({ isPlaying: false });\n  };\n\n  // default = SEQUENCE\n  setPlayType = (pt = SEQUENCE) => {\n    this.setState({ playType: pt });\n    if (pt === SHUFFLE) {\n      const currSong = this.playList[this.activeAudio];\n\n      // Mỗi lần chọn/chuyển sang phát ngẫu nhiên sẽ trộn lại danh sách phát\n      shuffle(this.playList);\n\n      // find and move the currSong to the head of playList\n      for (let i = 0; i < this.playList.length; i++) {\n        if (this.playList[i].id === currSong.id) {\n          [this.playList[i], this.playList[0]] = [this.playList[0], this.playList[i]]; // swap 2 elements\n          this.activeAudio = 0;\n          break;\n        }\n      }\n\n      // console.log(\n      //   'After shuffle: ',\n      //   this.playList.map((song) => `${song.id}: ${song.title} (${song.artist})`)\n      // );\n    } else {\n      const currSong = this.playList[this.activeAudio];\n      this.playList = [...this.initPlayList];\n\n      // find currSong and set activeAudio equal to currSong position\n      for (let i = 0; i < this.playList.length; i++) {\n        if (this.playList[i].id === currSong.id) {\n          this.activeAudio = i;\n          break;\n        }\n      }\n\n      // console.log(\n      //   'After sequence: ',\n      //   this.playList.map((song) => `${song.id}: ${song.title} (${song.artist})`)\n      // );\n    }\n\n    saveSetting('playType', pt);\n  };\n\n  render() {\n    const { song } = this.props;\n    const { playType, isPlaying } = this.state;\n\n    return (\n      <div\n        className={`ll_player ${isPlaying ? 'll-playing' : 'll-paused'}`}\n        onMouseDown={this.setMouseDown}\n        onMouseUp={this.clearMouseDown}\n        ref={(node) => (this.llPlayer = node)}\n      >\n        <div className=\"info\">\n          <div id=\"song_details\">\n            <div className=\"song_title\">{song.title}</div>\n            <div className=\"song_artist\">{song.artist}</div>\n            <div className=\"song_album\">({song.album ? song.album : 'No Album'})</div>\n          </div>\n        </div>\n\n        <div className=\"ll-btn-wrapper\">\n          <button\n            className={`ll-shuffle ${playType === SHUFFLE ? 'active' : ''}`}\n            title={`${playType === SHUFFLE ? 'Turn off shuffle' : 'Shuffle'}`}\n            onClick={this.toggleShuffle}\n          >\n            <div className=\"arrow\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button className=\"ll-button ll-btn-prev\" title=\"Previous\" onClick={this.prevSong}>\n            <div className=\"arrow arrow-transform\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button\n            className=\"ll-button ll-play-pause\"\n            title={isPlaying ? 'Pause' : 'Play'}\n            onClick={this.togglePlay}\n            ref={(node) => (this.llPlayPause = node)}\n          >\n            <div className=\"arrow arrow-transform\"></div>\n          </button>\n          <button className=\"ll-button ll-btn-next\" title=\"Next\" onClick={this.nextSong}>\n            <div className=\"arrow arrow-transform\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button\n            className={`ll-repeat ${playType === REPEAT_ONE ? 'active' : ''}`}\n            title=\"Repeat one\"\n            onClick={this.toggleRepeat}\n          ></button>\n        </div>\n\n        <div className=\"time\">\n          <span className=\"current-time\" ref={(node) => (this.currentTime = node)}>\n            0:00\n          </span>\n          <span\n            className=\"progress\"\n            ref={(node) => (this.progressWrapper = node)}\n            onClick={this.updateProgressBar}\n            onMouseMove={this.updateProgressBar}\n          >\n            <span ref={(node) => (this.progressBar = node)}></span>\n          </span>\n          <span className=\"duration\" ref={(node) => (this.duration = node)}>\n            0:00\n          </span>\n        </div>\n\n        <audio\n          ref={(node) => (this.myAudio = node)}\n          id=\"myAudio\"\n          preload=\"metadata\"\n          src={this.props.songURL}\n          onLoadedMetadata={this.showDuration}\n          onEnded={this.nextSong}\n          crossOrigin=\"anonymous\"\n        ></audio>\n      </div>\n    );\n  }\n}\n\nexport default Player;\n","function getRelativePos(elm) {\n  let pPos = elm.parentNode.getBoundingClientRect(), // parent pos\n    cPos = elm.getBoundingClientRect(), // target pos\n    pos = {};\n\n  pos.top = cPos.top - pPos.top + elm.parentNode.scrollTop;\n  pos.right = cPos.right - pPos.right;\n  pos.bottom = cPos.bottom - pPos.bottom;\n  pos.left = cPos.left - pPos.left;\n\n  return pos;\n}\n\n// From: https://gist.github.com/gre/1650294\nfunction easeInOutCubic(t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\nfunction easeInOutQuad(t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\n\n/**\n * Scroll to an element inside a container\n * Chú ý: element = thẻ div. Nếu element mà là thẻ span thì nó sẽ scroll lên top của container\n * @param {HTMLElement} container The wrapper element to do scrolling\n * @param {HTMLElement} element Element inside container. Scroll to its position\n * @param {Number} duration Time to scroll, in milisecond\n * @param {Number} offset sau khi scroll tới element, đẩy nó lên 1 đoạn = offset (âm = đẩy xuống)\n **/\nexport function scrollInsideElement(container, element, duration, offset = 0) {\n  let pos = getRelativePos(element);\n  let start = container.scrollTop,\n    change = pos.top - start,\n    startTime = performance.now(),\n    now,\n    elapsed,\n    t;\n\n  function animateScroll() {\n    now = performance.now();\n    elapsed = now - startTime;\n    t = elapsed / duration;\n\n    container.scrollTop = start + change * easeInOutQuad(t) + offset;\n\n    if (t < 1) window.requestAnimationFrame(animateScroll);\n  }\n\n  animateScroll();\n}\n\n/**\n * Scroll to an element inside a container, but element will be\n * in the center of container\n */\nexport function scrollInsideElementToCenter(container, element, duration) {\n  scrollInsideElement(container, element, duration, -container.offsetHeight / 2 + element.offsetHeight / 2);\n}\n\n/**\n * Scroll the page to an element's position (element nên là thẻ div, ko phải span)\n * @param {HTMLElement} element the tag we wants browser to scroll to\n * @param {Number} duration scrolling time in milisecond\n */\nexport function scrollPage(element, duration) {\n  let startingY = window.pageYOffset;\n  let elementY = window.pageYOffset + element.getBoundingClientRect().top;\n\n  // If element is close to page's bottom then window will scroll only to some position above the element.\n  let targetY =\n    document.body.scrollHeight - elementY < window.innerHeight ? document.body.scrollHeight - window.innerHeight : elementY;\n  let diff = targetY - startingY;\n  let start;\n\n  if (!diff) return;\n\n  // Bootstrap our animation - it will get called right before next frame shall be rendered.\n  window.requestAnimationFrame(function step(timestamp) {\n    if (!start) start = timestamp;\n    // Elapsed miliseconds since start of scrolling.\n    let time = timestamp - start;\n\n    // Get percent of completion in range [0, 1].\n    let percent = Math.min(time / duration, 1);\n\n    // Apply the easing.\n    // It can cause bad-looking slow frames in browser performance tool, so be careful.\n    percent = easeInOutCubic(percent);\n\n    window.scrollTo(0, startingY + diff * percent);\n\n    // Proceed with animation as long as we wanted it to.\n    if (time < duration) {\n      window.requestAnimationFrame(step);\n    }\n  });\n}\n","import React, { PureComponent } from 'react';\nimport Toast from '../../components/Toast/Toast';\nimport { saveSetting, getSetting } from '../../service/UtilService';\nimport { scrollPage } from '../../service/scroll';\n\nclass Setting extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      volume: 100\n    };\n  }\n\n  onChangeVolume = (e) => {\n    const { value } = e.target;\n    const volume = value / 100;\n    this.setState({ volume: value });\n    this.props.myAudio.volume = volume;\n    saveSetting('volume', volume);\n  };\n\n  componentDidMount() {\n    this.props.initSettingsAtPlayer(this.initSettingsAtPlayer);\n  }\n\n  /**\n   * Init data for html element: lyric_playground, div_result and my_audio\n   * Chủ yếu init về css style chứ ko thay đổi state gì của React component\n   */\n  initSettingsAtPlayer = () => {\n    const { myAudio, lyric_playground } = this.props;\n    let lyricAlign = getSetting('lyricAlign');\n    if (lyricAlign) this.settingLyricAlign(lyricAlign);\n\n    let theme = getSetting('theme');\n    if (theme) {\n      switch (theme) {\n        case 'dark':\n          this.changeTheme('dark');\n          break;\n        case 'light':\n          this.changeTheme('light');\n          break;\n        case 'picture-bg':\n          this.changeTheme('picture-bg');\n          break;\n        default:\n          break;\n      }\n    }\n\n    // changeAudioSpeed\n    let speed = getSetting('speed');\n    if (speed) myAudio.playbackRate = speed;\n\n    // changeAudioVolume\n    let vol = getSetting('volume');\n    if (vol) {\n      myAudio.volume = vol;\n      this.setState({ volume: vol * 100 });\n    }\n\n    this.setKaraokeMode(getSetting('karaokeMode'));\n    this.setBlurMode(getSetting('blurMode'));\n    this.setGiganticLine(getSetting('giganticLine'));\n    this.setWordAppear(getSetting('wordAppear'));\n    this.setLineAppear(getSetting('lineAppear'));\n    setTimeout(() => {\n      scrollPage(lyric_playground, 300);\n    }, 10);\n  };\n\n  settingLyricAlign = (align) => {\n    this.props.div_result.style.textAlign = align;\n    saveSetting('lyricAlign', align);\n  };\n\n  settingTheme = (themeName) => {\n    this.changeTheme(themeName);\n    saveSetting('theme', themeName);\n  };\n\n  /**\n   * Note: Class theme sẽ bắt đầu = \"lyric-pg-\"\n   * Do đó những class ko liên quan đến theme KO được bắt đầu = \"lyric-pg-\"\n   */\n  changeTheme = (themeName) => {\n    const { lyric_playground, div_background } = this.props;\n\n    div_background.style.display = themeName === 'picture-bg' ? '' : 'none';\n\n    lyric_playground.classList.forEach((className) => {\n      if (className.includes('lyric-pg-')) lyric_playground.classList.remove(className);\n    });\n    lyric_playground.classList.add('lyric-pg-' + themeName);\n  };\n\n  toggleKaraokeMode = () => {\n    if (!this.props.div_result.classList.contains('karaoke-mode')) {\n      this.setKaraokeMode(true);\n    } else {\n      this.setKaraokeMode(false);\n    }\n  };\n  setKaraokeMode = (isKaraokeMode) => {\n    const { div_result } = this.props;\n    if (isKaraokeMode === true) {\n      div_result.classList.add('karaoke-mode');\n      div_result.classList.remove('karaoke-off');\n      saveSetting('karaokeMode', true);\n    } else if (isKaraokeMode === false) {\n      div_result.classList.remove('karaoke-mode');\n      div_result.classList.add('karaoke-off');\n      saveSetting('karaokeMode', false);\n    }\n  };\n\n  toggleBlurMode = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('blur-mode')) {\n      this.setBlurMode(true);\n    } else {\n      this.setBlurMode(false);\n    }\n  };\n  setBlurMode = (isBlurMode) => {\n    const { div_result } = this.props;\n    if (isBlurMode === true) {\n      div_result.classList.add('blur-mode');\n      saveSetting('blurMode', true);\n    } else if (isBlurMode === false) {\n      div_result.classList.remove('blur-mode');\n      saveSetting('blurMode', false);\n    }\n  };\n\n  toggleGiganticLine = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('div-res-big-active-line')) {\n      this.setGiganticLine(true);\n    } else {\n      this.setGiganticLine(false);\n    }\n  };\n  setGiganticLine = (isGiganticLine) => {\n    const { div_result } = this.props;\n    if (isGiganticLine === true) {\n      div_result.classList.add('div-res-big-active-line');\n      saveSetting('giganticLine', true);\n    } else if (isGiganticLine === false) {\n      div_result.classList.remove('div-res-big-active-line');\n      saveSetting('giganticLine', false);\n    }\n  };\n\n  flipWaveform = () => {\n    let flip = getSetting('flipWaveform');\n    if (flip && flip === true) {\n      flip = false;\n    } else {\n      flip = true;\n    }\n    saveSetting('flipWaveform', flip);\n    Toast.info(`Flip waveform = ${flip}, refresh page to take effect!`);\n\n    // Hiện tại việc update qua props này CHƯA implement được, bên component Waveform KHÔNG\n    // nhận được giá trị mới sau mỗi lần update, vui lòng F5!!!\n    this.props.updateFlipWaveform(flip);\n  };\n\n  toggleWordAppear = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('word-appear')) {\n      this.setWordAppear(true);\n    } else {\n      this.setWordAppear(false);\n    }\n  };\n  setWordAppear = (isWordAppear) => {\n    const { div_result } = this.props;\n    if (isWordAppear === true) {\n      div_result.classList.add('word-appear');\n      saveSetting('wordAppear', true);\n    } else if (isWordAppear === false) {\n      div_result.classList.remove('word-appear');\n      saveSetting('wordAppear', false);\n    }\n  };\n\n  toggleLineAppear = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('line-appear')) {\n      this.setLineAppear(true);\n    } else {\n      this.setLineAppear(false);\n    }\n  };\n  setLineAppear = (isLineAppear) => {\n    const { div_result } = this.props;\n    if (isLineAppear === true) {\n      div_result.classList.add('line-appear');\n      saveSetting('lineAppear', true);\n    } else if (isLineAppear === false) {\n      div_result.classList.remove('line-appear');\n      saveSetting('lineAppear', false);\n    }\n  };\n\n  updateSpeed = (offset) => {\n    let speed = this.props.myAudio.playbackRate + offset;\n    speed = Number(speed.toFixed('1'));\n    this.props.myAudio.playbackRate = speed;\n    Toast.info('Speed: ' + speed + 'x');\n    saveSetting('speed', speed);\n  };\n\n  render() {\n    const { showSetting, openSetting, isFullscreen } = this.props;\n    const { volume } = this.state;\n    return (\n      <div className=\"setting_section\" style={{ display: isFullscreen ? 'none' : '' }}>\n        {!showSetting && (\n          <div className=\"btn_toggle_setting\" title=\"Settings\" onClick={openSetting}>\n            <i className=\"fa fa-ellipsis-h\"></i>\n          </div>\n        )}\n\n        {!!showSetting && (\n          <div id=\"setting_wrapper\">\n            <div>\n              <span className=\"setting-legend\">Lyric:&nbsp;</span>\n              <i className=\"fa fa-caret-up btn_sync_up\" title=\"Sync lyric: -100ms\"></i>\n              <i className=\"fa fa-caret-down btn_sync_down\" title=\"Sync lyric: +100ms\"></i>\n              <i className=\"setting_separator\">|</i>\n              <i\n                className=\"fa fa-align-left btn_align btn_align_left\"\n                title=\"Lyric left alignment\"\n                onClick={() => this.settingLyricAlign('left')}\n              ></i>\n              <i\n                className=\"fa fa-align-center btn_align btn_align_center\"\n                title=\"Lyric center\"\n                onClick={() => this.settingLyricAlign('center')}\n              ></i>\n              <i\n                className=\"fa fa-align-right btn_align btn_align_right\"\n                title=\"Lyric right alignment\"\n                onClick={() => this.settingLyricAlign('right')}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Theme:&nbsp;</span>\n              <i\n                className=\"fa fa-square btn_theme btn_theme_dark\"\n                title=\"Dark theme\"\n                onClick={() => this.settingTheme('dark')}\n              ></i>\n              <i\n                className=\"fa fa-square btn_theme btn_theme_light\"\n                title=\"Light theme\"\n                onClick={() => this.settingTheme('light')}\n              ></i>\n              <i\n                className=\"fa fa-picture-o btn_theme btn_theme_picture_bg\"\n                title=\"Picture background theme\"\n                onClick={() => this.settingTheme('picture-bg')}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Mode:&nbsp;</span>\n              <i\n                className=\"fa fa-microphone btn_theme btn_karaoke_mode\"\n                title=\"Karaoke mode\"\n                onClick={this.toggleKaraokeMode}\n              ></i>\n              <i className=\"fa fa-cloud btn_theme btn_blur_mode\" title=\"Blur mode\" onClick={this.toggleBlurMode}></i>\n              <i\n                className=\"fa fa-eye-slash btn_theme btn_word_appear\"\n                title=\"Word appears when time comes to it\"\n                onClick={this.toggleWordAppear}\n              ></i>\n              <i\n                className=\"fa fa-coffee btn_theme\"\n                title=\"Word & Line appears when time comes to it\"\n                onClick={this.toggleLineAppear}\n              ></i>\n              <i\n                className=\"fa fa-search-plus btn_theme btn_gigantic_line\"\n                title=\"Gigantic line\"\n                onClick={this.toggleGiganticLine}\n              ></i>\n              <i\n                className=\"fa fa-retweet btn_theme btn_flip_waveform\"\n                title=\"Flip waveform horizontally\"\n                onClick={this.flipWaveform}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Speed:&nbsp;</span>\n              <i\n                className=\"fa fa-plus-square btn_theme btn_increase_speed\"\n                title=\"Increase speed\"\n                onClick={() => this.updateSpeed(0.1)}\n              ></i>\n              <i\n                className=\"fa fa-minus-square btn_theme btn_decrease_speed\"\n                title=\"Decrease speed\"\n                onClick={() => this.updateSpeed(-0.1)}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Volume:&nbsp;</span>\n              <input type=\"range\" min=\"1\" max=\"100\" value={volume} className=\"slider-volume\" onChange={this.onChangeVolume} />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Setting;\n","import React from 'react';\nimport debounce from 'debounce-promise';\nimport { getAverageRGB } from '../../service/UtilService';\n\n/**\n * Ref: https://www.codehim.com/vanilla-javascript/javascript-audio-waveform-visualizer/\n */\nclass Waveform extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n    this.waveformAniFr = null;\n  }\n\n  componentDidMount() {\n    this.props.getWaveformInstance(this);\n    window.onresize = debounce(this.drawWaveform, 300);\n  }\n\n  drawWaveform = () => {\n    const { flipWaveform, analyser } = this.props;\n    if (!analyser) return;\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n    const canvasContext = this.canvas.getContext('2d');\n    const bufferLength = analyser.frequencyBinCount; // = fftSize/2\n\n    // vì có nhiều phần tử cuối của mảng dataArray = 0 nếu dataArray = new Uint8Array(bufferLength)\n    const totalBar = parseInt(bufferLength / 1.2);\n    const dataArray = new Uint8Array(totalBar);\n    const peakArr = Array(totalBar).fill(0);\n    const velocityArr = Array(totalBar).fill(0);\n    const acceleration = 0.05; // gia tốc của điểm peak khi rơi xuống\n    const WIDTH = this.canvas.width;\n    const HEIGHT = this.canvas.height;\n    const barWidth = parseInt(WIDTH / totalBar);\n    const heightLimit = 270; // what does this mean?\n    const averageRGB = getAverageRGB();\n    let barHeight, barColor, x;\n\n    console.log('bufferLength, totalBar, WIDTH, HEIGHT: ', bufferLength, totalBar, WIDTH, HEIGHT);\n\n    if (window.innerWidth <= 720) return; // not show animation on mobile device\n\n    console.log('Start drawing waveform...');\n\n    // Khi prop flipWaveform thay đổi thì hàm này KHÔNG nhận được giá trị mới, mà phải Refresh lại page\n    // Có solution nào đó, chẳng hạn getDerivedStateFromProps hay componentDidUpdate, nhưng lằng nhằng\n    // quá nên CHƯA implement được!\n    const renderFrame = () => {\n      analyser.getByteFrequencyData(dataArray);\n      canvasContext.clearRect(0, 0, WIDTH, HEIGHT);\n\n      // for debugging: nếu nó in ra thì animation này vẫn chạy!\n      // console.log('dataArray[0]', dataArray[0]);\n      for (let i = 0; i < totalBar; i++) {\n        // dataArray[i] là 1 số 8bit ko dấu, do đó nó sẽ thuộc khoảng [0,255],\n        // nhưng HEIGHT của canvas có thể < 255, do đó nếu cứ để barHeight = dataArray[i]\n        // thì sẽ ko đủ chỗ vẽ bar\n        // Set min barHeight = 1, vì nếu = 0 sẽ ko thấy hết các bar\n        // Note: sau khi add flipWaveform, thì việc nhiều bar = 0 lại bị chuyển về bên trái, haizzz\n        // (hiện tại ko flip thì ở bên phải ko còn nhiều bar = 0 nữa, nhưng flip thì lại bị)\n        // Sẽ fix sau...\n        if (flipWaveform === true) {\n          barHeight = 1 + parseInt((dataArray[totalBar - i] / heightLimit) * HEIGHT);\n        } else {\n          barHeight = 1 + parseInt((dataArray[i] / heightLimit) * HEIGHT);\n        }\n        // barColor = this.getBarColor(barHeight / HEIGHT, i / totalBar);\n        barColor = averageRGB;\n        x = (barWidth + 3) * i;\n\n        // draw bar\n        canvasContext.fillStyle = barColor;\n        canvasContext.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);\n\n        // draw peak of bar\n        if (barHeight > peakArr[i]) {\n          peakArr[i] = barHeight;\n          velocityArr[i] = 0;\n        }\n        if (peakArr[i] > 0) {\n          canvasContext.beginPath();\n          canvasContext.strokeStyle = barColor;\n          canvasContext.lineWidth = 3;\n          canvasContext.moveTo(x, HEIGHT - peakArr[i]);\n          canvasContext.lineTo(x + barWidth, HEIGHT - peakArr[i]);\n          canvasContext.stroke();\n          velocityArr[i] += acceleration;\n          peakArr[i] = peakArr[i] - velocityArr[i];\n        }\n      }\n\n      // Chỉ chạy animation khi audio đang play. Nếu ko check điều kiện này thì cho dù gọi\n      // cancelAnimationFrame(this.waveformAniFr) vẫn ko stop được cái animation này!\n      if (!this.props.myAudio.paused) this.waveformAniFr = requestAnimationFrame(renderFrame);\n    };\n\n    renderFrame();\n  };\n\n  /**\n   * @param {Number} heightRatio chiều cao của bar so với chiều cao của canvas. heightRatio <= 1\n   * @param {Number} barRatio vị trí của bar trong mảng. heightRatio <= 1\n   * @returns\n   */\n  getBarColor = (heightRatio, barRatio) => {\n    const r = parseInt(255 * barRatio); // dải màu gradient của mảng bar: blue -> tím hồng\n    const g = 100 - 30 * heightRatio; // bar càng cao thì màu càng đậm\n    const b = 255;\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  };\n\n  stopWaveform = () => {\n    cancelAnimationFrame(this.waveformAniFr);\n  };\n\n  render() {\n    return <canvas className=\"canvas-waveform\" ref={(node) => (this.canvas = node)}></canvas>;\n  }\n}\n\nexport default Waveform;\n","import React from 'react';\nimport Waveform from './Waveform';\n\nconst LeftPlayground = (props) => {\n  const { toggleWaveform, showWaveform, flipWaveform, analyser, initAnalyzer, myAudio, getWaveformInstance, song } = props;\n  return (\n    <div className=\"left_info\" onClick={toggleWaveform} title={showWaveform ? 'Switch to song meta' : 'Switch to waveform'}>\n      {showWaveform && (\n        <Waveform\n          analyser={analyser}\n          initAnalyzer={initAnalyzer}\n          myAudio={myAudio}\n          getWaveformInstance={getWaveformInstance}\n          flipWaveform={flipWaveform}\n        />\n      )}\n      {!showWaveform && (\n        <>\n          <div className=\"left_title\">{song.title}</div>\n          <div className=\"left_artist\">{song.artist}</div>\n          <div className=\"left_album\">({song.album ? song.album : 'No Album'})</div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default LeftPlayground;\n","import React, { PureComponent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Toast from '../../components/Toast/Toast';\nimport BaiHatService from './BaiHatService';\nimport backgroundImage from '../../assets/images/background.jpg';\nimport spinImage from '../../assets/images/spin.jpg';\nimport BaiHatTable from './BaiHatTable';\nimport Player from './Player';\nimport Setting from './Setting';\nimport LeftPlayground from './LeftPlayground';\nimport { NO_LYRIC, FETCHING_LYRIC, LYRIC_NOT_FOUND, THEME_LIGHT } from '../../constants/Constants';\nimport {\n  getById,\n  saveSetting,\n  getSetting,\n  decodeTime,\n  createNewElement,\n  myParseFloat,\n  getByClass,\n  filterTable,\n  getAbsoluteUrl,\n  isValidDate,\n  formatDateMY\n} from '../../service/UtilService';\nimport { scrollPage, scrollInsideElementToCenter } from '../../service/scroll';\nimport { LiliContext } from '../../context/LiliContext';\nimport './BaiHat.css';\nimport { buildDate } from '../../buildInfo';\n\nclass BaiHat extends PureComponent {\n  static contextType = LiliContext;\n\n  constructor(props) {\n    super(props);\n    let flipWaveform = getSetting('flipWaveform');\n    if (flipWaveform === undefined || flipWaveform === null) {\n      flipWaveform = false;\n    }\n    this.state = {\n      songData: [],\n      params: {\n        page: 0\n      },\n      analyser: null,\n      loading: false,\n      song: {}, // current song\n      showSetting: false,\n      isFullscreen: !!getSetting('fullscreen'), // !!null = false\n      showWaveform: getSetting('showWaveform') || false,\n      flipWaveform: flipWaveform,\n      isPlaying: false,\n      spinning: false\n    };\n\n    this.lines = [];\n    this.isLrc = false;\n    this.hasTranslation = false;\n    this.startTimes = [];\n    this.endTimes = [];\n    this.cntWord = 0;\n    this.offsetTime = 0;\n    this.currWordID = -1;\n    this.metaExist = false;\n    this.lyricMeta = {};\n    this.myAudio = null;\n    this.playLyricInterval = null;\n    this.countdownInterval = null;\n    this.currErrWord = null;\n    this.playerInstance = null;\n    this.waveformInstance = null;\n    this.initSettingsAtPlayer = null;\n    this.div_result = React.createRef();\n    this.lyric_playground = React.createRef();\n    this.div_background = React.createRef();\n    this.div_left_wrapper = React.createRef();\n  }\n\n  componentDidMount() {\n    const sortBy = getSetting('sortBy');\n    const sortOrder = getSetting('sortOrder');\n    this.getAllSongs(\n      {\n        sortBy,\n        sortOrder\n      },\n      true\n    );\n\n    // tham chiếu tới myAudio của component con, thực ra có thể dùng:\n    // this.myAudio = this.playerInstance.myAudio;\n    // nhưng muốn dùng cả 2 cách nên để như vậy\n    // (playerInstance chỉ dùng để call các function trong component Player)\n    this.myAudio = this.child.myAudio;\n\n    if (this.state.isFullscreen) {\n      this.setFullscreen();\n    }\n\n    window.addEventListener('keydown', (e) => {\n      if (!this.myAudio) return;\n\n      switch (e.key) {\n        case 'ArrowLeft':\n          this.myAudio.currentTime -= 5;\n          this.onSeeked();\n          break;\n        case 'ArrowRight':\n          this.myAudio.currentTime += 5;\n          this.onSeeked();\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.clearPlayLyricInterval();\n    this.clearCountdownInterval();\n  }\n\n  initAnalyzer = () => {\n    if (this.state.analyser) return;\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)(); // Safari uses webkitAudioContext\n    const audioSrcNode = audioContext.createMediaElementSource(this.myAudio);\n    const analyser = audioContext.createAnalyser();\n    audioSrcNode.connect(analyser);\n    analyser.connect(audioContext.destination);\n    analyser.fftSize = 128;\n    this.setState({\n      analyser\n    });\n  };\n\n  getAllSongs = (params, isPlaySong = false) => {\n    this.setState({ loading: true });\n    const sort = params.sortBy ? params.sortBy + ',' + params.sortOrder : this.state.params.sort;\n    if (params.sortBy) {\n      saveSetting('sortBy', params.sortBy);\n      saveSetting('sortOrder', params.sortOrder);\n    }\n    const newParams = {\n      ...this.state.params,\n      ...params,\n      sort\n    };\n    this.setState({\n      params: newParams\n    });\n    BaiHatService.getAllSongs(newParams)\n      .then((res) => {\n        const path = this.props.match.params.id;\n        let song = {};\n        let currInx = 0;\n        if (path) {\n          song = res.find((obj, idx) => {\n            if (obj.path === path) {\n              currInx = idx;\n              return true;\n            }\n            return false;\n          });\n        }\n\n        this.setState({\n          songData: res,\n          loading: false\n        });\n        this.playerInstance.setPlayList(res, currInx); // danh sách phát và 1 bài trong danh sách đó muốn được phát ngay lúc này\n        if (isPlaySong && song.path) {\n          this.playSong(song);\n        }\n        this.scrollTableToActiveSong(song);\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n        this.setState({\n          loading: false\n        });\n      });\n  };\n\n  /**\n   * Play a song\n   * @param {JSON} song info of a song we want to play\n   */\n  playSong = (song, isScrollTr = false) => {\n    console.log(`Start playing ${song.title} - ${song.artist}...`);\n    if (this.props.match.params.id !== song.path) {\n      window.location.href = '#/bai-hat/' + song.path;\n    }\n\n    if (song.zing_id) {\n      song.zingStream = getAbsoluteUrl('/api/zing/mp3/streaming?zing_id=' + song.zing_id);\n    }\n\n    // [js_async] cần chờ setState xong để nó render xong đã, sau đó mới fetch lyric,\n    // bởi vì trong getLyric, nếu có lyric, sẽ chờ hàm BaiHatService.getLyric\n    // thực hiện xong mới gọi saveLyric, còn khi ko có lyric sẽ gọi luôn hàm setNoLyric.\n    // 2 trường họp đó khác nhau dẫn đến kq khác nhau (có lyric thì ok, ko có thì lỗi)!\n    this.setState({ song }, () => {\n      this.getLyric(song);\n    });\n    const image_url = song && song.image_url ? getAbsoluteUrl(song.image_url) : spinImage;\n    this.playerInstance.setActiveAudio(song);\n    this.playerInstance.setMediaSessionMeta(song.title, song.artist, image_url);\n\n    if (isScrollTr) {\n      this.scrollTableToActiveSong(song);\n    }\n  };\n\n  scrollTableToActiveSong = (song = {}) => {\n    const songTable = getById('songTable');\n    if (!songTable || !song.id) return;\n    const allSongValue = songTable.parentNode;\n    const activeTr = getById('tr-' + song.id);\n    // allSongValue.scrollTop = activeTr.offsetTop - 34; // 34px = height of table header\n    scrollInsideElementToCenter(allSongValue, activeTr, 300); // chả cần animation chỗ này đâu :v\n  };\n\n  getLyric = (song) => {\n    // FetchingLyric\n    this.div_result.innerHTML = FETCHING_LYRIC;\n    this.lines = [];\n    if (song.lyric) {\n      // Currently only support .lrc, .xlrc and .trc. Will support .xtrc in the future\n      // .lrc: lyric with time for each line\n      // .xlrc: lrc lyric with translation\n      // .trc: lyric with time for each line and word\n      // .xtrc: trc lyric with translation\n      if (song.lyric.endsWith('.lrc')) {\n        this.isLrc = true;\n        this.hasTranslation = false;\n      } else if (song.lyric.endsWith('.xlrc')) {\n        this.isLrc = true;\n        this.hasTranslation = true;\n      } else {\n        this.isLrc = false;\n        this.hasTranslation = false;\n      }\n      BaiHatService.getLyric(song.lyric)\n        .then((res) => {\n          if (res === LYRIC_NOT_FOUND) this.setNoLyric();\n          else this.saveLyric(res);\n        })\n        .catch((err) => {\n          console.log(err);\n          Toast.error(err);\n        });\n    } else {\n      this.setNoLyric();\n    }\n  };\n\n  saveLyric = (lyric) => {\n    this.lines = lyric.trim().split('\\n');\n    this.initLyric();\n  };\n\n  isNoLyric = () => {\n    return this.lines.length === 0;\n  };\n\n  setNoLyric = () => {\n    this.lines = [];\n    this.initLyric();\n  };\n\n  initLyric = () => {\n    this.setPlayLyricInterval();\n    this.div_result.innerHTML = '';\n    this.startTimes = [];\n    this.endTimes = [];\n    this.tranMaps = [];\n    this.cntWord = 0;\n    this.offsetTime = 0;\n    this.currWordID = -1;\n    this.playerInstance.playAudio();\n\n    if (this.isNoLyric()) {\n      this.div_result.innerHTML = NO_LYRIC;\n    } else {\n      this.metaExist = false;\n      this.lyricMeta = {};\n      this.div_result.innerHTML = '';\n      if (this.isLrc) this.initLrcLyric();\n      else this.initTrcLyric();\n    }\n\n    this.initSettingsAtPlayer();\n  };\n\n  initTrcLyric = async () => {\n    let temp, startLine, words, startWord, endWord, divLine;\n\n    // Note: dùng \"for in\" ko được, phải dùng \"for await of\"\n    // Ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of\n    for await (let line of this.lines) {\n      temp = line.match(/\\[\\d+:\\d+\\.\\d+\\]/g); // ex: temp = [\"[1:15.047]\"]\n      if (temp != null) {\n        startLine = decodeTime(temp[0]); // ex: 75.047\n        temp = line.substring(temp[0].length); // ex: <271>I <256>keep <790>saying <1254>no\n        words = temp.match(/<\\d+>[^<]*/g);\n        divLine = createNewElement('div', null, 'line');\n\n        if (words == null) {\n          // Trường hợp này xảy ra với các file lyric cũ của TTPod, nó có 1-2 dòng như này:\n          // [99:00.100]好音质,天天动听!\n          // (Ko có millisecond, chẳng hạn <123>) Tốt nhất là ignore\n          continue;\n        }\n\n        startWord = startLine;\n        for await (let word of words) {\n          // match(/\\d+/)[0]: lấy số đầu tiên trong string này\n          // VD: string này có dạng: \"<123>demo \" thì kết quả là 123\n          // VD: string này có dạng: \"<123>demo 949\" thì kết quả là 123\n          endWord = startWord + parseFloat(word.match(/\\d+/)[0]) / 1000;\n          endWord = myParseFloat(endWord);\n\n          // Do lưu time vào 2 mảng startTimes và endTimes nên việc\n          // thêm attribute time-start và time-start chỉ dùng để debug\n          let spanWord = createNewElement('span', 'word-' + this.cntWord, 'not-pass-word', {\n            'time-start': startWord,\n            'time-end': endWord\n          });\n          spanWord.innerText = word.replace(/<\\d+>/, '');\n          if (spanWord.innerText.trim() === '') {\n            spanWord.innerHTML = '&nbsp;';\n            spanWord.setAttribute('is-empty', '1');\n          }\n          this.startTimes[this.cntWord] = startWord;\n          this.endTimes[this.cntWord] = endWord;\n\n          startWord = endWord;\n          this.cntWord++;\n          divLine.appendChild(spanWord);\n        }\n        this.div_result.appendChild(divLine);\n      } else {\n        this.readLyricMeta(line);\n      }\n    }\n\n    this.appendLyricMeta();\n  };\n\n  initLrcLyric = async () => {\n    let lineTime = '',\n      lineTimeLen,\n      lineTranTag,\n      tranNum,\n      lineTranText,\n      lineWords,\n      startLine;\n    let lineMap = new Map(); // key là 1 phần tử trong mảng startTimes\n\n    // Map<tranNum, Map<startLine, lineTranText>>\n    let lineTranMap = new Map();\n\n    // 1. Parse lyric\n\n    // ex: line = \"[01:53.41][00:28.13]Người theo hương hoa \"\n    for await (let line of this.lines) {\n      // lineTime có thể có 1 hoặc nhiều phần tử, ex: lineTime = ['[01:53.41]', '[00:28.13]']\n      lineTime = line.match(/\\[\\d+:\\d+\\.\\d+\\]/g);\n\n      // Dòng có lineTranTag là dòng dịch, có thể có nhiều loại ngôn ngữ khác nhau, ex:\n      // [tran1]Wǒmen táitóu wàng tiānkōng\n      // [tran2]We raise our heads to the sky\n      // ex: lineTranTag = ['[tran1]'], should have only 1 element\n      lineTranTag = line.match(/\\[tran\\d+\\]/g);\n\n      if (lineTime != null) {\n        // ex: lineTimeLen = length của [01:53.41][00:28.13] = 20\n        lineTimeLen = lineTime.reduce((total, curr) => total + curr.length, 0);\n        lineWords = line.substring(lineTimeLen); // ex: \"Người theo hương hoa \"\n\n        for await (const lineT of lineTime) {\n          startLine = decodeTime(lineT); // ex: startLine = decodeTime('[01:53.41]') = 113.41\n          this.startTimes[this.cntWord] = startLine;\n\n          // ex: lineMap = { 113.41 => \"Người theo hương hoa \", 28.13 => \"Người theo hương hoa \" }\n          lineMap.set(startLine, lineWords);\n\n          this.cntWord++;\n        }\n      } else if (lineTranTag != null) {\n        // Vì lineTranTag bắt buộc phải theo sau lineTime nên ta có thể dùng startLine để làm key cho mỗi lineTranTag\n        tranNum = lineTranTag[0].substring(1, lineTranTag[0].length - 1); // ex: tranNum = 'tran1'\n        lineTranText = line.substring(lineTranTag[0].length);\n        if (!lineTranMap.has(tranNum)) {\n          lineTranMap.set(tranNum, new Map());\n        }\n        lineTranMap.get(tranNum).set(startLine, lineTranText);\n      } else {\n        this.readLyricMeta(line);\n      }\n    }\n\n    this.startTimes.sort(function (a, b) {\n      return a - b;\n    });\n\n    // 2. Generate lyric (HTML) to display\n\n    for (let i = 0; i < this.startTimes.length; i++) {\n      let divLine = createNewElement('div', null, 'line');\n\n      let spanWord = createNewElement('span', 'word-' + i, 'not-pass-word', null);\n      spanWord.innerText = lineMap.get(this.startTimes[i]);\n      if (spanWord.innerText === '') {\n        spanWord.innerHTML = '&nbsp';\n        spanWord.setAttribute('is-empty', '1');\n      }\n      divLine.appendChild(spanWord);\n\n      // Add translation\n      if (lineTranMap.size > 0) {\n        for (let [key, value] of lineTranMap) {\n          if (value.has(this.startTimes[i])) {\n            let spanTran = createNewElement('div', null, 'line-tran ' + key, null);\n            spanTran.innerText = value.get(this.startTimes[i]);\n            divLine.appendChild(spanTran);\n          }\n        }\n      }\n\n      this.div_result.appendChild(divLine);\n    }\n    this.appendLyricMeta();\n\n    for (let i = 0; i < this.startTimes.length - 1; i++) {\n      this.endTimes[i] = this.startTimes[i + 1];\n    }\n    this.endTimes[this.startTimes.length - 1] = this.myAudio.duration;\n  };\n\n  // Note: có trường hợp 1 dòng meta có ký tự đặc biệt, chẳng hạn: '[by: Tuzaku]\\r'\n  // Lúc này substring sẽ bị bug: this.lyricMeta.by = \"Tuzaku]\"\n  // Cái bug đó ko nhiều, kệ, khỏi fix! => Đã fix\n  readLyricMeta = (line = '') => {\n    const end = line.lastIndexOf(']');\n    if (line.includes('offset:')) {\n      // ex: [offset:-200]\n      this.offsetTime = line.match(/[0-9|-]+/g);\n      this.offsetTime = parseInt(this.offsetTime);\n    } else if (line.includes('[author:')) {\n      // ex: [author:Tuzaku]\n      // deprecated, lyric file should use [by:] instead\n      this.metaExist = true;\n      this.lyricMeta.by = line.substring('[author:'.length, end).trim();\n    } else if (line.includes('[by:')) {\n      // ex: [by:Tuzaku]\n      this.metaExist = true;\n      this.lyricMeta.by = line.substring('[by:'.length, end).trim();\n    } else if (line.includes('[createdDate:')) {\n      // ex: [createdDate:2021-06-28]\n      // deprecated, lyric file should use [date:] instead\n      this.metaExist = true;\n      this.lyricMeta.date = line.substring('[createdDate:'.length, end).trim();\n    } else if (line.includes('[date:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.date = line.substring('[date:'.length, end).trim();\n    } else if (line.includes('[source:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.source = line.substring('[source:'.length, end).trim();\n    } else if (line.includes('[ti:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.title = line.substring('[ti:'.length, end).trim();\n    } else if (line.includes('[ar:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.artist = line.substring('[ar:'.length, end).trim();\n    }\n  };\n\n  appendLyricMeta = () => {\n    if (this.metaExist) {\n      this.div_result.appendChild(createNewElement('div', null, 'line-meta')); // empty line\n      let divLine = createNewElement('div', null, 'line-meta');\n      divLine.innerText = '-----------';\n      this.div_result.appendChild(divLine);\n\n      const divLyricInfo = createNewElement('div', null, 'lyric-info');\n      this.div_result.appendChild(divLyricInfo);\n\n      // Song meta\n      if (this.lyricMeta.title) {\n        divLine = createNewElement('div', null, 'line-meta', { style: 'font-weight:bold' });\n        divLine.innerText = this.lyricMeta.title + ' - ' + this.lyricMeta.artist;\n        divLyricInfo.appendChild(divLine);\n      }\n\n      // Lyric meta\n      if (this.lyricMeta.by) {\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Lyric creator: ' + this.lyricMeta.by;\n        divLyricInfo.appendChild(divLine);\n      }\n      if (this.lyricMeta.source) {\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Source: ' + this.lyricMeta.source;\n        divLyricInfo.appendChild(divLine);\n      }\n      if (this.lyricMeta.date) {\n        const d = new Date(this.lyricMeta.date);\n        const dStr = isValidDate(d) ? formatDateMY(d) : d;\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Date: ' + dStr;\n        divLyricInfo.appendChild(divLine);\n      }\n    }\n  };\n\n  setPlayLyricInterval = () => {\n    if (this.myAudio && !this.myAudio.paused) {\n      this.playLyricInterval = setInterval(() => {\n        this.updateLyric();\n      }, 30);\n    }\n  };\n\n  clearPlayLyricInterval = () => {\n    if (this.playLyricInterval) clearInterval(this.playLyricInterval);\n    this.playLyricInterval = null;\n  };\n\n  onSeeked = () => {\n    this.clearCountdownInterval();\n    if (!this.playLyricInterval) {\n      this.updateLyric();\n    }\n    setTimeout(() => {\n      if (!this.isNoLyric()) {\n        this.reUpdateWordPass();\n      }\n    }, 0);\n    this.scrollLyric();\n  };\n\n  onPause = () => {\n    this.clearCountdownInterval();\n    this.clearPlayLyricInterval();\n    this.setState({ isPlaying: false, spinning: false });\n    if (this.waveformInstance) this.waveformInstance.stopWaveform();\n  };\n\n  onPlay = () => {\n    if (!this.playLyricInterval) this.setPlayLyricInterval();\n    this.setState({ isPlaying: true, spinning: true });\n    if (this.myAudio.currentTime === 0) {\n      const path = this.props.match.params.id;\n      if (path) {\n        setTimeout(() => {\n          let currPath = this.props.match.params.id;\n          if (currPath === path) {\n            BaiHatService.updateListen(path)\n              .then((res) => {\n                console.log(res);\n              })\n              .catch((err) => {\n                console.log(err);\n                Toast.error(err);\n              });\n          }\n        }, 60000); // nghe 1 bài quá 1 phút mới tính 1 lượt nghe\n      }\n      setTimeout(() => {\n        // re-update passed words (in fact, all words are not passed words)\n        if (getById('word-0') && !this.isNoLyric()) {\n          for (let i = 0; i < this.cntWord; i++) {\n            getById('word-' + i).classList.add('not-pass-word');\n          }\n        }\n      }, 0);\n    }\n    if (this.state.showWaveform && this.waveformInstance) this.drawWave();\n  };\n\n  countdownAtEmptyWord = (currWord) => {\n    let nextWord = getById('word-' + (this.currWordID + 1));\n    if (nextWord) {\n      let timeDiff = this.endTimes[this.currWordID] - this.startTimes[this.currWordID];\n      let timeLeft = this.endTimes[this.currWordID] + this.offsetTime / 1000 - this.myAudio.currentTime;\n      if ((timeDiff >= 5 && timeLeft <= 5) || (timeDiff >= 3 && timeLeft <= 3)) {\n        BaiHatService.setBulletText(this.lyric_playground, currWord, Math.ceil(timeLeft));\n      }\n    }\n  };\n\n  updateLyric = async () => {\n    if (this.isNoLyric()) {\n      this.clearPlayLyricInterval();\n      return;\n    }\n\n    let prevWord, prevParent;\n\n    // Chạy hiệu ứng karaoke cho từ hiện tại\n    if (this.currWordID >= 0) {\n      const st = this.startTimes[this.currWordID] + this.offsetTime / 1000;\n      const en = this.endTimes[this.currWordID] + this.offsetTime / 1000;\n      const currWord = getById('word-' + this.currWordID);\n\n      if (st <= this.myAudio.currentTime && en >= this.myAudio.currentTime) {\n        // TODO change this to state variable, or class variable (karaokeMode)\n        if (this.div_result.classList.contains('karaoke-mode')) {\n          BaiHatService.runKaraokeEffect(this.lyric_playground, this.myAudio, currWord, st, en);\n        }\n        if (currWord.getAttribute('is-empty') === '1') {\n          this.countdownAtEmptyWord(currWord);\n        }\n\n        return;\n      }\n\n      // Sau khi myAudio.currentTime nằm ngoài khoảng [st:en] thì đã đi qua\n      // word hiện tại, lúc này currWord sẽ trở thành preWord\n      prevWord = getById('word-' + this.currWordID);\n      if (prevWord && prevWord.getAttribute('is-empty') === '1') {\n        // Xóa bullet text ở từ trước đó, thường thì từ đó sẽ đứng trên 1 empty line\n        BaiHatService.setBulletText(this.lyric_playground, prevWord, 0);\n      }\n\n      // Có thể từ trước đó mới chỉ fill 95% chẳng hạn, ta cần fill nốt từ đó\n      BaiHatService.fillKaraokeWord(this.lyric_playground, prevWord);\n\n      prevParent = prevWord.parentNode;\n      prevWord.classList.remove('word-active', 'curr-word');\n    }\n\n    // Sau khi chạy xong hiệu ứng karaoke cho từ hiện tại, word này trở thành prevWord,\n    // cần tìm currWord mới, sau đó thêm các class cho currWord, currLine,\n    // các từ trước và sau currWord ở trên cùng 1 line\n    this.gotoNextWord(prevWord, prevParent);\n  };\n\n  gotoNextWord = async (prevWord, prevParent) => {\n    this.currWordID = this.getCurrentWordByTime(this.myAudio.currentTime);\n    if (this.currWordID >= 0) {\n      const currWord = getById('word-' + this.currWordID);\n      const currParent = currWord.parentNode;\n\n      currWord.classList.add('word-active', 'curr-word');\n      currWord.classList.remove('not-pass-word');\n\n      if (prevParent !== currParent) {\n        if (prevParent) {\n          prevParent.classList.remove('line-active');\n          for await (let child of prevParent.children) {\n            if (child === prevWord) break;\n            child.classList.remove('word-active');\n          }\n        }\n\n        currParent.classList.add('line-active');\n      }\n      this.activeAtCurr(currWord, currParent);\n    } else {\n      this.removeActiveLastLine();\n    }\n  };\n\n  /**\n   * Active các từ trước currWord, và remove active cho các từ phía sau currWord\n   * @param {HTMLElement} currWord tag này là current word\n   * @param {HTMLElement} currParent tag này là cha chứa current word ở trên\n   */\n  activeAtCurr = (currWord, currParent) => {\n    let currIndex;\n    for (let i = 0; i < currParent.children.length; i++) {\n      if (currParent.children[i] === currWord) {\n        currIndex = i;\n        break;\n      }\n      currParent.children[i].classList.add('word-active');\n    }\n    for (let i = currIndex + 1; i < currParent.children.length; i++) {\n      if (!currParent.children[i].classList.contains('word-active')) break;\n      currParent.children[i].classList.remove('word-active');\n    }\n\n    // scroll\n    if (currWord === currParent.childNodes[0]) {\n      setTimeout(() => {\n        this.scrollLyric();\n      }, 110); // phải chờ cho CSS transition xong mới get được height đúng\n    }\n  };\n\n  /**\n   * Chạy hết nhạc thì xóa active ở dòng cuối cùng\n   */\n  removeActiveLastLine = async () => {\n    const finalLine = getById('word-' + (this.cntWord - 1)).parentNode;\n    if (finalLine.classList.contains('line-active')) {\n      finalLine.classList.remove('line-active');\n      for await (let child of finalLine.children) {\n        child.classList.remove('word-active');\n      }\n    }\n  };\n\n  // TODO khi hết bài cần scroll xuống cuối cùng (metadata), nếu không có info không thấy được\n  scrollLyric = (currWord = null) => {\n    if (currWord == null) {\n      currWord = getById('word-' + this.currWordID);\n    }\n    if (currWord != null) {\n      this.div_result.scrollTop =\n        20 +\n        currWord.parentNode.offsetTop -\n        getById('word-0').offsetTop -\n        this.div_result.offsetHeight / 2 +\n        currWord.parentNode.clientHeight / 2; // height of parent of currWord (div.line.active-line)\n    }\n  };\n\n  getCurrentWordByTime = (sec) => {\n    let lo = 0,\n      hi = this.cntWord - 1;\n    let mid, st, en;\n\n    while (lo <= hi) {\n      mid = parseInt((lo + hi) / 2);\n      st = this.startTimes[mid] + this.offsetTime / 1000;\n      en = this.endTimes[mid] + this.offsetTime / 1000;\n\n      if (st <= sec && en >= sec) {\n        // Nếu như có 2 từ có khoảng thời gian bị chồng\n        // lên nhau thì ta ưu tiên từ đứng đằng sau\n        st = this.startTimes[mid + 1] + this.offsetTime / 1000;\n        en = this.endTimes[mid + 1] + this.offsetTime / 1000;\n        if (st <= sec && en >= sec) return mid + 1;\n        else return mid;\n      } else if (st > sec) hi = mid - 1;\n      else lo = mid + 1;\n    }\n\n    if (mid === 0 || mid === this.cntWord - 1) mid = -1;\n    else {\n      // ko tìm thấy thẻ nào có st <= sec <= en (do lyric bị sai).\n      // tuy vậy, vẫn return thẻ gần đó nhất\n      // if(mid)\n      if (mid && mid !== this.currErrWord) {\n        Toast.warn(`Warning: lyric is not correct near \"${getById('word-' + mid).innerText}\"`);\n        this.currErrWord = mid;\n      }\n    }\n\n    // delete interval when finish song!\n    if (sec > this.endTimes[this.cntWord - 1]) this.clearPlayLyricInterval();\n\n    return mid;\n  };\n\n  clearCountdownInterval = () => {\n    clearInterval(this.countdownInterval);\n    this.countdownInterval = null;\n  };\n\n  reUpdateWordPass = () => {\n    // this.currWordID giờ sẽ là vị trí mới sau thao tác seek nhảy tới\n    this.currWordID = this.getCurrentWordByTime(this.myAudio.currentTime);\n    if (this.currWordID >= 0) {\n      for (let i = 0; i < this.currWordID; i++) {\n        let passedWord = getById('word-' + i);\n        passedWord.classList.remove('not-pass-word');\n        if (passedWord.getAttribute('is-empty') === '1') {\n          passedWord.innerHTML = '&nbsp;'; // remove bullet text\n        }\n        BaiHatService.fillKaraokeWord(this.lyric_playground, passedWord);\n        this.removeLineActive(passedWord);\n      }\n      for (let i = this.currWordID; i < this.cntWord; i++) {\n        let notPassWord = getById('word-' + i);\n        notPassWord.classList.add('not-pass-word');\n        if (notPassWord.getAttribute('is-empty') === '1') {\n          notPassWord.innerHTML = '&nbsp;'; // remove bullet text\n        }\n        BaiHatService.emptyKaraokeWord(notPassWord);\n        this.removeLineActive(notPassWord);\n      }\n      // addLineActive\n      getById('word-' + this.currWordID).parentNode.classList.add('line-active');\n    }\n  };\n\n  removeLineActive = (child) => {\n    if (child.parentNode.classList.contains('line-active')) {\n      child.parentNode.classList.remove('line-active');\n    }\n  };\n\n  toggleSetting = (isShow) => {\n    this.setState({\n      showSetting: isShow\n    });\n  };\n\n  toggleFullscreen = () => {\n    const isFullscreen = !this.state.isFullscreen;\n    if (isFullscreen) {\n      this.setFullscreen();\n    } else {\n      this.unsetFullscreen();\n    }\n    this.setState({ isFullscreen });\n    saveSetting('fullscreen', isFullscreen);\n    setTimeout(() => {\n      this.scrollLyric();\n    }, 350);\n  };\n\n  toggleWaveform = () => {\n    const showWaveform = !this.state.showWaveform;\n    this.setState({ showWaveform }, () => {\n      if (!this.waveformInstance) return;\n      if (showWaveform) this.drawWave();\n      else this.waveformInstance.stopWaveform();\n    });\n    saveSetting('showWaveform', showWaveform);\n  };\n\n  drawWave = async () => {\n    // phải đợi analyzer khởi tạo xong mới draw waveform được\n    await this.initAnalyzer();\n    this.waveformInstance.drawWaveform();\n  };\n\n  setFullscreen = () => {\n    let body_wrapper = getByClass('body_wrapper');\n    document.body.classList.add('overflow-hidden');\n    body_wrapper.classList.add('body-fs');\n    body_wrapper.classList.remove('body-normal');\n  };\n\n  unsetFullscreen = () => {\n    let body_wrapper = getByClass('body_wrapper');\n    document.body.classList.remove('overflow-hidden');\n    body_wrapper.classList.remove('body-fs');\n    body_wrapper.classList.add('body-normal');\n    setTimeout(() => {\n      scrollPage(this.lyric_playground, 300);\n    }, 200);\n  };\n\n  onSearch = (obj) => {\n    filterTable('songTable', 1, obj.value ? obj.value : '');\n  };\n\n  render() {\n    const { songData, song, showSetting, isFullscreen, isPlaying, spinning, showWaveform, flipWaveform, analyser } = this.state;\n    const { theme } = this.context;\n    let songURL;\n    if (song.zing_id) {\n      songURL = song.zingStream;\n    } else {\n      songURL = song?.file_name ? getAbsoluteUrl('/api/song/file?file=' + song.file_name) : null;\n    }\n    const image_url = song?.image_url ? getAbsoluteUrl(song.image_url) : spinImage;\n    const backgroundURL = `url(${song?.image_url ? \"'\" + getAbsoluteUrl(song.image_url) + \"'\" : backgroundImage})`;\n\n    return (\n      <div\n        className={`body_wrapper ${theme === THEME_LIGHT ? 'body-light' : 'body-dark'} ${\n          isFullscreen ? 'body-fs' : 'body-normal'\n        }`}\n      >\n        <div id=\"all-song-wrapper\">\n          <div className=\"edit-time\">Posted on: Sep 3, 2021. Last modified: {buildDate ? buildDate : 'Sep 3, 2021'}.</div>\n          {songData && songData.length !== 0 && (\n            <BaiHatTable\n              songData={songData}\n              currSong={song}\n              getAllSongs={this.getAllSongs}\n              playSong={this.playSong}\n              onSearch={this.onSearch}\n              isPlaying={isPlaying}\n            />\n          )}\n        </div>\n\n        <Player\n          song={song}\n          songURL={songURL}\n          onSeeked={this.onSeeked}\n          onPause={this.onPause}\n          onPlay={this.onPlay}\n          ref={(node) => {\n            this.child = node;\n          }}\n          getPlayerInstance={(playerInstance) => {\n            this.playerInstance = playerInstance;\n          }}\n          playSong={this.playSong}\n        />\n\n        <div id=\"lyric_playground\" ref={(node) => (this.lyric_playground = node)} className=\"lyric-pg-picture-bg\">\n          <div className=\"background-wrapper\">\n            <div\n              id=\"div_background\"\n              ref={(node) => (this.div_background = node)}\n              className=\"bg-image\"\n              style={{ backgroundImage: backgroundURL, textAlign: 'center' }}\n            ></div>\n          </div>\n          <div className=\"lyric-wrapper\">\n            <div id=\"div_left_wrapper\" className=\"left-wrapper\" ref={(node) => (this.div_left_wrapper = node)}>\n              <img\n                id=\"spinning_img\"\n                crossOrigin=\"anonymous\"\n                style={{ cursor: 'pointer' }}\n                className={`left_img spinning ${spinning ? '' : 'paused-spin'}`}\n                src={image_url}\n                alt=\"Left info\"\n                onClick={() => {\n                  this.setState({ spinning: !spinning });\n                }}\n              />\n              <canvas id=\"spinning_canvas\" style={{ display: 'none' }}></canvas>\n              <LeftPlayground\n                toggleWaveform={this.toggleWaveform}\n                showWaveform={showWaveform}\n                flipWaveform={flipWaveform}\n                analyser={analyser}\n                initAnalyzer={this.initAnalyzer}\n                myAudio={this.myAudio}\n                getWaveformInstance={(waveformInstance) => {\n                  this.waveformInstance = waveformInstance;\n                }}\n                song={song}\n              />\n            </div>\n            <div\n              id=\"div_result\"\n              className=\"custom-scrollbar karaoke-mode div-res-big-active-line\"\n              style={{ textAlign: 'center' }}\n              ref={(node) => (this.div_result = node)}\n              onClick={() => this.toggleSetting(false)}\n            ></div>\n          </div>\n\n          <Setting\n            div_result={this.div_result}\n            lyric_playground={this.lyric_playground}\n            div_background={this.div_background}\n            div_left_wrapper={this.div_left_wrapper}\n            myAudio={this.myAudio}\n            showSetting={showSetting}\n            isFullscreen={isFullscreen}\n            scrollLyric={this.scrollLyric}\n            initSettingsAtPlayer={(func) => (this.initSettingsAtPlayer = func)}\n            openSetting={() => this.toggleSetting(true)}\n            updateFlipWaveform={(flip) => this.setState({ flipWaveform: flip })}\n          />\n\n          <div className={`${isFullscreen ? 'setbot_fs' : ''} setting_bottom`}>\n            <i className=\"fa fa-arrows-alt btn_align btn_fullscreen\" onClick={this.toggleFullscreen}></i>\n          </div>\n          <div style={{ clear: 'both' }}></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(BaiHat);\n","\n// This file is automatically generated by generateBuildInfo.js at build time. DO NOT EDIT!!!\n// Ref: Copilot\nexport const buildDate = \"Jun 1, 2025\";\n"],"sourceRoot":""}