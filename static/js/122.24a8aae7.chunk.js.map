{"version":3,"file":"static/js/122.24a8aae7.chunk.js","mappings":"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","sources":["service/axiosClient.js","pages/BaiHat/BaiHatService.js","components/Input/SearchBox.js","components/Modal/Modal.jsx","pages/BaiHat/BaiHatTable.js","pages/BaiHat/Player.js","service/scroll.js","pages/BaiHat/Setting.js","pages/BaiHat/Waveform.js","pages/BaiHat/LeftPlayground.js","components/LyricCard/LyricSelectionModal.jsx","components/LyricCard/CardConfiguration.jsx","components/LyricCard/LyricDownloadModal.jsx","components/LyricCard/LyricCardModal.jsx","buildInfo.js","pages/BaiHat/BaiHat.js","components/Auth/Auth.js","components/Toast/Toast.js"],"sourcesContent":["import axios from 'axios';\nimport queryString from 'query-string';\nimport { ACCESS_TOKEN } from '../constants/Constants';\nimport { auth } from '../components/Auth/Auth';\n\nconst cleanParam = (obj) => {\n  Object.keys(obj).forEach((k) => {\n    if (obj[k] === null || obj[k] === undefined) {\n      delete obj[k];\n    }\n  });\n  return obj;\n};\n\naxios.interceptors.request.use(\n  function (config) {\n    const newConfig = {\n      ...config,\n      paramsSerializer: (params) =>\n        queryString.stringify(cleanParam(params), { arrayFormat: 'repeat' }),\n      baseURL: process.env.REACT_APP_HOST_API,\n      // withCredentials: true,\n      headers: {\n        ...config.headers,\n        Pragma: 'no-cache'\n      }\n    };\n\n    // Add auth token\n    if (localStorage.getItem(ACCESS_TOKEN)) {\n      newConfig.headers.Authorization = `Bearer ${localStorage.getItem(ACCESS_TOKEN)}`;\n    }\n\n    return newConfig;\n  },\n  (error) => {\n    console.log(error);\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    if (response && response.data) return response.data;\n    return response;\n  },\n  (error) => {\n    if (error.response && error.response.status) {\n      if (error.response.status === 401) {\n        auth.redirectToLoginPage();\n      }\n      //... handle other statuses\n      return Promise.reject(error.response);\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default axios;\n","import axiosClient from '../../service/axiosClient';\n\nconst getAllSongs = (params) => {\n  return axiosClient.get('/api/song/all', { params });\n};\n\nconst getLyric = (file) => {\n  return axiosClient.get('/api/lyric?file=' + file);\n};\n\nconst updateListen = (path) => {\n  return axiosClient.put('/api/song/listens?path=' + path);\n};\n\nconst getKaraokeWordStyle = (lyric_playground, process) => {\n  let isLightTheme = lyric_playground.classList.contains('lyric-pg-light');\n  return (\n    'background-image:' +\n    //\"-webkit-linear-gradient(top, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%), \" +\n    '-webkit-linear-gradient(left, ' +\n    (isLightTheme ? '#2199F9' : '#FC0') +\n    ' ' +\n    process +\n    '%, ' +\n    (isLightTheme ? '#333' : '#FFF') +\n    ' 0%)'\n  );\n};\n\nconst fillKaraokeWord = (lyric_playground, word) => {\n  word.setAttribute('style', getKaraokeWordStyle(lyric_playground, 100));\n};\n\nconst setBulletText = (lyric_playground, emptyWord, bullet) => {\n  let bulletArr = ['&nbsp;', '', '', '', '', ''];\n  emptyWord.innerHTML = bulletArr[bullet];\n  fillKaraokeWord(lyric_playground, emptyWord);\n};\n\nconst runKaraokeEffect = (lyric_playground, myAudio, currWord, st, en) => {\n  let process = ((myAudio.currentTime - st) * 100) / (en - st);\n  currWord.setAttribute('style', getKaraokeWordStyle(lyric_playground, process));\n};\n\nconst emptyKaraokeWord = (word) => {\n  word.setAttribute('style', '');\n};\n\nconst BaiHatService = {\n  getAllSongs,\n  getLyric,\n  updateListen,\n  getKaraokeWordStyle,\n  fillKaraokeWord,\n  setBulletText,\n  runKaraokeEffect,\n  emptyKaraokeWord\n};\n\nexport default BaiHatService;\n","import React, { PureComponent } from 'react';\nimport './Input.scss';\n\nconst DEFAULT_INPUT_MAX_LENGTH = 200;\nconst TYPING_INTERVAL = 300;\n\nclass SearchBox extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      errorMsg: '',\n      invalid: false,\n      focus: false\n    };\n    this.typingTimer = null;\n  }\n\n  onChange = (e) => {\n    const { value } = e.target;\n    const maxLength = this.props.maxLength ? this.props.maxLength : DEFAULT_INPUT_MAX_LENGTH;\n    let errorMsg = '';\n\n    if (value.length > maxLength) {\n      errorMsg = 'Max length of search text is: ' + maxLength;\n    } else if (!this.regexValidation(value)) {\n      errorMsg = this.props.regexErrorMsg ? this.props.regexErrorMsg : 'Search text is invalid';\n    }\n\n    this.setState({\n      value,\n      errorMsg\n    });\n  };\n\n  onKeyUp = (e, searchText) => {\n    if (e.keyCode === 13) {\n      // Enter\n      this.onSearch(searchText);\n    } else {\n      this.typingTimer = setTimeout(() => {\n        this.onSearch(searchText);\n      }, TYPING_INTERVAL);\n    }\n  };\n\n  onKeyDown = () => {\n    clearTimeout(this.typingTimer);\n  };\n\n  onSearch = () => {\n    let { value } = this.state;\n    this.props.onSearch({ name: this.props.name, value });\n  };\n\n  onClear = () => {\n    this.setState({\n      value: ''\n    });\n    this.props.onSearch({ name: this.props.name, value: null });\n  };\n\n  regexValidation = (value) => {\n    const regex = this.props.regex ? this.props.regex : '';\n    if (value === '' || regex === '') return true;\n    return value.match(regex);\n  };\n\n  render() {\n    const { name, label, disabled = false, isRequire = false, type = 'text', placeholder = 'Search...' } = this.props;\n\n    const { value, errorMsg } = this.state;\n\n    return (\n      <div className=\"input-wrapper\">\n        {label && (\n          <label className=\"input-label\">\n            {label}\n            {isRequire && <span className=\"input-require\">&nbsp;*</span>}\n          </label>\n        )}\n        <div className=\"input-search-wrapper\">\n          <i className=\"fa fa-search input-icon-search\" onClick={this.onSearch}></i>\n          <input\n            type={type}\n            name={name}\n            value={value}\n            disabled={disabled}\n            onChange={this.onChange}\n            className={'input-text input-text-search ' + (!!errorMsg ? ' input-error' : '')}\n            placeholder={placeholder}\n            onKeyUp={this.onKeyUp}\n            onKeyDown={this.onKeyDown}\n          />\n          {value && <i className=\"fa fa-times input-icon-clear\" onClick={this.onClear}></i>}\n          {!!errorMsg && <div className=\"input-error-msg\">{errorMsg}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchBox;\n","import React from 'react';\nimport './Modal.scss';\n\nconst Modal = (props) => {\n  return (\n    <div className=\"modal-wrapper\">\n      <span className=\"close\" title=\"Close\" onClick={props.onClose}>\n        &times;\n      </span>\n      <div className=\"modal-content\">{props.children}</div>\n      <div className=\"caption\">{props.caption}</div>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport SearchBox from '../../components/Input/SearchBox';\nimport Modal from '../../components/Modal/Modal';\nimport { getAbsoluteUrl } from '../../service/UtilService';\nimport musicIcon from '../../assets/icons/music_icon.jpg';\n\nconst BaiHatTable = (props) => {\n  const [showModalPicture, setShowModalPicture] = React.useState(false);\n  const [selectedSong, setSelectedSong] = React.useState(null);\n\n  const onClickPicture = (song) => {\n    if (song.image_url) {\n      setSelectedSong({ ...song });\n      setShowModalPicture(true);\n    }\n  };\n\n  const onCloseModal = () => {\n    setSelectedSong(null);\n    setShowModalPicture(false);\n  };\n\n  const caption = selectedSong ? selectedSong.artist + ' - ' + selectedSong.title : '';\n  const rainbowColors = [\n    // '#f80c12', // Lots of red, currently i don't want it\n    // '#ee1100',\n    '#ff3311',\n    '#ff4422',\n    '#ff6644',\n    '#ff9933',\n    '#feae2d',\n    '#ccbb33',\n    '#d0c310',\n    '#aacc22',\n    '#69d025',\n    '#22ccaa',\n    '#12bdb9',\n    '#11aabb',\n    '#4444dd',\n    '#3311bb',\n    '#3b0cbd',\n    '#442299'\n  ];\n  const lastSoyBg = rainbowColors[rainbowColors.length - 1];\n  const uniqueSoys = [...new Set(props.songData.map((song) => song.song_of_the_year).filter(Boolean))].sort((a, b) => b - a); // Descending: highest first\n  const getSoyBackgroundColor = (soy) => {\n    if (!soy) return lastSoyBg; // default color if no SOY\n    const index = uniqueSoys.indexOf(soy);\n    // console.log('getSoyBackgroundColor', soy, index);\n    return rainbowColors[index] || lastSoyBg;\n  };\n  const getSoyTextColor = (soy) => {\n    if (!soy) return '#fff'; // default color if no SOY\n    const index = uniqueSoys.indexOf(soy);\n    return index < rainbowColors.length / 2 ? '#000' : '#fff';\n  };\n\n  const imgModalStyle = {\n    width: '400px', // nu browser width >= 400px th img width cng ch 400px\n    maxWidth: '80%' //  resize theo with ca browser nu browser width < 400px\n  };\n\n  return (\n    <div id=\"all_songs\">\n      <div className=\"search-wrapper\">\n        <SearchBox name=\"searchText\" onSearch={props.onSearch} />\n      </div>\n      <div className=\"all-song-value custom-scrollbar\">\n        <table className=\"table_striped\" id=\"songTable\" cellSpacing=\"0\" cellPadding=\"0\">\n          <thead>\n            <tr>\n              <th style={{ textAlign: 'right' }}>No.</th>\n              <th\n                style={{ cursor: 'pointer', minWidth: '220px' }}\n                onClick={() => props.getAllSongs({ sortBy: 'title', sortOrder: 'ASC' })}\n              >\n                Song\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'listens', sortOrder: 'DESC' })}>\n                Listens\n              </th>\n              <th\n                style={{ cursor: 'pointer' }}\n                onClick={() => props.getAllSongs({ sortBy: 'song_of_the_year', sortOrder: 'DESC' })}\n                title=\"Song of the year\"\n              >\n                SOY\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'type', sortOrder: 'ASC' })}>\n                Type\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'createdDate', sortOrder: 'DESC' })}>\n                Date\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {props.songData.map((song, index) => {\n              const image_url = song.image_url ? getAbsoluteUrl(song.image_url) : musicIcon;\n              return (\n                <tr\n                  key={song.id}\n                  className={props.currSong && props.currSong.path === song.path ? 'tr-active' : ''}\n                  id={'tr-' + song.id}\n                >\n                  <td>{index + 1}</td>\n                  <td className=\"td-song-info\">\n                    <img\n                      className=\"song-picture\"\n                      src={image_url}\n                      alt={song.artist + ' - ' + song.title}\n                      onClick={() => onClickPicture(song)}\n                    />\n                    <a className=\"song-item\" href={'#/bai-hat/' + song.path} onClick={() => props.playSong(song)}>\n                      <div className=\"song-title\">{song.title}</div>\n                      <div className=\"song-artist\">{song.artist}</div>\n                    </a>\n                    <i className={'icon-play ' + (props.isPlaying ? 'playing' : 'pause')}></i>\n                  </td>\n                  <td>{song.listens}</td>\n                  <td>\n                    {song.song_of_the_year && (\n                      <span\n                        className=\"soy\"\n                        style={{\n                          background: getSoyBackgroundColor(song.song_of_the_year),\n                          color: getSoyTextColor(song.song_of_the_year)\n                        }}\n                        title={`Song of the Year: ${song.song_of_the_year}`}\n                      >\n                        {song.song_of_the_year}\n                      </span>\n                    )}\n                  </td>\n                  <td>{song.type}</td>\n                  <td>{song.formatCreatedDate}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n      {showModalPicture && (\n        <Modal onClose={onCloseModal} caption={caption}>\n          <img style={imgModalStyle} className=\"img-modal\" src={getAbsoluteUrl(selectedSong.image_url)} alt={caption} />\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default BaiHatTable;\n","import React, { PureComponent } from 'react';\nimport Toast from '../../components/Toast/Toast';\nimport { saveSetting, getSetting, shuffle } from '../../service/UtilService';\nimport { SEQUENCE, SHUFFLE, REPEAT_ONE } from '../../constants/Constants';\nimport favicon from '../../assets/icons/favicon.png';\nimport './Player.css';\n\nclass Player extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playType: SEQUENCE,\n      isPlaying: false\n    };\n    this.myAudio = React.createRef();\n    this.currentTime = React.createRef();\n    this.progressWrapper = React.createRef();\n    this.progressBar = React.createRef();\n    this.llPlayer = React.createRef();\n    this.llPlayPause = React.createRef();\n    this.duration = React.createRef();\n    this.mouseDown = false;\n    this.showCurrentTime = null;\n    this.playList = []; // danh sch bi ht s c pht\n    this.initPlayList = []; // danh sch ban u,  khi shuffle, xong li chuyn v sequence, th s ly list ny\n    this.activeAudio = 0; // Index of current song in playList\n  }\n\n  componentDidMount() {\n    // truyn instance ca class ny cho component cha,\n    //  thng cha c th gi cc function trong class ny\n    this.props.getPlayerInstance(this);\n  }\n\n  // Hin ti BE ko cn li ko get c duration ca API streaming MP3 na,\n  // nn tm thi ko cn show warning\n  // componentDidUpdate(prevProps) {\n  //   if (this.props.songURL !== prevProps.songURL) {\n  //     const interShowDurationIssue = setInterval(() => {\n  //       if (this.myAudio && this.myAudio.duration === Infinity) {\n  //         Toast.warn('Cannot get duration of this song from Zing');\n  //         clearInterval(interShowDurationIssue);\n  //       }\n  //     }, 1000);\n  //   }\n  // }\n\n  // Ref: https://developer.mozilla.org/en-US/docs/Web/API/MediaSession\n  setMediaSessionMeta = (title, artist, imgUrl) => {\n    if (!imgUrl) {\n      imgUrl = favicon;\n    }\n\n    if ('mediaSession' in window.navigator) {\n      window.navigator.mediaSession.metadata = new window.MediaMetadata({\n        title: title,\n        artist: artist,\n        artwork: [\n          { src: imgUrl, sizes: '96x96', type: 'image/png' },\n          { src: imgUrl, sizes: '128x128', type: 'image/png' },\n          { src: imgUrl, sizes: '192x192', type: 'image/png' },\n          { src: imgUrl, sizes: '256x256', type: 'image/png' },\n          { src: imgUrl, sizes: '384x384', type: 'image/png' },\n          { src: imgUrl, sizes: '512x512', type: 'image/png' }\n        ]\n      });\n      window.navigator.mediaSession.setActionHandler('previoustrack', this.prevSong);\n      window.navigator.mediaSession.setActionHandler('nexttrack', this.nextSong);\n      window.navigator.mediaSession.setActionHandler('play', this.playAudio);\n      window.navigator.mediaSession.setActionHandler('pause', this.pauseAudio);\n      window.navigator.mediaSession.setActionHandler('stop', this.pauseAudio);\n    } else {\n      console.log(\"Your browser doesn't not support MediaSession\");\n    }\n  };\n\n  // Mi ln parent mun i sang pht 1 danh sch khc th parent phi\n  // truyn danh sch pht mi  thng qua function ny, v phi setPlayType li,\n  // v nu playType = shuffle th cng cn shuffle li ci playList va c\n  // truyn vo  (m vic shuffle ny c thc hin trong function setPlayType)\n  setPlayList = (pl, activeAudioIdx) => {\n    // Note dng nh sau l sai nh:\n    // this.playList = pl;\n    // y l truyn tham chiu, do  nu sau ny thay i bin this.playList\n    // (shuffle n chng hn, th bin pl t component cha cng s thay i theo => hng)\n    this.playList = [...pl];\n    this.initPlayList = [...pl];\n    this.activeAudio = activeAudioIdx;\n    this.setPlayType(getSetting('playType'));\n  };\n\n  setActiveAudio = (song) => {\n    // Nu click Next/Previous button th s ri vo case ny: activeAudio  c update\n    //  2 function  ri\n    if (this.playList[this.activeAudio].id === song.id) return;\n\n    // Nu click trc tip trn songTable  pht bi mi th ta cn update li activeAudio\n    for (let i = 0; i < this.playList.length; i++) {\n      if (this.playList[i].id === song.id) {\n        this.activeAudio = i;\n        break;\n      }\n    }\n    console.log('reset ActiveAudio: ', this.activeAudio);\n  };\n\n  setMouseDown = () => {\n    this.mouseDown = true;\n  };\n\n  clearMouseDown = () => {\n    this.mouseDown = false;\n  };\n\n  // Trong app ny, vic toggle c p dng vi cc button c 2 state: ON, OFF.\n  // Toggle s ly gi tr mi ngc vi gi tr hin ti.\n  // Trong cc function toggle s KHNG update state, v s gi cc function abc() khc\n  //  bn chng setState, v c th c ch khc cng s gi cc function abc() ,\n  // nu update state trong toggle th ni khc gi abc() s ko update state c\n  toggleShuffle = () => {\n    this.state.playType === SHUFFLE ? this.setPlayType(SEQUENCE) : this.setPlayType(SHUFFLE);\n  };\n\n  toggleRepeat = () => {\n    this.state.playType === REPEAT_ONE ? this.setPlayType(SEQUENCE) : this.setPlayType(REPEAT_ONE);\n  };\n\n  togglePlay = () => {\n    this.state.isPlaying ? this.pauseAudio() : this.playAudio();\n  };\n\n  prevSong = () => {\n    const { playType } = this.state;\n    if (playType !== REPEAT_ONE) {\n      if (this.activeAudio === 0) {\n        Toast.warn('This is the first song of playing list!');\n        return;\n      } else this.activeAudio--;\n    }\n    this.props.playSong(this.playList[this.activeAudio], true);\n  };\n\n  nextSong = () => {\n    const { playType } = this.state;\n    if (playType !== REPEAT_ONE) {\n      if (this.activeAudio === this.playList.length - 1) {\n        Toast.warn('This is the last song of playing list. Please select another song manually to play!');\n        this.togglePlay(); // stop playing\n        return;\n      } else this.activeAudio++;\n    }\n    this.props.playSong(this.playList[this.activeAudio], true);\n  };\n\n  secsToMins = (time) => {\n    let int = Math.floor(time),\n      mins = Math.floor(int / 60),\n      secs = int % 60,\n      newTime = mins + ':' + ('0' + secs).slice(-2);\n\n    return newTime;\n  };\n\n  getCurrentTime = () => {\n    if (!this.myAudio) return;\n\n    const currentTimeFormatted = this.secsToMins(this.myAudio.currentTime),\n      currentTimePercentage = (this.myAudio.currentTime / this.getDuration()) * 100;\n\n    this.currentTime.innerText = currentTimeFormatted;\n    this.progressBar.style.width = currentTimePercentage + '%';\n\n    if (this.state.isPlaying) {\n      this.showCurrentTime = requestAnimationFrame(this.getCurrentTime);\n    } else {\n      cancelAnimationFrame(this.showCurrentTime);\n    }\n  };\n\n  showDuration = () => {\n    let durationFormatted = this.secsToMins(this.getDuration());\n    this.duration.innerText = durationFormatted;\n  };\n\n  /**\n   * Dng updateProgressBar cho c 2 event onClick v onMouseMove  khi user click v ko,\n   * sau  th th n vn tua c ti v tr user th chut\n   */\n  updateProgressBar = (e) => {\n    const totalWidth = this.progressWrapper.offsetWidth;\n    const offsetX = e.nativeEvent.offsetX; // https://stackoverflow.com/a/31520106/7688028\n    const offsetPercentage = offsetX / totalWidth;\n\n    if (this.mouseDown || e.type === 'click') {\n      this.myAudio.currentTime = this.getDuration() * offsetPercentage;\n      // Nu isPlaying = true, th vic update time  c thc hin  requestAnimationFrame  trn ri\n      if (!this.state.isPlaying) {\n        this.getCurrentTime();\n      }\n      this.props.onSeeked();\n    }\n  };\n\n  // Nu ko get c duration th API streaming MP3 pha BE b li, cn fix BE.\n  // Hin ti th BE cha c li ny, nhng nu chng may dnh th  duration = 10min\n  getDuration = () => {\n    return this.myAudio.duration === Infinity ? 600 : this.myAudio.duration;\n  };\n\n  playAudio = () => {\n    let playPromise = this.myAudio.play();\n\n    // In browsers that haven't yet supported this functionality,\n    // playPromise won't be defined.\n    if (playPromise !== undefined) {\n      playPromise\n        .then(() => {\n          // Automatic playback started!\n          this.setState({ isPlaying: true }, () => {\n            this.getCurrentTime();\n            this.props.onPlay();\n          });\n        })\n        .catch((error) => {\n          // Automatic playback failed.\n          this.pauseAudio();\n          console.log('Error playing file: ', error);\n          Toast.error('Li: KHNG th t ng pht nhc, do bn cha tng tc vi trang, hoc Zing khng cho php pht bi ny');\n        });\n    } else {\n      this.pauseAudio();\n      Toast.error(\"Your browser hasn't yet supported this functionality\");\n    }\n  };\n\n  pauseAudio = () => {\n    this.myAudio.pause();\n    this.props.onPause();\n    this.setState({ isPlaying: false });\n  };\n\n  // default = SEQUENCE\n  setPlayType = (pt = SEQUENCE) => {\n    this.setState({ playType: pt });\n    if (pt === SHUFFLE) {\n      const currSong = this.playList[this.activeAudio];\n\n      // Mi ln chn/chuyn sang pht ngu nhin s trn li danh sch pht\n      shuffle(this.playList);\n\n      // find and move the currSong to the head of playList\n      for (let i = 0; i < this.playList.length; i++) {\n        if (this.playList[i].id === currSong.id) {\n          [this.playList[i], this.playList[0]] = [this.playList[0], this.playList[i]]; // swap 2 elements\n          this.activeAudio = 0;\n          break;\n        }\n      }\n\n      // console.log(\n      //   'After shuffle: ',\n      //   this.playList.map((song) => `${song.id}: ${song.title} (${song.artist})`)\n      // );\n    } else {\n      const currSong = this.playList[this.activeAudio];\n      this.playList = [...this.initPlayList];\n\n      // find currSong and set activeAudio equal to currSong position\n      for (let i = 0; i < this.playList.length; i++) {\n        if (this.playList[i].id === currSong.id) {\n          this.activeAudio = i;\n          break;\n        }\n      }\n\n      // console.log(\n      //   'After sequence: ',\n      //   this.playList.map((song) => `${song.id}: ${song.title} (${song.artist})`)\n      // );\n    }\n\n    saveSetting('playType', pt);\n  };\n\n  render() {\n    const { song } = this.props;\n    const { playType, isPlaying } = this.state;\n\n    return (\n      <div\n        className={`ll_player ${isPlaying ? 'll-playing' : 'll-paused'}`}\n        onMouseDown={this.setMouseDown}\n        onMouseUp={this.clearMouseDown}\n        ref={(node) => (this.llPlayer = node)}\n      >\n        <div className=\"info\">\n          <div id=\"song_details\">\n            <div className=\"song_title\">{song.title}</div>\n            <div className=\"song_artist\">{song.artist}</div>\n            <div className=\"song_album\">({song.album ? song.album : 'No Album'})</div>\n          </div>\n        </div>\n\n        <div className=\"ll-btn-wrapper\">\n          <button\n            className={`ll-shuffle ${playType === SHUFFLE ? 'active' : ''}`}\n            title={`${playType === SHUFFLE ? 'Turn off shuffle' : 'Shuffle'}`}\n            onClick={this.toggleShuffle}\n          >\n            <div className=\"arrow\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button className=\"ll-button ll-btn-prev\" title=\"Previous\" onClick={this.prevSong}>\n            <div className=\"arrow arrow-transform\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button\n            className=\"ll-button ll-play-pause\"\n            title={isPlaying ? 'Pause' : 'Play'}\n            onClick={this.togglePlay}\n            ref={(node) => (this.llPlayPause = node)}\n          >\n            <div className=\"arrow arrow-transform\"></div>\n          </button>\n          <button className=\"ll-button ll-btn-next\" title=\"Next\" onClick={this.nextSong}>\n            <div className=\"arrow arrow-transform\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button\n            className={`ll-repeat ${playType === REPEAT_ONE ? 'active' : ''}`}\n            title=\"Repeat one\"\n            onClick={this.toggleRepeat}\n          ></button>\n        </div>\n\n        <div className=\"time\">\n          <span className=\"current-time\" ref={(node) => (this.currentTime = node)}>\n            0:00\n          </span>\n          <span\n            className=\"progress\"\n            ref={(node) => (this.progressWrapper = node)}\n            onClick={this.updateProgressBar}\n            onMouseMove={this.updateProgressBar}\n          >\n            <span ref={(node) => (this.progressBar = node)}></span>\n          </span>\n          <span className=\"duration\" ref={(node) => (this.duration = node)}>\n            0:00\n          </span>\n        </div>\n\n        <audio\n          ref={(node) => (this.myAudio = node)}\n          id=\"myAudio\"\n          preload=\"metadata\"\n          src={this.props.songURL}\n          onLoadedMetadata={this.showDuration}\n          onEnded={this.nextSong}\n          crossOrigin=\"anonymous\"\n        ></audio>\n      </div>\n    );\n  }\n}\n\nexport default Player;\n","function getRelativePos(elm) {\n  let pPos = elm.parentNode.getBoundingClientRect(), // parent pos\n    cPos = elm.getBoundingClientRect(), // target pos\n    pos = {};\n\n  pos.top = cPos.top - pPos.top + elm.parentNode.scrollTop;\n  pos.right = cPos.right - pPos.right;\n  pos.bottom = cPos.bottom - pPos.bottom;\n  pos.left = cPos.left - pPos.left;\n\n  return pos;\n}\n\n// From: https://gist.github.com/gre/1650294\nfunction easeInOutCubic(t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\nfunction easeInOutQuad(t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\n\n/**\n * Scroll to an element inside a container\n * Ch : element = th div. Nu element m l th span th n s scroll ln top ca container\n * @param {HTMLElement} container The wrapper element to do scrolling\n * @param {HTMLElement} element Element inside container. Scroll to its position\n * @param {Number} duration Time to scroll, in milisecond\n * @param {Number} offset sau khi scroll ti element, y n ln 1 on = offset (m = y xung)\n **/\nexport function scrollInsideElement(container, element, duration, offset = 0) {\n  let pos = getRelativePos(element);\n  let start = container.scrollTop,\n    change = pos.top - start,\n    startTime = performance.now(),\n    now,\n    elapsed,\n    t;\n\n  function animateScroll() {\n    now = performance.now();\n    elapsed = now - startTime;\n    t = elapsed / duration;\n\n    container.scrollTop = start + change * easeInOutQuad(t) + offset;\n\n    if (t < 1) window.requestAnimationFrame(animateScroll);\n  }\n\n  animateScroll();\n}\n\n/**\n * Scroll to an element inside a container, but element will be\n * in the center of container\n */\nexport function scrollInsideElementToCenter(container, element, duration) {\n  scrollInsideElement(container, element, duration, -container.offsetHeight / 2 + element.offsetHeight / 2);\n}\n\n/**\n * Scroll the page to an element's position (element nn l th div, ko phi span)\n * @param {HTMLElement} element the tag we wants browser to scroll to\n * @param {Number} duration scrolling time in milisecond\n */\nexport function scrollPage(element, duration) {\n  let startingY = window.pageYOffset;\n  let elementY = window.pageYOffset + element.getBoundingClientRect().top;\n\n  // If element is close to page's bottom then window will scroll only to some position above the element.\n  let targetY =\n    document.body.scrollHeight - elementY < window.innerHeight ? document.body.scrollHeight - window.innerHeight : elementY;\n  let diff = targetY - startingY;\n  let start;\n\n  if (!diff) return;\n\n  // Bootstrap our animation - it will get called right before next frame shall be rendered.\n  window.requestAnimationFrame(function step(timestamp) {\n    if (!start) start = timestamp;\n    // Elapsed miliseconds since start of scrolling.\n    let time = timestamp - start;\n\n    // Get percent of completion in range [0, 1].\n    let percent = Math.min(time / duration, 1);\n\n    // Apply the easing.\n    // It can cause bad-looking slow frames in browser performance tool, so be careful.\n    percent = easeInOutCubic(percent);\n\n    window.scrollTo(0, startingY + diff * percent);\n\n    // Proceed with animation as long as we wanted it to.\n    if (time < duration) {\n      window.requestAnimationFrame(step);\n    }\n  });\n}\n","import React, { PureComponent } from 'react';\nimport Toast from '../../components/Toast/Toast';\nimport { saveSetting, getSetting } from '../../service/UtilService';\nimport { scrollPage } from '../../service/scroll';\n\nclass Setting extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      volume: 100\n    };\n  }\n\n  onChangeVolume = (e) => {\n    const { value } = e.target;\n    const volume = value / 100;\n    this.setState({ volume: value });\n    this.props.myAudio.volume = volume;\n    saveSetting('volume', volume);\n  };\n\n  componentDidMount() {\n    this.props.initSettingsAtPlayer(this.initSettingsAtPlayer);\n  }\n\n  /**\n   * Init data for html element: lyric_playground, div_result and my_audio\n   * Ch yu init v css style ch ko thay i state g ca React component\n   */\n  initSettingsAtPlayer = () => {\n    const { myAudio, lyric_playground } = this.props;\n    let lyricAlign = getSetting('lyricAlign');\n    if (lyricAlign) this.settingLyricAlign(lyricAlign);\n\n    let theme = getSetting('theme');\n    if (theme) {\n      switch (theme) {\n        case 'dark':\n          this.changeTheme('dark');\n          break;\n        case 'light':\n          this.changeTheme('light');\n          break;\n        case 'picture-bg':\n          this.changeTheme('picture-bg');\n          break;\n        default:\n          break;\n      }\n    }\n\n    // changeAudioSpeed\n    let speed = getSetting('speed');\n    if (speed) myAudio.playbackRate = speed;\n\n    // changeAudioVolume\n    let vol = getSetting('volume');\n    if (vol) {\n      myAudio.volume = vol;\n      this.setState({ volume: vol * 100 });\n    }\n\n    this.setKaraokeMode(getSetting('karaokeMode'));\n    this.setBlurMode(getSetting('blurMode'));\n    this.setGiganticLine(getSetting('giganticLine'));\n    this.setWordAppear(getSetting('wordAppear'));\n    this.setLineAppear(getSetting('lineAppear'));\n    this.setTranslate(getSetting('translate'));\n    setTimeout(() => {\n      scrollPage(lyric_playground, 300);\n    }, 10);\n  };\n\n  updateSyncLyric = (offset) => {\n    this.props.updateSyncLyric(offset);\n  };\n\n  settingLyricAlign = (align) => {\n    this.props.div_result.style.textAlign = align;\n    saveSetting('lyricAlign', align);\n  };\n\n  settingTheme = (themeName) => {\n    this.changeTheme(themeName);\n    saveSetting('theme', themeName);\n  };\n\n  /**\n   * Note: Class theme s bt u = \"lyric-pg-\"\n   * Do  nhng class ko lin quan n theme KO c bt u = \"lyric-pg-\"\n   */\n  changeTheme = (themeName) => {\n    const { lyric_playground, div_background } = this.props;\n\n    div_background.style.display = themeName === 'picture-bg' ? '' : 'none';\n\n    lyric_playground.classList.forEach((className) => {\n      if (className.includes('lyric-pg-')) lyric_playground.classList.remove(className);\n    });\n    lyric_playground.classList.add('lyric-pg-' + themeName);\n  };\n\n  toggleKaraokeMode = () => {\n    if (!this.props.div_result.classList.contains('karaoke-mode')) {\n      this.setKaraokeMode(true);\n    } else {\n      this.setKaraokeMode(false);\n    }\n  };\n  setKaraokeMode = (isKaraokeMode) => {\n    const { div_result } = this.props;\n    if (isKaraokeMode === true) {\n      div_result.classList.add('karaoke-mode');\n      div_result.classList.remove('karaoke-off');\n      saveSetting('karaokeMode', true);\n    } else if (isKaraokeMode === false) {\n      div_result.classList.remove('karaoke-mode');\n      div_result.classList.add('karaoke-off');\n      saveSetting('karaokeMode', false);\n    }\n  };\n\n  toggleBlurMode = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('blur-mode')) {\n      this.setBlurMode(true);\n    } else {\n      this.setBlurMode(false);\n    }\n  };\n  setBlurMode = (isBlurMode) => {\n    const { div_result } = this.props;\n    if (isBlurMode === true) {\n      div_result.classList.add('blur-mode');\n      saveSetting('blurMode', true);\n    } else if (isBlurMode === false) {\n      div_result.classList.remove('blur-mode');\n      saveSetting('blurMode', false);\n    }\n  };\n\n  toggleGiganticLine = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('div-res-big-active-line')) {\n      this.setGiganticLine(true);\n    } else {\n      this.setGiganticLine(false);\n    }\n  };\n  setGiganticLine = (isGiganticLine) => {\n    const { div_result } = this.props;\n    if (isGiganticLine === true) {\n      div_result.classList.add('div-res-big-active-line');\n      saveSetting('giganticLine', true);\n    } else if (isGiganticLine === false) {\n      div_result.classList.remove('div-res-big-active-line');\n      saveSetting('giganticLine', false);\n    }\n  };\n\n  flipWaveform = () => {\n    let flip = getSetting('flipWaveform');\n    if (flip && flip === true) {\n      flip = false;\n    } else {\n      flip = true;\n    }\n    saveSetting('flipWaveform', flip);\n    Toast.info(`Flip waveform = ${flip}, refresh page to take effect!`);\n\n    // Hin ti vic update qua props ny CHA implement c, bn component Waveform KHNG\n    // nhn c gi tr mi sau mi ln update, vui lng F5!!!\n    this.props.updateFlipWaveform(flip);\n  };\n\n  toggleWordAppear = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('word-appear')) {\n      this.setWordAppear(true);\n    } else {\n      this.setWordAppear(false);\n    }\n  };\n  setWordAppear = (isWordAppear) => {\n    const { div_result } = this.props;\n    if (isWordAppear === true) {\n      div_result.classList.add('word-appear');\n      saveSetting('wordAppear', true);\n    } else if (isWordAppear === false) {\n      div_result.classList.remove('word-appear');\n      saveSetting('wordAppear', false);\n    }\n  };\n\n  toggleLineAppear = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('line-appear')) {\n      this.setLineAppear(true);\n    } else {\n      this.setLineAppear(false);\n    }\n  };\n  setLineAppear = (isLineAppear) => {\n    const { div_result } = this.props;\n    if (isLineAppear === true) {\n      div_result.classList.add('line-appear');\n      saveSetting('lineAppear', true);\n    } else if (isLineAppear === false) {\n      div_result.classList.remove('line-appear');\n      saveSetting('lineAppear', false);\n    }\n  };\n\n  toggleTranslate = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('translate')) {\n      this.setTranslate(true);\n    } else {\n      this.setTranslate(false);\n    }\n  };\n  setTranslate = (isTranslate) => {\n    const { div_result } = this.props;\n    if (isTranslate === true) {\n      div_result.classList.add('translate');\n      saveSetting('translate', true);\n    } else if (isTranslate === false) {\n      div_result.classList.remove('translate');\n      saveSetting('translate', false);\n    }\n  };\n\n  updateSpeed = (offset) => {\n    let speed = this.props.myAudio.playbackRate + offset;\n    speed = Number(speed.toFixed('1'));\n    this.props.myAudio.playbackRate = speed;\n    Toast.info('Speed: ' + speed + 'x');\n    saveSetting('speed', speed);\n  };\n\n  createLyricCard = () => {\n    this.props.createLyricCard();\n  };\n\n  render() {\n    const { showSetting, openSetting, isFullscreen } = this.props;\n    const { volume } = this.state;\n    return (\n      <div className=\"setting_section\" style={{ display: isFullscreen ? 'none' : '' }}>\n        {!showSetting && (\n          <div className=\"btn_toggle_setting\" title=\"Settings\" onClick={openSetting}>\n            <i className=\"fa fa-ellipsis-h\"></i>\n          </div>\n        )}\n\n        {!!showSetting && (\n          <div id=\"setting_wrapper\">\n            <div>\n              <span className=\"setting-legend\">Lyric:&nbsp;</span>\n              <i\n                className=\"fa fa-caret-up btn_sync_up\"\n                title=\"Sync lyric: -100ms (client only)\"\n                onClick={() => this.updateSyncLyric(-100)}\n              ></i>\n              <i\n                className=\"fa fa-caret-down btn_sync_down\"\n                title=\"Sync lyric: +100ms (client only)\"\n                onClick={() => this.updateSyncLyric(100)}\n              ></i>\n              <i className=\"setting_separator\">|</i>\n              <i\n                className=\"fa fa-align-left btn_align btn_align_left\"\n                title=\"Lyric left alignment\"\n                onClick={() => this.settingLyricAlign('left')}\n              ></i>\n              <i\n                className=\"fa fa-align-center btn_align btn_align_center\"\n                title=\"Lyric center\"\n                onClick={() => this.settingLyricAlign('center')}\n              ></i>\n              <i\n                className=\"fa fa-align-right btn_align btn_align_right\"\n                title=\"Lyric right alignment\"\n                onClick={() => this.settingLyricAlign('right')}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Theme:&nbsp;</span>\n              <i\n                className=\"fa fa-square btn_theme btn_theme_dark\"\n                title=\"Dark theme\"\n                onClick={() => this.settingTheme('dark')}\n              ></i>\n              <i\n                className=\"fa fa-square btn_theme btn_theme_light\"\n                title=\"Light theme\"\n                onClick={() => this.settingTheme('light')}\n              ></i>\n              <i\n                className=\"fa fa-picture-o btn_theme btn_theme_picture_bg\"\n                title=\"Picture background theme\"\n                onClick={() => this.settingTheme('picture-bg')}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Mode:&nbsp;</span>\n              <i\n                className=\"fa fa-microphone btn_theme btn_karaoke_mode\"\n                title=\"Karaoke mode\"\n                onClick={this.toggleKaraokeMode}\n              ></i>\n              <i className=\"fa fa-cloud btn_theme btn_blur_mode\" title=\"Blur mode\" onClick={this.toggleBlurMode}></i>\n              <i\n                className=\"fa fa-eye-slash btn_theme btn_word_appear\"\n                title=\"Word appears when time comes to it\"\n                onClick={this.toggleWordAppear}\n              ></i>\n              <i\n                className=\"fa fa-coffee btn_theme\"\n                title=\"Word & Line appears when time comes to it\"\n                onClick={this.toggleLineAppear}\n              ></i>\n              <i\n                className=\"fa fa-search-plus btn_theme btn_gigantic_line\"\n                title=\"Gigantic line\"\n                onClick={this.toggleGiganticLine}\n              ></i>\n              <i\n                className=\"fa fa-retweet btn_theme btn_flip_waveform\"\n                title=\"Flip waveform horizontally\"\n                onClick={this.flipWaveform}\n              ></i>\n              <i\n                className=\"fa fa-language btn_theme btn_translate\"\n                title=\"Lyric translation (only .xlrc lyric)\"\n                onClick={this.toggleTranslate}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Speed:&nbsp;</span>\n              <i\n                className=\"fa fa-plus-square btn_theme btn_increase_speed\"\n                title=\"Increase speed\"\n                onClick={() => this.updateSpeed(0.1)}\n              ></i>\n              <i\n                className=\"fa fa-minus-square btn_theme btn_decrease_speed\"\n                title=\"Decrease speed\"\n                onClick={() => this.updateSpeed(-0.1)}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Volume:&nbsp;</span>\n              <input type=\"range\" min=\"1\" max=\"100\" value={volume} className=\"slider-volume\" onChange={this.onChangeVolume} />\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Create Lyric Card:&nbsp;</span>\n              <i className=\"fa fa-quote-right btn_theme\" onClick={this.createLyricCard}></i>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Setting;\n","import React from 'react';\nimport debounce from 'debounce-promise';\nimport { getAverageRGB } from '../../service/UtilService';\n\n/**\n * Ref: https://www.codehim.com/vanilla-javascript/javascript-audio-waveform-visualizer/\n */\nclass Waveform extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n    this.waveformAniFr = null;\n  }\n\n  componentDidMount() {\n    this.props.getWaveformInstance(this);\n    window.onresize = debounce(this.drawWaveform, 300);\n  }\n\n  drawWaveform = () => {\n    const { flipWaveform, analyser } = this.props;\n    if (!analyser) return;\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n    const canvasContext = this.canvas.getContext('2d');\n    const bufferLength = analyser.frequencyBinCount; // = fftSize/2\n\n    // v c nhiu phn t cui ca mng dataArray = 0 nu dataArray = new Uint8Array(bufferLength)\n    const totalBar = parseInt(bufferLength / 1.2);\n    const dataArray = new Uint8Array(totalBar);\n    const peakArr = Array(totalBar).fill(0);\n    const velocityArr = Array(totalBar).fill(0);\n    const acceleration = 0.05; // gia tc ca im peak khi ri xung\n    const WIDTH = this.canvas.width;\n    const HEIGHT = this.canvas.height;\n    const barWidth = parseInt(WIDTH / totalBar);\n    const heightLimit = 270; // what does this mean?\n    const averageRGB = getAverageRGB();\n    let barHeight, barColor, x;\n\n    console.log('bufferLength, totalBar, WIDTH, HEIGHT: ', bufferLength, totalBar, WIDTH, HEIGHT);\n\n    if (window.innerWidth <= 720) return; // not show animation on mobile device\n\n    console.log('Start drawing waveform...');\n\n    // Khi prop flipWaveform thay i th hm ny KHNG nhn c gi tr mi, m phi Refresh li page\n    // C solution no , chng hn getDerivedStateFromProps hay componentDidUpdate, nhng lng nhng\n    // qu nn CHA implement c!\n    const renderFrame = () => {\n      analyser.getByteFrequencyData(dataArray);\n      canvasContext.clearRect(0, 0, WIDTH, HEIGHT);\n\n      // for debugging: nu n in ra th animation ny vn chy!\n      // console.log('dataArray[0]', dataArray[0]);\n      for (let i = 0; i < totalBar; i++) {\n        // dataArray[i] l 1 s 8bit ko du, do  n s thuc khong [0,255],\n        // nhng HEIGHT ca canvas c th < 255, do  nu c  barHeight = dataArray[i]\n        // th s ko  ch v bar\n        // Set min barHeight = 1, v nu = 0 s ko thy ht cc bar\n        // Note: sau khi add flipWaveform, th vic nhiu bar = 0 li b chuyn v bn tri, haizzz\n        // (hin ti ko flip th  bn phi ko cn nhiu bar = 0 na, nhng flip th li b)\n        // S fix sau...\n        if (flipWaveform === true) {\n          barHeight = 1 + parseInt((dataArray[totalBar - i] / heightLimit) * HEIGHT);\n        } else {\n          barHeight = 1 + parseInt((dataArray[i] / heightLimit) * HEIGHT);\n        }\n        // barColor = this.getBarColor(barHeight / HEIGHT, i / totalBar);\n        barColor = averageRGB;\n        x = (barWidth + 3) * i;\n\n        // draw bar\n        canvasContext.fillStyle = barColor;\n        canvasContext.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);\n\n        // draw peak of bar\n        if (barHeight > peakArr[i]) {\n          peakArr[i] = barHeight;\n          velocityArr[i] = 0;\n        }\n        if (peakArr[i] > 0) {\n          canvasContext.beginPath();\n          canvasContext.strokeStyle = barColor;\n          canvasContext.lineWidth = 3;\n          canvasContext.moveTo(x, HEIGHT - peakArr[i]);\n          canvasContext.lineTo(x + barWidth, HEIGHT - peakArr[i]);\n          canvasContext.stroke();\n          velocityArr[i] += acceleration;\n          peakArr[i] = peakArr[i] - velocityArr[i];\n        }\n      }\n\n      // Ch chy animation khi audio ang play. Nu ko check iu kin ny th cho d gi\n      // cancelAnimationFrame(this.waveformAniFr) vn ko stop c ci animation ny!\n      if (!this.props.myAudio.paused) this.waveformAniFr = requestAnimationFrame(renderFrame);\n    };\n\n    renderFrame();\n  };\n\n  /**\n   * @param {Number} heightRatio chiu cao ca bar so vi chiu cao ca canvas. heightRatio <= 1\n   * @param {Number} barRatio v tr ca bar trong mng. heightRatio <= 1\n   * @returns\n   */\n  getBarColor = (heightRatio, barRatio) => {\n    const r = parseInt(255 * barRatio); // di mu gradient ca mng bar: blue -> tm hng\n    const g = 100 - 30 * heightRatio; // bar cng cao th mu cng m\n    const b = 255;\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  };\n\n  stopWaveform = () => {\n    cancelAnimationFrame(this.waveformAniFr);\n  };\n\n  render() {\n    return <canvas className=\"canvas-waveform\" ref={(node) => (this.canvas = node)}></canvas>;\n  }\n}\n\nexport default Waveform;\n","import React from 'react';\nimport Waveform from './Waveform';\n\nconst LeftPlayground = (props) => {\n  const { toggleWaveform, showWaveform, flipWaveform, analyser, initAnalyzer, myAudio, getWaveformInstance, song } = props;\n  return (\n    <div className=\"left_info\" onClick={toggleWaveform} title={showWaveform ? 'Switch to song meta' : 'Switch to waveform'}>\n      {showWaveform && (\n        <Waveform\n          analyser={analyser}\n          initAnalyzer={initAnalyzer}\n          myAudio={myAudio}\n          getWaveformInstance={getWaveformInstance}\n          flipWaveform={flipWaveform}\n        />\n      )}\n      {!showWaveform && (\n        <>\n          <div className=\"left_title\">{song.title}</div>\n          <div className=\"left_artist\">{song.artist}</div>\n          <div className=\"left_album\">({song.album ? song.album : 'No Album'})</div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default LeftPlayground;\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from '../Modal/Modal';\nimport './LyricSelectionModal.scss';\n\nconst LyricSelectionModal = ({ isOpen, onClose, lyricText, onGenerateCard }) => {\n  const [selectedText, setSelectedText] = useState('');\n\n  useEffect(() => {\n    if (isOpen) {\n      setSelectedText('');\n    }\n  }, [isOpen]);\n\n  const captureSelection = () => {\n    const selection = window.getSelection();\n    const text = selection ? selection.toString().trim() : '';\n    if (text) {\n      setSelectedText(text);\n    }\n  };\n\n  const handleMouseUp = () => {\n    captureSelection();\n  };\n\n  const handleGenerateCard = () => {\n    if (selectedText) {\n      onGenerateCard(selectedText);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"lyric-selection-modal-overlay\">\n      <div className=\"lyric-selection-modal-container\">\n        <Modal onClose={onClose} caption=\"Select Lyric Text\">\n          <div className=\"lyric-selection-content\">\n            <h3>Select Lyric Text</h3>\n            <p className=\"instruction\">Select the text below that you want to include in your lyric card:</p>\n            <div className=\"lyric-display\" onMouseUp={handleMouseUp}>\n              {lyricText}\n            </div>\n            <div className=\"mobile-selection-actions\">\n              <button className=\"btn-generate-mobile\" onClick={captureSelection}>\n                Confirm selection (mobile)\n              </button>\n            </div>\n            {selectedText && (\n              <div className=\"selected-preview\">\n                <h4>Selected Text:</h4>\n                <div className=\"preview-text\">{selectedText}</div>\n                <button className=\"btn-generate\" onClick={handleGenerateCard}>\n                  Generate Card\n                </button>\n              </div>\n            )}\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n};\n\nLyricSelectionModal.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  lyricText: PropTypes.string.isRequired,\n  onGenerateCard: PropTypes.func.isRequired\n};\n\nexport default LyricSelectionModal;\n","import PropTypes from 'prop-types';\nimport './CardConfiguration.scss';\n\nconst CardConfiguration = ({\n  textAlign,\n  setTextAlign,\n  textColor,\n  setTextColor,\n  isBold,\n  setIsBold,\n  backgroundColor,\n  setBackgroundColor,\n  useSongImage,\n  setUseSongImage,\n  hasSongImage,\n  overlayOpacity,\n  setOverlayOpacity,\n  brightnessBoost,\n  setBrightnessBoost,\n  fontFamily,\n  setFontFamily,\n  fontSize,\n  setFontSize\n}) => {\n  return (\n    <div className=\"card-config\">\n      <div className=\"config-group bg-source\">\n        <span>Background Source:</span>\n        <div className=\"button-group\">\n          <button\n            className={`btn-config ${useSongImage ? '' : 'active'}`}\n            onClick={() => setUseSongImage(false)}\n            title=\"Use solid color\"\n          >\n            Color\n          </button>\n          <button\n            className={`btn-config ${useSongImage ? 'active' : ''}`}\n            onClick={() => setUseSongImage(true)}\n            title=\"Use song image\"\n            disabled={!hasSongImage}\n          >\n            Song image\n          </button>\n        </div>\n      </div>\n\n      <div className=\"config-group\">\n        <span>Text Alignment:</span>\n        <div className=\"button-group\">\n          <button\n            className={`btn-config ${textAlign === 'left' ? 'active' : ''}`}\n            onClick={() => setTextAlign('left')}\n            title=\"Align left\"\n          >\n            <i className=\"fa fa-align-left\"></i>\n          </button>\n          <button\n            className={`btn-config ${textAlign === 'center' ? 'active' : ''}`}\n            onClick={() => setTextAlign('center')}\n            title=\"Align center\"\n          >\n            <i className=\"fa fa-align-center\"></i>\n          </button>\n          <button\n            className={`btn-config ${textAlign === 'right' ? 'active' : ''}`}\n            onClick={() => setTextAlign('right')}\n            title=\"Align right\"\n          >\n            <i className=\"fa fa-align-right\"></i>\n          </button>\n        </div>\n      </div>\n\n      <div className=\"config-group config-text-color\">\n        <span>Text Color: &nbsp;</span>\n        <input type=\"color\" value={textColor} onChange={(e) => setTextColor(e.target.value)} className=\"color-picker\" />\n        <span className=\"bold-toggle\">Bold:&nbsp;</span>\n        <input type=\"checkbox\" checked={isBold} onChange={(e) => setIsBold(e.target.checked)} className=\"bold-checkbox\" />\n      </div>\n\n      <div className=\"config-group\">\n        <span>Background Color:</span>\n        <div className=\"color-inputs\">\n          <input\n            type=\"color\"\n            value={backgroundColor}\n            onChange={(e) => setBackgroundColor(e.target.value)}\n            className=\"color-picker\"\n          />\n          <select value={backgroundColor} onChange={(e) => setBackgroundColor(e.target.value)} className=\"preset-colors\">\n            <option value=\"#667eea\">Purple Gradient</option>\n            <option value=\"#601f9e\">Dark Purple</option>\n            <option value=\"#1a1a2e\">Dark Blue</option>\n            <option value=\"#0f3460\">Navy</option>\n            <option value=\"#e94560\">Pink</option>\n            <option value=\"#ff6b6b\">Red</option>\n            <option value=\"#4ecdc4\">Teal</option>\n            <option value=\"#45b7d1\">Cyan</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"config-group\">\n        <span>Font Family:</span>\n        <select value={fontFamily} onChange={(e) => setFontFamily(e.target.value)} className=\"font-select\">\n          <option value=\"Open Sans\">Open Sans</option>\n          <option value=\"Verdana\">Verdana</option>\n          <option value=\"Georgia\">Georgia</option>\n          <option value=\"Lavishly Yours\">Lavishly Yours</option>\n          <option value=\"Lobster\">Lobster</option>\n          <option value=\"Pacifico\">Pacifico</option>\n          <option value=\"Borel\">Borel</option>\n        </select>\n      </div>\n\n      <div className=\"config-group\">\n        <span>Font Size: {fontSize}px</span>\n        <input\n          type=\"range\"\n          min=\"5\"\n          max=\"40\"\n          value={fontSize}\n          onChange={(e) => setFontSize(Number(e.target.value))}\n          className=\"font-size-slider\"\n        />\n      </div>\n\n      <div className=\"config-group\">\n        <span>Image Overlay: {overlayOpacity}%</span>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"80\"\n          step=\"5\"\n          value={overlayOpacity}\n          onChange={(e) => setOverlayOpacity(Number(e.target.value))}\n          className=\"font-size-slider\"\n        />\n      </div>\n\n      <div className=\"config-group\">\n        <span>Image Brightness: +{brightnessBoost}%</span>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max=\"60\"\n          step=\"5\"\n          value={brightnessBoost}\n          onChange={(e) => setBrightnessBoost(Number(e.target.value))}\n          className=\"font-size-slider\"\n          disabled={!useSongImage}\n        />\n      </div>\n    </div>\n  );\n};\n\nCardConfiguration.propTypes = {\n  textAlign: PropTypes.string.isRequired,\n  setTextAlign: PropTypes.func.isRequired,\n  textColor: PropTypes.string.isRequired,\n  setTextColor: PropTypes.func.isRequired,\n  isBold: PropTypes.bool.isRequired,\n  setIsBold: PropTypes.func.isRequired,\n  backgroundColor: PropTypes.string.isRequired,\n  setBackgroundColor: PropTypes.func.isRequired,\n  useSongImage: PropTypes.bool.isRequired,\n  setUseSongImage: PropTypes.func.isRequired,\n  hasSongImage: PropTypes.bool.isRequired,\n  overlayOpacity: PropTypes.number.isRequired,\n  setOverlayOpacity: PropTypes.func.isRequired,\n  brightnessBoost: PropTypes.number.isRequired,\n  setBrightnessBoost: PropTypes.func.isRequired,\n  fontFamily: PropTypes.string.isRequired,\n  setFontFamily: PropTypes.func.isRequired,\n  fontSize: PropTypes.number.isRequired,\n  setFontSize: PropTypes.func.isRequired\n};\n\nexport default CardConfiguration;\n","import { useRef, useState } from 'react';\nimport * as htmlToImage from 'html-to-image';\nimport PropTypes from 'prop-types';\nimport Modal from '../Modal/Modal';\nimport CardConfiguration from './CardConfiguration';\nimport { getAbsoluteUrl } from '../../service/UtilService';\nimport spinImage from '../../assets/images/spin.jpg';\nimport './LyricDownloadModal.scss';\n\nconst LyricDownloadModal = ({ isOpen, onClose, onCloseAll, song, selectedText }) => {\n  const cardRef = useRef(null);\n  const [textAlign, setTextAlign] = useState('left');\n  const [backgroundColor, setBackgroundColor] = useState('#667eea');\n  const [useSongImage, setUseSongImage] = useState(true);\n  const [overlayOpacity, setOverlayOpacity] = useState(60); // 0-80 (% over image)\n  const [brightnessBoost, setBrightnessBoost] = useState(0); // 0-60 (% white overlay to brighten image)\n  const [textColor, setTextColor] = useState('#ffffff');\n  const [isBold, setIsBold] = useState(false);\n  const [fontSize, setFontSize] = useState(14);\n  const [fontFamily, setFontFamily] = useState('Open Sans');\n\n  const songImageUrl = song?.image_url || null;\n  const resolvedSongImageUrl = songImageUrl ? getAbsoluteUrl(songImageUrl) : spinImage;\n\n  const downloadCard = async () => {\n    const node = cardRef.current;\n    if (!node) return;\n\n    try {\n      // Increase pixelRatio for sharper output while preserving DOM layout\n      const rect = node.getBoundingClientRect();\n      const size = Math.round(Math.max(rect.width, rect.height));\n      const dataUrl = await htmlToImage.toJpeg(node, {\n        pixelRatio: 4,\n        cacheBust: true,\n        // skipFonts: true,\n        width: size,\n        height: size,\n        style: { width: `${size}px`, height: `${size}px` }\n      });\n      const link = document.createElement('a');\n      const songTitle = (song.title || 'untitled').replaceAll(/\\s+/g, '');\n      const songArtist = (song.artist || 'unknown').replaceAll(/\\s+/g, '');\n      link.download = `lyric-card-${songTitle}-${songArtist}.jpg`;\n      link.href = dataUrl;\n      link.click();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const copyText = () => {\n    navigator.clipboard.writeText(selectedText);\n    alert('Lyric text copied to clipboard!');\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"lyric-download-modal-overlay\">\n      <div className=\"lyric-download-modal-container\">\n        <Modal onClose={onCloseAll}>\n          <div className=\"lyric-download-content\">\n            <h3>Generate Lyric Card</h3>\n\n            <div className=\"config-preview-row\">\n              <CardConfiguration\n                textAlign={textAlign}\n                setTextAlign={setTextAlign}\n                textColor={textColor}\n                setTextColor={setTextColor}\n                isBold={isBold}\n                setIsBold={setIsBold}\n                backgroundColor={backgroundColor}\n                setBackgroundColor={setBackgroundColor}\n                useSongImage={useSongImage}\n                setUseSongImage={setUseSongImage}\n                hasSongImage={Boolean(resolvedSongImageUrl)}\n                overlayOpacity={overlayOpacity}\n                setOverlayOpacity={setOverlayOpacity}\n                brightnessBoost={brightnessBoost}\n                setBrightnessBoost={setBrightnessBoost}\n                fontFamily={fontFamily}\n                setFontFamily={setFontFamily}\n                fontSize={fontSize}\n                setFontSize={setFontSize}\n              />\n\n              {/* Card Preview */}\n              <div\n                ref={cardRef}\n                className=\"lyric-card\"\n                style={{\n                  backgroundColor: backgroundColor,\n                  backgroundImage:\n                    useSongImage && resolvedSongImageUrl\n                      ? `linear-gradient(rgba(255,255,255,${brightnessBoost / 100}), rgba(255,255,255,${\n                          brightnessBoost / 100\n                        })), linear-gradient(rgba(0,0,0,${overlayOpacity / 100}), rgba(0,0,0,${\n                          overlayOpacity / 100\n                        })), url(${resolvedSongImageUrl})`\n                      : 'none',\n                  backgroundSize: useSongImage && resolvedSongImageUrl ? 'cover' : 'auto',\n                  backgroundPosition: 'center',\n                  backgroundRepeat: 'no-repeat',\n                  textAlign: textAlign\n                }}\n              >\n                <div\n                  className=\"card-lyric-text\"\n                  style={{\n                    color: textColor,\n                    fontFamily: fontFamily,\n                    fontSize: `${fontSize}px`,\n                    fontWeight: isBold ? 'bold' : 'normal'\n                  }}\n                >\n                  {selectedText}\n                </div>\n                <div className=\"card-song-info\" style={{ color: textColor }}>\n                  {song.title && <div className=\"card-title\">{song.title}</div>}\n                  {song.artist && <div className=\"card-artist\">{song.artist}</div>}\n                </div>\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"card-actions\">\n              <button className=\"btn-action\" onClick={downloadCard}>\n                <i className=\"fa fa-download\"></i> Download Card\n              </button>\n              <button className=\"btn-action\" onClick={copyText}>\n                <i className=\"fa fa-copy\"></i> Copy Text\n              </button>\n              <button className=\"btn-action\" onClick={onClose}>\n                <i className=\"fa fa-arrow-left\"></i> Back to Selection\n              </button>\n            </div>\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n};\n\nLyricDownloadModal.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onCloseAll: PropTypes.func.isRequired,\n  song: PropTypes.shape({\n    title: PropTypes.string,\n    artist: PropTypes.string,\n    image_url: PropTypes.string\n  }).isRequired,\n  selectedText: PropTypes.string.isRequired\n};\n\nexport default LyricDownloadModal;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport LyricSelectionModal from './LyricSelectionModal';\nimport LyricDownloadModal from './LyricDownloadModal';\n\nconst LyricCardModal = ({ isOpen, onClose, song, lyricText }) => {\n  const [selectedText, setSelectedText] = useState('');\n  const [showDownloadModal, setShowDownloadModal] = useState(false);\n\n  const handleGenerateCard = (text) => {\n    console.log('Selected Text for Lyric Card:', text);\n    setSelectedText(text);\n    setShowDownloadModal(true);\n  };\n\n  const handleCloseDownloadModal = () => {\n    setShowDownloadModal(false);\n  };\n\n  const handleCloseAll = () => {\n    setShowDownloadModal(false);\n    setSelectedText('');\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {showDownloadModal ? (\n        <LyricDownloadModal\n          isOpen={showDownloadModal}\n          onClose={handleCloseDownloadModal}\n          onCloseAll={handleCloseAll}\n          song={song}\n          selectedText={selectedText}\n        />\n      ) : (\n        <LyricSelectionModal isOpen={isOpen} onClose={handleCloseAll} lyricText={lyricText} onGenerateCard={handleGenerateCard} />\n      )}\n    </>\n  );\n};\n\nLyricCardModal.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  song: PropTypes.shape({\n    title: PropTypes.string,\n    artist: PropTypes.string\n  }).isRequired,\n  lyricText: PropTypes.string.isRequired\n};\n\nexport default LyricCardModal;\n","\n// This file is automatically generated by generateBuildInfo.js at build time. DO NOT EDIT!!!\n// Ref: Copilot\nexport const buildDate = \"Dec 13, 2025\";\n","import React, { PureComponent } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Toast from '../../components/Toast/Toast';\nimport BaiHatService from './BaiHatService';\nimport backgroundImage from '../../assets/images/background.jpg';\nimport spinImage from '../../assets/images/spin.jpg';\nimport BaiHatTable from './BaiHatTable';\nimport Player from './Player';\nimport Setting from './Setting';\nimport LeftPlayground from './LeftPlayground';\nimport { NO_LYRIC, FETCHING_LYRIC, LYRIC_NOT_FOUND, THEME_LIGHT } from '../../constants/Constants';\nimport {\n  getById,\n  saveSetting,\n  getSetting,\n  decodeTime,\n  createNewElement,\n  myParseFloat,\n  getByClass,\n  filterTable,\n  getAbsoluteUrl,\n  isValidDate,\n  formatDateMY\n} from '../../service/UtilService';\nimport { scrollPage, scrollInsideElementToCenter } from '../../service/scroll';\nimport { LiliContext } from '../../context/LiliContext';\nimport LyricCardModal from '../../components/LyricCard/LyricCardModal';\nimport './BaiHat.css';\nimport { buildDate } from '../../buildInfo';\n\nclass BaiHat extends PureComponent {\n  static contextType = LiliContext;\n\n  constructor(props) {\n    super(props);\n    let flipWaveform = getSetting('flipWaveform');\n    if (flipWaveform === undefined || flipWaveform === null) {\n      flipWaveform = false;\n    }\n    this.state = {\n      songData: [],\n      params: {\n        page: 0\n      },\n      analyser: null,\n      loading: false,\n      song: {}, // current song\n      showSetting: false,\n      isFullscreen: !!getSetting('fullscreen'), // !!null = false\n      showWaveform: getSetting('showWaveform') || false,\n      flipWaveform: flipWaveform,\n      isPlaying: false,\n      spinning: false,\n      showLyricCardModal: false\n    };\n\n    this.lines = [];\n    this.isLrc = false;\n    this.hasTranslation = false;\n    this.startTimes = [];\n    this.endTimes = [];\n    this.cntWord = 0;\n    this.offsetTime = 0;\n    this.currWordID = -1;\n    this.metaExist = false;\n    this.lyricMeta = {};\n    this.myAudio = null;\n    this.playLyricInterval = null;\n    this.countdownInterval = null;\n    this.currErrWord = null;\n    this.playerInstance = null;\n    this.waveformInstance = null;\n    this.initSettingsAtPlayer = null;\n    this.div_result = React.createRef();\n    this.lyric_playground = React.createRef();\n    this.div_background = React.createRef();\n    this.div_left_wrapper = React.createRef();\n  }\n\n  componentDidMount() {\n    const sortBy = getSetting('sortBy');\n    const sortOrder = getSetting('sortOrder');\n    this.getAllSongs(\n      {\n        sortBy,\n        sortOrder\n      },\n      true\n    );\n\n    // tham chiu ti myAudio ca component con, thc ra c th dng:\n    // this.myAudio = this.playerInstance.myAudio;\n    // nhng mun dng c 2 cch nn  nh vy\n    // (playerInstance ch dng  call cc function trong component Player)\n    this.myAudio = this.child.myAudio;\n\n    if (this.state.isFullscreen) {\n      this.setFullscreen();\n    }\n\n    window.addEventListener('keydown', (e) => {\n      if (!this.myAudio) return;\n\n      switch (e.key) {\n        case 'ArrowLeft':\n          this.myAudio.currentTime -= 5;\n          this.onSeeked();\n          break;\n        case 'ArrowRight':\n          this.myAudio.currentTime += 5;\n          this.onSeeked();\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.clearPlayLyricInterval();\n    this.clearCountdownInterval();\n  }\n\n  initAnalyzer = () => {\n    if (this.state.analyser) return;\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)(); // Safari uses webkitAudioContext\n    const audioSrcNode = audioContext.createMediaElementSource(this.myAudio);\n    const analyser = audioContext.createAnalyser();\n    audioSrcNode.connect(analyser);\n    analyser.connect(audioContext.destination);\n    analyser.fftSize = 128;\n    this.setState({\n      analyser\n    });\n  };\n\n  getAllSongs = (params, isPlaySong = false) => {\n    this.setState({ loading: true });\n    const sort = params.sortBy ? params.sortBy + ',' + params.sortOrder : this.state.params.sort;\n    if (params.sortBy) {\n      saveSetting('sortBy', params.sortBy);\n      saveSetting('sortOrder', params.sortOrder);\n    }\n    const newParams = {\n      ...this.state.params,\n      ...params,\n      sort\n    };\n    this.setState({\n      params: newParams\n    });\n    BaiHatService.getAllSongs(newParams)\n      .then((res) => {\n        const path = this.props.match.params.id;\n        let song = {};\n        let currInx = 0;\n        if (path) {\n          song = res.find((obj, idx) => {\n            if (obj.path === path) {\n              currInx = idx;\n              return true;\n            }\n            return false;\n          });\n        }\n\n        this.setState({\n          songData: res,\n          loading: false\n        });\n        this.playerInstance.setPlayList(res, currInx); // danh sch pht v 1 bi trong danh sch  mun c pht ngay lc ny\n        if (isPlaySong && song.path) {\n          this.playSong(song);\n        }\n        this.scrollTableToActiveSong(song);\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n        this.setState({\n          loading: false\n        });\n      });\n  };\n\n  /**\n   * Play a song\n   * @param {JSON} song info of a song we want to play\n   */\n  playSong = (song, isScrollTr = false) => {\n    console.log(`Start playing ${song.title} - ${song.artist}...`);\n    if (this.props.match.params.id !== song.path) {\n      window.location.href = '#/bai-hat/' + song.path;\n    }\n\n    if (song.zing_id) {\n      song.zingStream = getAbsoluteUrl('/api/zing/mp3/streaming?zing_id=' + song.zing_id);\n    }\n\n    // [js_async] cn ch setState xong  n render xong , sau  mi fetch lyric,\n    // bi v trong getLyric, nu c lyric, s ch hm BaiHatService.getLyric\n    // thc hin xong mi gi saveLyric, cn khi ko c lyric s gi lun hm setNoLyric.\n    // 2 trng hp  khc nhau dn n kq khc nhau (c lyric th ok, ko c th li)!\n    this.setState({ song }, () => {\n      this.getLyric(song);\n    });\n    const image_url = song && song.image_url ? getAbsoluteUrl(song.image_url) : spinImage;\n    this.playerInstance.setActiveAudio(song);\n    this.playerInstance.setMediaSessionMeta(song.title, song.artist, image_url);\n\n    if (isScrollTr) {\n      this.scrollTableToActiveSong(song);\n    }\n  };\n\n  scrollTableToActiveSong = (song = {}) => {\n    const songTable = getById('songTable');\n    if (!songTable || !song.id) return;\n    const allSongValue = songTable.parentNode;\n    const activeTr = getById('tr-' + song.id);\n    // allSongValue.scrollTop = activeTr.offsetTop - 34; // 34px = height of table header\n    scrollInsideElementToCenter(allSongValue, activeTr, 300); // ch cn animation ch ny u :v\n  };\n\n  getLyric = (song) => {\n    // FetchingLyric\n    this.div_result.innerHTML = FETCHING_LYRIC;\n    this.lines = [];\n    if (song.lyric) {\n      // Currently only support .lrc, .xlrc and .trc. Will support .xtrc in the future\n      // .lrc: lyric with time for each line\n      // .xlrc: lrc lyric with translation\n      // .trc: lyric with time for each line and word\n      // .xtrc: trc lyric with translation\n      if (song.lyric.endsWith('.lrc')) {\n        this.isLrc = true;\n        this.hasTranslation = false;\n      } else if (song.lyric.endsWith('.xlrc')) {\n        this.isLrc = true;\n        this.hasTranslation = true;\n      } else {\n        this.isLrc = false;\n        this.hasTranslation = false;\n      }\n      BaiHatService.getLyric(song.lyric)\n        .then((res) => {\n          if (res === LYRIC_NOT_FOUND) this.setNoLyric();\n          else this.saveLyric(res);\n        })\n        .catch((err) => {\n          console.log(err);\n          Toast.error(err);\n        });\n    } else {\n      this.setNoLyric();\n    }\n  };\n\n  saveLyric = (lyric) => {\n    this.lines = lyric.trim().split('\\n');\n    this.initLyric();\n  };\n\n  isNoLyric = () => {\n    return this.lines.length === 0;\n  };\n\n  setNoLyric = () => {\n    this.lines = [];\n    this.initLyric();\n  };\n\n  initLyric = () => {\n    this.setPlayLyricInterval();\n    this.div_result.innerHTML = '';\n    this.startTimes = [];\n    this.endTimes = [];\n    this.tranMaps = [];\n    this.cntWord = 0;\n    this.offsetTime = 0;\n    this.currWordID = -1;\n    this.playerInstance.playAudio();\n\n    if (this.isNoLyric()) {\n      this.div_result.innerHTML = NO_LYRIC;\n    } else {\n      this.metaExist = false;\n      this.lyricMeta = {};\n      this.div_result.innerHTML = '';\n      if (this.isLrc) this.initLrcLyric();\n      else this.initTrcLyric();\n    }\n\n    this.initSettingsAtPlayer();\n  };\n\n  initTrcLyric = async () => {\n    let temp, startLine, words, startWord, endWord, divLine;\n\n    // Note: dng \"for in\" ko c, phi dng \"for await of\"\n    // Ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of\n    for await (let line of this.lines) {\n      temp = line.match(/\\[\\d+:\\d+\\.\\d+\\]/g); // ex: temp = [\"[1:15.047]\"]\n      if (temp != null) {\n        startLine = decodeTime(temp[0]); // ex: 75.047\n        temp = line.substring(temp[0].length); // ex: <271>I <256>keep <790>saying <1254>no\n        words = temp.match(/<\\d+>[^<]*/g);\n        divLine = createNewElement('div', null, 'line');\n\n        if (words == null) {\n          // Trng hp ny xy ra vi cc file lyric c ca TTPod, n c 1-2 dng nh ny:\n          // [99:00.100],!\n          // (Ko c millisecond, chng hn <123>) Tt nht l ignore\n          continue;\n        }\n\n        startWord = startLine;\n        for await (let word of words) {\n          // match(/\\d+/)[0]: ly s u tin trong string ny\n          // VD: string ny c dng: \"<123>demo \" th kt qu l 123\n          // VD: string ny c dng: \"<123>demo 949\" th kt qu l 123\n          endWord = startWord + parseFloat(word.match(/\\d+/)[0]) / 1000;\n          endWord = myParseFloat(endWord);\n\n          // Do lu time vo 2 mng startTimes v endTimes nn vic\n          // thm attribute time-start v time-start ch dng  debug\n          let spanWord = createNewElement('span', 'word-' + this.cntWord, 'not-pass-word', {\n            'time-start': startWord,\n            'time-end': endWord\n          });\n          spanWord.innerText = word.replace(/<\\d+>/, '');\n          if (spanWord.innerText.trim() === '') {\n            spanWord.innerHTML = '&nbsp;';\n            spanWord.setAttribute('is-empty', '1');\n          }\n          this.startTimes[this.cntWord] = startWord;\n          this.endTimes[this.cntWord] = endWord;\n\n          startWord = endWord;\n          this.cntWord++;\n          divLine.appendChild(spanWord);\n        }\n        this.div_result.appendChild(divLine);\n      } else {\n        this.readLyricMeta(line);\n      }\n    }\n\n    this.appendLyricMeta();\n  };\n\n  initLrcLyric = async () => {\n    let lineTime = '',\n      lineTimeLen,\n      lineTranTag,\n      tranNum,\n      lineTranText,\n      lineWords,\n      startLine;\n    let lineMap = new Map(); // key l 1 phn t trong mng startTimes\n\n    // Map<tranNum, Map<startLine, lineTranText>>\n    let lineTranMap = new Map();\n\n    // 1. Parse lyric\n\n    // ex: line = \"[01:53.41][00:28.13]Ngi theo hng hoa \"\n    for await (let line of this.lines) {\n      // lineTime c th c 1 hoc nhiu phn t, ex: lineTime = ['[01:53.41]', '[00:28.13]']\n      lineTime = line.match(/\\[\\d+:\\d+\\.\\d+\\]/g);\n\n      // Dng c lineTranTag l dng dch, c th c nhiu loi ngn ng khc nhau, ex:\n      // [tran1]Wmen titu wng tinkng\n      // [tran2]We raise our heads to the sky\n      // ex: lineTranTag = ['[tran1]'], should have only 1 element\n      lineTranTag = line.match(/\\[tran\\d+\\]/g);\n\n      if (lineTime != null) {\n        // ex: lineTimeLen = length ca [01:53.41][00:28.13] = 20\n        lineTimeLen = lineTime.reduce((total, curr) => total + curr.length, 0);\n        lineWords = line.substring(lineTimeLen); // ex: \"Ngi theo hng hoa \"\n\n        for await (const lineT of lineTime) {\n          startLine = decodeTime(lineT); // ex: startLine = decodeTime('[01:53.41]') = 113.41\n          this.startTimes[this.cntWord] = startLine;\n\n          // ex: lineMap = { 113.41 => \"Ngi theo hng hoa \", 28.13 => \"Ngi theo hng hoa \" }\n          lineMap.set(startLine, lineWords);\n\n          this.cntWord++;\n        }\n      } else if (lineTranTag != null) {\n        // V lineTranTag bt buc phi theo sau lineTime nn ta c th dng startLine  lm key cho mi lineTranTag\n        tranNum = lineTranTag[0].substring(1, lineTranTag[0].length - 1); // ex: tranNum = 'tran1'\n        lineTranText = line.substring(lineTranTag[0].length);\n        if (!lineTranMap.has(tranNum)) {\n          lineTranMap.set(tranNum, new Map());\n        }\n        lineTranMap.get(tranNum).set(startLine, lineTranText);\n      } else {\n        this.readLyricMeta(line);\n      }\n    }\n\n    this.startTimes.sort(function (a, b) {\n      return a - b;\n    });\n\n    // 2. Generate lyric (HTML) to display\n\n    for (let i = 0; i < this.startTimes.length; i++) {\n      let divLine = createNewElement('div', null, 'line');\n\n      let spanWord = createNewElement('span', 'word-' + i, 'not-pass-word', null);\n      spanWord.innerText = lineMap.get(this.startTimes[i]);\n      if (spanWord.innerText === '') {\n        spanWord.innerHTML = '&nbsp';\n        spanWord.setAttribute('is-empty', '1');\n      }\n      divLine.appendChild(spanWord);\n\n      // Add translation\n      if (lineTranMap.size > 0) {\n        for (let [key, value] of lineTranMap) {\n          if (value.has(this.startTimes[i])) {\n            let spanTran = createNewElement('div', null, 'line-tran ' + key, null);\n            spanTran.innerText = value.get(this.startTimes[i]);\n            divLine.appendChild(spanTran);\n          }\n        }\n      }\n\n      this.div_result.appendChild(divLine);\n    }\n    this.appendLyricMeta();\n\n    for (let i = 0; i < this.startTimes.length - 1; i++) {\n      this.endTimes[i] = this.startTimes[i + 1];\n    }\n    this.endTimes[this.startTimes.length - 1] = this.myAudio.duration;\n  };\n\n  // Note: c trng hp 1 dng meta c k t c bit, chng hn: '[by: Tuzaku]\\r'\n  // Lc ny substring s b bug: this.lyricMeta.by = \"Tuzaku]\"\n  // Ci bug  ko nhiu, k, khi fix! =>  fix\n  readLyricMeta = (line = '') => {\n    const end = line.lastIndexOf(']');\n    if (line.includes('offset:')) {\n      // ex: [offset:-200]\n      this.offsetTime = line.match(/[0-9|-]+/g);\n      this.offsetTime = parseInt(this.offsetTime);\n    } else if (line.includes('[author:')) {\n      // ex: [author:Tuzaku]\n      // deprecated, lyric file should use [by:] instead\n      this.metaExist = true;\n      this.lyricMeta.by = line.substring('[author:'.length, end).trim();\n    } else if (line.includes('[by:')) {\n      // ex: [by:Tuzaku]\n      this.metaExist = true;\n      this.lyricMeta.by = line.substring('[by:'.length, end).trim();\n    } else if (line.includes('[createdDate:')) {\n      // ex: [createdDate:2021-06-28]\n      // deprecated, lyric file should use [date:] instead\n      this.metaExist = true;\n      this.lyricMeta.date = line.substring('[createdDate:'.length, end).trim();\n    } else if (line.includes('[date:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.date = line.substring('[date:'.length, end).trim();\n    } else if (line.includes('[source:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.source = line.substring('[source:'.length, end).trim();\n    } else if (line.includes('[ti:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.title = line.substring('[ti:'.length, end).trim();\n    } else if (line.includes('[ar:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.artist = line.substring('[ar:'.length, end).trim();\n    }\n  };\n\n  appendLyricMeta = () => {\n    if (this.metaExist) {\n      this.div_result.appendChild(createNewElement('div', null, 'line-meta')); // empty line\n      let divLine = createNewElement('div', null, 'line-meta');\n      divLine.innerText = '-----------';\n      this.div_result.appendChild(divLine);\n\n      const divLyricInfo = createNewElement('div', null, 'lyric-info');\n      this.div_result.appendChild(divLyricInfo);\n\n      // Song meta\n      if (this.lyricMeta.title) {\n        divLine = createNewElement('div', null, 'line-meta', { style: 'font-weight:bold' });\n        divLine.innerText = this.lyricMeta.title + ' - ' + this.lyricMeta.artist;\n        divLyricInfo.appendChild(divLine);\n      }\n\n      // Lyric meta\n      if (this.lyricMeta.by) {\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Lyric creator: ' + this.lyricMeta.by;\n        divLyricInfo.appendChild(divLine);\n      }\n      if (this.lyricMeta.source) {\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Source: ' + this.lyricMeta.source;\n        divLyricInfo.appendChild(divLine);\n      }\n      if (this.lyricMeta.date) {\n        const d = new Date(this.lyricMeta.date);\n        const dStr = isValidDate(d) ? formatDateMY(d) : d;\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Date: ' + dStr;\n        divLyricInfo.appendChild(divLine);\n      }\n    }\n  };\n\n  setPlayLyricInterval = () => {\n    if (this.myAudio && !this.myAudio.paused) {\n      this.playLyricInterval = setInterval(() => {\n        this.updateLyric();\n      }, 30);\n    }\n  };\n\n  clearPlayLyricInterval = () => {\n    if (this.playLyricInterval) clearInterval(this.playLyricInterval);\n    this.playLyricInterval = null;\n  };\n\n  onSeeked = () => {\n    this.clearCountdownInterval();\n    if (!this.playLyricInterval) {\n      this.updateLyric();\n    }\n    setTimeout(() => {\n      if (!this.isNoLyric()) {\n        this.reUpdateWordPass();\n      }\n    }, 0);\n    this.scrollLyric();\n  };\n\n  onPause = () => {\n    this.clearCountdownInterval();\n    this.clearPlayLyricInterval();\n    this.setState({ isPlaying: false, spinning: false });\n    if (this.waveformInstance) this.waveformInstance.stopWaveform();\n  };\n\n  onPlay = () => {\n    if (!this.playLyricInterval) this.setPlayLyricInterval();\n    this.setState({ isPlaying: true, spinning: true });\n    if (this.myAudio.currentTime === 0) {\n      const path = this.props.match.params.id;\n      if (path) {\n        setTimeout(() => {\n          let currPath = this.props.match.params.id;\n          if (currPath === path) {\n            BaiHatService.updateListen(path)\n              .then((res) => {\n                console.log(res);\n              })\n              .catch((err) => {\n                console.log(err);\n                Toast.error(err);\n              });\n          }\n        }, 60000); // nghe 1 bi qu 1 pht mi tnh 1 lt nghe\n      }\n      setTimeout(() => {\n        // re-update passed words (in fact, all words are not passed words)\n        if (getById('word-0') && !this.isNoLyric()) {\n          for (let i = 0; i < this.cntWord; i++) {\n            getById('word-' + i).classList.add('not-pass-word');\n          }\n        }\n      }, 0);\n    }\n    if (this.state.showWaveform && this.waveformInstance) this.drawWave();\n  };\n\n  countdownAtEmptyWord = (currWord) => {\n    let nextWord = getById('word-' + (this.currWordID + 1));\n    if (nextWord) {\n      let timeDiff = this.endTimes[this.currWordID] - this.startTimes[this.currWordID];\n      let timeLeft = this.endTimes[this.currWordID] + this.offsetTime / 1000 - this.myAudio.currentTime;\n      if ((timeDiff >= 5 && timeLeft <= 5) || (timeDiff >= 3 && timeLeft <= 3)) {\n        BaiHatService.setBulletText(this.lyric_playground, currWord, Math.ceil(timeLeft));\n      }\n    }\n  };\n\n  updateLyric = async () => {\n    if (this.isNoLyric()) {\n      this.clearPlayLyricInterval();\n      return;\n    }\n\n    let prevWord, prevParent;\n\n    // Chy hiu ng karaoke cho t hin ti\n    if (this.currWordID >= 0) {\n      const st = this.startTimes[this.currWordID] + this.offsetTime / 1000;\n      const en = this.endTimes[this.currWordID] + this.offsetTime / 1000;\n      const currWord = getById('word-' + this.currWordID);\n\n      if (st <= this.myAudio.currentTime && en >= this.myAudio.currentTime) {\n        // TODO change this to state variable, or class variable (karaokeMode)\n        if (this.div_result.classList.contains('karaoke-mode')) {\n          BaiHatService.runKaraokeEffect(this.lyric_playground, this.myAudio, currWord, st, en);\n        }\n        if (currWord.getAttribute('is-empty') === '1') {\n          this.countdownAtEmptyWord(currWord);\n        }\n\n        return;\n      }\n\n      // Sau khi myAudio.currentTime nm ngoi khong [st:en] th  i qua\n      // word hin ti, lc ny currWord s tr thnh preWord\n      prevWord = getById('word-' + this.currWordID);\n      if (prevWord && prevWord.getAttribute('is-empty') === '1') {\n        // Xa bullet text  t trc , thng th t  s ng trn 1 empty line\n        BaiHatService.setBulletText(this.lyric_playground, prevWord, 0);\n      }\n\n      // C th t trc  mi ch fill 95% chng hn, ta cn fill nt t \n      BaiHatService.fillKaraokeWord(this.lyric_playground, prevWord);\n\n      prevParent = prevWord.parentNode;\n      prevWord.classList.remove('word-active', 'curr-word');\n    }\n\n    // Sau khi chy xong hiu ng karaoke cho t hin ti, word ny tr thnh prevWord,\n    // cn tm currWord mi, sau  thm cc class cho currWord, currLine,\n    // cc t trc v sau currWord  trn cng 1 line\n    this.gotoNextWord(prevWord, prevParent);\n  };\n\n  gotoNextWord = async (prevWord, prevParent) => {\n    this.currWordID = this.getCurrentWordByTime(this.myAudio.currentTime);\n    if (this.currWordID >= 0) {\n      const currWord = getById('word-' + this.currWordID);\n      const currParent = currWord.parentNode;\n\n      currWord.classList.add('word-active', 'curr-word');\n      currWord.classList.remove('not-pass-word');\n\n      if (prevParent !== currParent) {\n        if (prevParent) {\n          prevParent.classList.remove('line-active');\n          for await (let child of prevParent.children) {\n            if (child === prevWord) break;\n            child.classList.remove('word-active');\n          }\n        }\n\n        currParent.classList.add('line-active');\n      }\n      this.activeAtCurr(currWord, currParent);\n    } else {\n      this.removeActiveLastLine();\n    }\n  };\n\n  /**\n   * Active cc t trc currWord, v remove active cho cc t pha sau currWord\n   * @param {HTMLElement} currWord tag ny l current word\n   * @param {HTMLElement} currParent tag ny l cha cha current word  trn\n   */\n  activeAtCurr = (currWord, currParent) => {\n    let currIndex;\n    for (let i = 0; i < currParent.children.length; i++) {\n      if (currParent.children[i] === currWord) {\n        currIndex = i;\n        break;\n      }\n      currParent.children[i].classList.add('word-active');\n    }\n    for (let i = currIndex + 1; i < currParent.children.length; i++) {\n      if (!currParent.children[i].classList.contains('word-active')) break;\n      currParent.children[i].classList.remove('word-active');\n    }\n\n    // scroll\n    if (currWord === currParent.childNodes[0]) {\n      setTimeout(() => {\n        this.scrollLyric();\n      }, 110); // phi ch cho CSS transition xong mi get c height ng\n    }\n  };\n\n  /**\n   * Chy ht nhc th xa active  dng cui cng\n   */\n  removeActiveLastLine = async () => {\n    const finalLine = getById('word-' + (this.cntWord - 1)).parentNode;\n    if (finalLine.classList.contains('line-active')) {\n      finalLine.classList.remove('line-active');\n      for await (let child of finalLine.children) {\n        child.classList.remove('word-active');\n      }\n    }\n  };\n\n  // TODO khi ht bi cn scroll xung cui cng (metadata), nu khng c info khng thy c\n  scrollLyric = (currWord = null) => {\n    if (currWord == null) {\n      currWord = getById('word-' + this.currWordID);\n    }\n    if (currWord != null) {\n      this.div_result.scrollTop =\n        20 +\n        currWord.parentNode.offsetTop -\n        getById('word-0').offsetTop -\n        this.div_result.offsetHeight / 2 +\n        currWord.parentNode.clientHeight / 2; // height of parent of currWord (div.line.active-line)\n    }\n  };\n\n  getCurrentWordByTime = (sec) => {\n    let lo = 0,\n      hi = this.cntWord - 1;\n    let mid, st, en;\n\n    while (lo <= hi) {\n      mid = parseInt((lo + hi) / 2);\n      st = this.startTimes[mid] + this.offsetTime / 1000;\n      en = this.endTimes[mid] + this.offsetTime / 1000;\n\n      if (st <= sec && en >= sec) {\n        // Nu nh c 2 t c khong thi gian b chng\n        // ln nhau th ta u tin t ng ng sau\n        st = this.startTimes[mid + 1] + this.offsetTime / 1000;\n        en = this.endTimes[mid + 1] + this.offsetTime / 1000;\n        if (st <= sec && en >= sec) return mid + 1;\n        else return mid;\n      } else if (st > sec) hi = mid - 1;\n      else lo = mid + 1;\n    }\n\n    if (mid === 0 || mid === this.cntWord - 1) mid = -1;\n    else {\n      // ko tm thy th no c st <= sec <= en (do lyric b sai).\n      // tuy vy, vn return th gn  nht\n      // if(mid)\n      if (mid && mid !== this.currErrWord) {\n        Toast.warn(`Warning: lyric is not correct near \"${getById('word-' + mid).innerText}\"`);\n        this.currErrWord = mid;\n      }\n    }\n\n    // delete interval when finish song!\n    if (sec > this.endTimes[this.cntWord - 1]) this.clearPlayLyricInterval();\n\n    return mid;\n  };\n\n  clearCountdownInterval = () => {\n    clearInterval(this.countdownInterval);\n    this.countdownInterval = null;\n  };\n\n  reUpdateWordPass = () => {\n    // this.currWordID gi s l v tr mi sau thao tc seek nhy ti\n    this.currWordID = this.getCurrentWordByTime(this.myAudio.currentTime);\n    if (this.currWordID >= 0) {\n      for (let i = 0; i < this.currWordID; i++) {\n        let passedWord = getById('word-' + i);\n        passedWord.classList.remove('not-pass-word');\n        if (passedWord.getAttribute('is-empty') === '1') {\n          passedWord.innerHTML = '&nbsp;'; // remove bullet text\n        }\n        BaiHatService.fillKaraokeWord(this.lyric_playground, passedWord);\n        this.removeLineActive(passedWord);\n      }\n      for (let i = this.currWordID; i < this.cntWord; i++) {\n        let notPassWord = getById('word-' + i);\n        notPassWord.classList.add('not-pass-word');\n        if (notPassWord.getAttribute('is-empty') === '1') {\n          notPassWord.innerHTML = '&nbsp;'; // remove bullet text\n        }\n        BaiHatService.emptyKaraokeWord(notPassWord);\n        this.removeLineActive(notPassWord);\n      }\n      // addLineActive\n      getById('word-' + this.currWordID).parentNode.classList.add('line-active');\n    }\n  };\n\n  removeLineActive = (child) => {\n    if (child.parentNode.classList.contains('line-active')) {\n      child.parentNode.classList.remove('line-active');\n    }\n  };\n\n  toggleSetting = (isShow) => {\n    this.setState({\n      showSetting: isShow\n    });\n  };\n\n  toggleFullscreen = () => {\n    const isFullscreen = !this.state.isFullscreen;\n    if (isFullscreen) {\n      this.setFullscreen();\n    } else {\n      this.unsetFullscreen();\n    }\n    this.setState({ isFullscreen });\n    saveSetting('fullscreen', isFullscreen);\n    setTimeout(() => {\n      this.scrollLyric();\n    }, 350);\n  };\n\n  toggleWaveform = () => {\n    const showWaveform = !this.state.showWaveform;\n    this.setState({ showWaveform }, () => {\n      if (!this.waveformInstance) return;\n      if (showWaveform) this.drawWave();\n      else this.waveformInstance.stopWaveform();\n    });\n    saveSetting('showWaveform', showWaveform);\n  };\n\n  drawWave = async () => {\n    // phi i analyzer khi to xong mi draw waveform c\n    await this.initAnalyzer();\n    this.waveformInstance.drawWaveform();\n  };\n\n  setFullscreen = () => {\n    let body_wrapper = getByClass('body_wrapper');\n    document.body.classList.add('overflow-hidden');\n    body_wrapper.classList.add('body-fs');\n    body_wrapper.classList.remove('body-normal');\n  };\n\n  unsetFullscreen = () => {\n    let body_wrapper = getByClass('body_wrapper');\n    document.body.classList.remove('overflow-hidden');\n    body_wrapper.classList.remove('body-fs');\n    body_wrapper.classList.add('body-normal');\n    setTimeout(() => {\n      scrollPage(this.lyric_playground, 300);\n    }, 200);\n  };\n\n  updateSyncLyric = (offset) => {\n    this.offsetTime += offset;\n    Toast.success('Offset lyric: ' + this.offsetTime + 'ms');\n  };\n\n  onSearch = (obj) => {\n    filterTable('songTable', 1, obj.value ? obj.value : '');\n  };\n\n  createLyricCard = () => {\n    if (this.isNoLyric()) {\n      Toast.warn('No lyric available to create a card');\n      return;\n    }\n    this.setState({ showLyricCardModal: true });\n  };\n\n  closeLyricCardModal = () => {\n    this.setState({ showLyricCardModal: false });\n  };\n\n  render() {\n    const {\n      songData,\n      song,\n      showSetting,\n      isFullscreen,\n      isPlaying,\n      spinning,\n      showWaveform,\n      flipWaveform,\n      analyser,\n      showLyricCardModal\n    } = this.state;\n    const { theme } = this.context;\n    let songURL;\n    if (song.zing_id) {\n      songURL = song.zingStream;\n    } else {\n      songURL = song?.file_name ? getAbsoluteUrl('/api/song/file?file=' + song.file_name) : null;\n    }\n    const image_url = song?.image_url ? getAbsoluteUrl(song.image_url) : spinImage;\n    const backgroundURL = `url(${song?.image_url ? \"'\" + getAbsoluteUrl(song.image_url) + \"'\" : backgroundImage})`;\n\n    return (\n      <div\n        className={`body_wrapper ${theme === THEME_LIGHT ? 'body-light' : 'body-dark'} ${\n          isFullscreen ? 'body-fs' : 'body-normal'\n        }`}\n      >\n        <div id=\"all-song-wrapper\">\n          <div className=\"edit-time\">Posted on: Sep 3, 2021. Last modified: {buildDate ? buildDate : 'Sep 3, 2021'}.</div>\n          {songData && songData.length !== 0 && (\n            <BaiHatTable\n              songData={songData}\n              currSong={song}\n              getAllSongs={this.getAllSongs}\n              playSong={this.playSong}\n              onSearch={this.onSearch}\n              isPlaying={isPlaying}\n            />\n          )}\n        </div>\n\n        <Player\n          song={song}\n          songURL={songURL}\n          onSeeked={this.onSeeked}\n          onPause={this.onPause}\n          onPlay={this.onPlay}\n          ref={(node) => {\n            this.child = node;\n          }}\n          getPlayerInstance={(playerInstance) => {\n            this.playerInstance = playerInstance;\n          }}\n          playSong={this.playSong}\n        />\n\n        <div id=\"lyric_playground\" ref={(node) => (this.lyric_playground = node)} className=\"lyric-pg-picture-bg\">\n          <div className=\"background-wrapper\">\n            <div\n              id=\"div_background\"\n              ref={(node) => (this.div_background = node)}\n              className=\"bg-image\"\n              style={{ backgroundImage: backgroundURL, textAlign: 'center' }}\n            ></div>\n          </div>\n          <div className=\"lyric-wrapper\">\n            <div id=\"div_left_wrapper\" className=\"left-wrapper\" ref={(node) => (this.div_left_wrapper = node)}>\n              <img\n                id=\"spinning_img\"\n                crossOrigin=\"anonymous\"\n                style={{ cursor: 'pointer' }}\n                className={`left_img spinning ${spinning ? '' : 'paused-spin'}`}\n                src={image_url}\n                alt=\"Left info\"\n                onClick={() => {\n                  this.setState({ spinning: !spinning });\n                }}\n              />\n              <canvas id=\"spinning_canvas\" style={{ display: 'none' }}></canvas>\n              <LeftPlayground\n                toggleWaveform={this.toggleWaveform}\n                showWaveform={showWaveform}\n                flipWaveform={flipWaveform}\n                analyser={analyser}\n                initAnalyzer={this.initAnalyzer}\n                myAudio={this.myAudio}\n                getWaveformInstance={(waveformInstance) => {\n                  this.waveformInstance = waveformInstance;\n                }}\n                song={song}\n              />\n            </div>\n            <div\n              id=\"div_result\"\n              className=\"custom-scrollbar karaoke-mode div-res-big-active-line\"\n              style={{ textAlign: 'center' }}\n              ref={(node) => (this.div_result = node)}\n              onClick={() => this.toggleSetting(false)}\n            ></div>\n          </div>\n\n          <Setting\n            div_result={this.div_result}\n            lyric_playground={this.lyric_playground}\n            div_background={this.div_background}\n            div_left_wrapper={this.div_left_wrapper}\n            myAudio={this.myAudio}\n            showSetting={showSetting}\n            isFullscreen={isFullscreen}\n            scrollLyric={this.scrollLyric}\n            initSettingsAtPlayer={(func) => (this.initSettingsAtPlayer = func)}\n            openSetting={() => this.toggleSetting(true)}\n            updateFlipWaveform={(flip) => this.setState({ flipWaveform: flip })}\n            updateSyncLyric={(offset) => this.updateSyncLyric(offset)}\n            createLyricCard={() => this.createLyricCard()}\n          />\n\n          <div className={`${isFullscreen ? 'setbot_fs' : ''} setting_bottom`}>\n            <i className=\"fa fa-arrows-alt btn_align btn_fullscreen\" onClick={this.toggleFullscreen}></i>\n          </div>\n          <div style={{ clear: 'both' }}></div>\n        </div>\n\n        <LyricCardModal\n          isOpen={showLyricCardModal}\n          onClose={this.closeLyricCardModal}\n          song={song}\n          lyricText={this.div_result?.innerText || ''}\n        />\n      </div>\n    );\n  }\n}\n\n// Wrapper component to provide route params to class component\nconst BaiHatWrapper = () => {\n  const params = useParams();\n  return <BaiHat match={{ params }} />;\n};\n\nexport default BaiHatWrapper;\n","import { ACCESS_TOKEN } from '../../constants/Constants';\nimport axiosClient from '../../service/axiosClient';\nimport Toast from '../Toast/Toast';\nimport { ROLE_TABLE } from '../../constants/Constants';\n\nclass Auth {\n  constructor() {\n    this.userInfo = null;\n  }\n\n  isAuthenticated = () => {\n    const access_token = localStorage.getItem(ACCESS_TOKEN);\n    return !!access_token;\n  };\n\n  login = ({ username, password }, successCallback, failCallback) => {\n    const data = {\n      username,\n      password\n    };\n    axiosClient\n      .post('/signin', data)\n      .then((res) => {\n        localStorage.setItem(ACCESS_TOKEN, res[ACCESS_TOKEN]);\n        successCallback();\n      })\n      .catch((err) => {\n        failCallback(err.data ? err.data : err);\n      });\n  };\n\n  logout = () => {\n    axiosClient\n      .post('/signout')\n      .then((res) => {\n        localStorage.removeItem(ACCESS_TOKEN);\n        window.location = '/';\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n      });\n  };\n\n  getMe = () => {\n    return axiosClient.get('/api/user/me');\n  };\n\n  redirectToLoginPage = () => {\n    Toast.info('You need to login first!');\n    localStorage.removeItem(ACCESS_TOKEN);\n    window.location.hash = '/login';\n  };\n\n  /**\n   * Check xem mng roles c tn ti role no c quyn truy cp path hay ko\n   * @param {string[]} roles - Array of role\n   * @param {string} path - URL\n   */\n  rolesHasPermission = (roles, path) => {\n    if (!ROLE_TABLE[path]) return true;\n    for (let i = 0; i < roles.length; i++) {\n      if (ROLE_TABLE[path].includes(roles[i])) return true;\n    }\n    // Dng forEach: bt ng b nn ko c nh!\n    // N s return false trc khi chy vo trong forEach\n    // roles.forEach(role => {\n    //   if (ROLE_TABLE[path].includes(role)) return true;\n    // });\n    return false;\n  };\n}\n\nexport let auth = new Auth();\n","import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst options = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined\n};\n\nconst info = (text) => {\n  toast.info(text, options);\n};\n\nconst success = (text) => {\n  toast.success(text, options);\n};\n\nconst warn = (text) => {\n  toast.warn(text, options);\n};\n\nconst error = (err) => {\n  let msg;\n  if (err.data && err.data.message) msg = err.data.message;\n  else if (err) msg = err.toString();\n  else msg = 'Error: unexpected error occurred!';\n  toast.error(msg, options);\n};\n\nconst customToast = {\n  info,\n  success,\n  warn,\n  error\n};\n\nexport default customToast;\n"],"names":["axios","interceptors","request","use","config","newConfig","_objectSpread","paramsSerializer","params","queryString","stringify","obj","Object","keys","forEach","k","undefined","arrayFormat","baseURL","process","headers","Pragma","localStorage","getItem","ACCESS_TOKEN","Authorization","concat","error","console","log","Promise","reject","response","data","status","auth","redirectToLoginPage","getKaraokeWordStyle","lyric_playground","isLightTheme","classList","contains","fillKaraokeWord","word","setAttribute","getAllSongs","axiosClient","get","getLyric","file","updateListen","path","put","setBulletText","emptyWord","bullet","innerHTML","runKaraokeEffect","myAudio","currWord","st","en","currentTime","emptyKaraokeWord","SearchBox","PureComponent","constructor","props","super","onChange","e","value","target","maxLength","this","errorMsg","length","regexValidation","regexErrorMsg","setState","onKeyUp","searchText","keyCode","onSearch","typingTimer","setTimeout","onKeyDown","clearTimeout","state","name","onClear","regex","match","invalid","focus","render","label","disabled","isRequire","type","placeholder","_jsxs","className","children","_jsx","onClick","title","onClose","caption","showModalPicture","setShowModalPicture","React","selectedSong","setSelectedSong","artist","rainbowColors","lastSoyBg","uniqueSoys","Set","songData","map","song","song_of_the_year","filter","Boolean","sort","a","b","getSoyBackgroundColor","soy","index","indexOf","getSoyTextColor","id","cellSpacing","cellPadding","style","textAlign","cursor","minWidth","sortBy","sortOrder","image_url","getAbsoluteUrl","currSong","src","alt","onClickPicture","href","playSong","isPlaying","listens","background","color","formatCreatedDate","Modal","onCloseModal","width","maxWidth","Player","_this","setMediaSessionMeta","imgUrl","favicon","window","navigator","mediaSession","metadata","MediaMetadata","artwork","sizes","setActionHandler","prevSong","nextSong","playAudio","pauseAudio","setPlayList","pl","activeAudioIdx","playList","initPlayList","activeAudio","setPlayType","getSetting","setActiveAudio","i","setMouseDown","mouseDown","clearMouseDown","toggleShuffle","playType","SHUFFLE","SEQUENCE","toggleRepeat","REPEAT_ONE","togglePlay","Toast","warn","secsToMins","time","int","Math","floor","slice","getCurrentTime","currentTimeFormatted","currentTimePercentage","getDuration","innerText","progressBar","showCurrentTime","requestAnimationFrame","cancelAnimationFrame","showDuration","durationFormatted","duration","updateProgressBar","totalWidth","progressWrapper","offsetWidth","offsetPercentage","nativeEvent","offsetX","onSeeked","Infinity","playPromise","play","then","onPlay","catch","pause","onPause","pt","arguments","shuffle","saveSetting","llPlayer","llPlayPause","componentDidMount","getPlayerInstance","onMouseDown","onMouseUp","ref","node","album","onMouseMove","preload","songURL","onLoadedMetadata","onEnded","crossOrigin","scrollInsideElementToCenter","container","element","now","elapsed","t","offset","pos","elm","pPos","parentNode","getBoundingClientRect","cPos","top","scrollTop","right","bottom","left","getRelativePos","start","change","startTime","performance","animateScroll","easeInOutQuad","scrollInsideElement","offsetHeight","scrollPage","startingY","pageYOffset","elementY","diff","document","body","scrollHeight","innerHeight","step","timestamp","percent","min","scrollTo","Setting","onChangeVolume","volume","initSettingsAtPlayer","lyricAlign","settingLyricAlign","theme","changeTheme","speed","playbackRate","vol","setKaraokeMode","setBlurMode","setGiganticLine","setWordAppear","setLineAppear","setTranslate","updateSyncLyric","align","div_result","settingTheme","themeName","div_background","display","includes","remove","add","toggleKaraokeMode","isKaraokeMode","toggleBlurMode","isBlurMode","toggleGiganticLine","isGiganticLine","flipWaveform","flip","info","updateFlipWaveform","toggleWordAppear","isWordAppear","toggleLineAppear","isLineAppear","toggleTranslate","isTranslate","updateSpeed","Number","toFixed","createLyricCard","showSetting","openSetting","isFullscreen","max","Waveform","drawWaveform","analyser","canvas","innerWidth","height","canvasContext","getContext","bufferLength","frequencyBinCount","totalBar","parseInt","dataArray","Uint8Array","peakArr","Array","fill","velocityArr","WIDTH","HEIGHT","barWidth","averageRGB","getAverageRGB","barHeight","barColor","x","renderFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","paused","waveformAniFr","getBarColor","heightRatio","barRatio","stopWaveform","getWaveformInstance","onresize","debounce","toggleWaveform","showWaveform","initAnalyzer","_Fragment","_ref","isOpen","lyricText","onGenerateCard","selectedText","setSelectedText","useState","useEffect","captureSelection","selection","getSelection","text","toString","trim","handleMouseUp","handleGenerateCard","setTextAlign","textColor","setTextColor","isBold","setIsBold","backgroundColor","setBackgroundColor","useSongImage","setUseSongImage","hasSongImage","overlayOpacity","setOverlayOpacity","brightnessBoost","setBrightnessBoost","fontFamily","setFontFamily","fontSize","setFontSize","checked","onCloseAll","cardRef","useRef","songImageUrl","resolvedSongImageUrl","spinImage","CardConfiguration","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","fontWeight","async","current","rect","size","round","dataUrl","htmlToImage","pixelRatio","cacheBust","link","createElement","songTitle","replaceAll","songArtist","download","click","err","copyText","clipboard","writeText","alert","showDownloadModal","setShowDownloadModal","handleCloseAll","LyricDownloadModal","handleCloseDownloadModal","LyricSelectionModal","buildDate","BaiHat","audioContext","AudioContext","webkitAudioContext","audioSrcNode","createMediaElementSource","createAnalyser","connect","destination","fftSize","isPlaySong","loading","newParams","BaiHatService","res","currInx","find","idx","playerInstance","scrollTableToActiveSong","isScrollTr","location","zing_id","zingStream","songTable","getById","FETCHING_LYRIC","lines","lyric","endsWith","isLrc","hasTranslation","LYRIC_NOT_FOUND","setNoLyric","saveLyric","split","initLyric","isNoLyric","setPlayLyricInterval","startTimes","endTimes","tranMaps","cntWord","offsetTime","currWordID","NO_LYRIC","metaExist","lyricMeta","initLrcLyric","initTrcLyric","temp","startLine","words","startWord","endWord","divLine","_iteratorError","_iteratorAbruptCompletion","_didIteratorError","_step","_iterator","_asyncIterator","next","done","line","decodeTime","substring","createNewElement","_iteratorError2","_iteratorAbruptCompletion2","_didIteratorError2","_step2","_iterator2","parseFloat","myParseFloat","spanWord","replace","appendChild","return","readLyricMeta","appendLyricMeta","lineTimeLen","lineTranTag","tranNum","lineTranText","lineWords","lineTime","lineMap","Map","lineTranMap","_iteratorError3","_iteratorAbruptCompletion3","_didIteratorError3","_step3","_iterator3","reduce","total","curr","_iteratorError4","_iteratorAbruptCompletion4","_didIteratorError4","_step4","_iterator4","lineT","set","has","key","spanTran","end","lastIndexOf","by","date","source","divLyricInfo","d","Date","dStr","isValidDate","formatDateMY","playLyricInterval","setInterval","updateLyric","clearPlayLyricInterval","clearInterval","clearCountdownInterval","reUpdateWordPass","scrollLyric","spinning","waveformInstance","drawWave","countdownAtEmptyWord","timeDiff","timeLeft","ceil","prevWord","prevParent","getAttribute","gotoNextWord","getCurrentWordByTime","currParent","_iteratorError5","_iteratorAbruptCompletion5","_didIteratorError5","_step5","_iterator5","child","activeAtCurr","removeActiveLastLine","currIndex","childNodes","finalLine","_iteratorError6","_iteratorAbruptCompletion6","_didIteratorError6","_step6","_iterator6","offsetTop","clientHeight","sec","mid","lo","hi","currErrWord","countdownInterval","passedWord","removeLineActive","notPassWord","toggleSetting","isShow","toggleFullscreen","setFullscreen","unsetFullscreen","body_wrapper","getByClass","success","filterTable","showLyricCardModal","closeLyricCardModal","page","div_left_wrapper","addEventListener","componentWillUnmount","_this$div_result","context","file_name","backgroundURL","THEME_LIGHT","BaiHatTable","LeftPlayground","func","clear","LyricCardModal","contextType","LiliContext","BaiHatWrapper","useParams","isAuthenticated","login","successCallback","failCallback","username","password","post","setItem","logout","removeItem","getMe","hash","rolesHasPermission","roles","ROLE_TABLE","userInfo","options","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","toast","msg","message"],"sourceRoot":""}