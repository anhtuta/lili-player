{"version":3,"sources":["components/Toast/Toast.js","components/Auth/Auth.js","service/axiosClient.js","assets/images/background.jpg","assets/images/spin.jpg","assets/icons/music_icon.jpg","assets/icons/favicon.png","../../index.js","pages/BaiHat/BaiHatService.js","components/Input/SearchBox.js","components/Modal/Modal.jsx","pages/BaiHat/BaiHatTable.js","pages/BaiHat/Player.js","service/scroll.js","pages/BaiHat/Setting.js","pages/BaiHat/Waveform.js","pages/BaiHat/LeftPlayground.js","pages/BaiHat/BaiHat.js","buildInfo.js"],"names":["options","position","toast","POSITION","TOP_RIGHT","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","customToast","info","text","success","warn","error","err","msg","data","message","toString","auth","constructor","isAuthenticated","localStorage","getItem","ACCESS_TOKEN","login","_ref","successCallback","failCallback","username","password","axiosClient","post","then","res","setItem","catch","logout","removeItem","window","location","console","log","Toast","getMe","get","redirectToLoginPage","hash","rolesHasPermission","roles","path","ROLE_TABLE","i","length","includes","this","userInfo","axios","interceptors","request","use","config","newConfig","paramsSerializer","params","queryString","stringify","obj","Object","keys","forEach","k","arrayFormat","baseURL","process","headers","Pragma","Authorization","Promise","reject","response","status","module","exports","getWait","wait","defer","deferred","promise","resolve","fn","arguments","lastCallAt","timer","pendingArgs","currentWait","currentTime","Date","getTime","isCold","_len","args","Array","_key","leading","accumulate","call","result","apply","concat","clearTimeout","push","setTimeout","flush","bind","argsIndex","results","thisDeferred","getKaraokeWordStyle","lyric_playground","isLightTheme","classList","contains","fillKaraokeWord","word","setAttribute","BaiHatService","getAllSongs","getLyric","file","updateListen","put","setBulletText","emptyWord","bullet","innerHTML","runKaraokeEffect","myAudio","currWord","st","en","emptyKaraokeWord","SearchBox","PureComponent","props","super","onChange","e","value","target","maxLength","errorMsg","regexValidation","regexErrorMsg","setState","onKeyUp","searchText","keyCode","onSearch","typingTimer","onKeyDown","state","name","onClear","regex","match","invalid","focus","render","label","disabled","isRequire","type","placeholder","React","createElement","className","onClick","Modal","title","onClose","children","caption","BaiHatTable","showModalPicture","setShowModalPicture","useState","selectedSong","setSelectedSong","artist","id","cellSpacing","cellPadding","style","textAlign","cursor","minWidth","sortBy","sortOrder","songData","map","song","index","image_url","getAbsoluteUrl","musicIcon","key","currSong","src","alt","onClickPicture","href","playSong","isPlaying","listens","song_of_the_year","background","formatCreatedDate","onCloseModal","width","maxWidth","Player","_this","setMediaSessionMeta","imgUrl","favicon","navigator","mediaSession","metadata","MediaMetadata","artwork","sizes","setActionHandler","prevSong","nextSong","playAudio","pauseAudio","setPlayList","pl","activeAudioIdx","playList","initPlayList","activeAudio","setPlayType","getSetting","setActiveAudio","setMouseDown","mouseDown","clearMouseDown","toggleShuffle","playType","SHUFFLE","SEQUENCE","toggleRepeat","REPEAT_ONE","togglePlay","secsToMins","time","int","Math","floor","slice","getCurrentTime","currentTimeFormatted","currentTimePercentage","getDuration","innerText","progressBar","showCurrentTime","requestAnimationFrame","cancelAnimationFrame","showDuration","durationFormatted","duration","updateProgressBar","totalWidth","progressWrapper","offsetWidth","offsetPercentage","nativeEvent","offsetX","onSeeked","Infinity","playPromise","play","onPlay","pause","onPause","pt","shuffle","saveSetting","createRef","llPlayer","llPlayPause","componentDidMount","getPlayerInstance","onMouseDown","onMouseUp","ref","node","album","onMouseMove","preload","songURL","onLoadedMetadata","onEnded","crossOrigin","getRelativePos","elm","pPos","parentNode","getBoundingClientRect","cPos","pos","top","scrollTop","right","bottom","left","easeInOutQuad","t","scrollInsideElementToCenter","container","element","now","elapsed","offset","start","change","startTime","performance","animateScroll","scrollInsideElement","offsetHeight","scrollPage","startingY","pageYOffset","elementY","diff","document","body","scrollHeight","innerHeight","step","timestamp","percent","min","scrollTo","Setting","onChangeVolume","volume","initSettingsAtPlayer","lyricAlign","settingLyricAlign","theme","changeTheme","speed","playbackRate","vol","setKaraokeMode","setBlurMode","setGiganticLine","setWordAppear","setLineAppear","align","div_result","settingTheme","themeName","div_background","display","remove","add","toggleKaraokeMode","isKaraokeMode","toggleBlurMode","isBlurMode","toggleGiganticLine","isGiganticLine","flipWaveform","flip","updateFlipWaveform","toggleWordAppear","isWordAppear","toggleLineAppear","isLineAppear","updateSpeed","Number","toFixed","showSetting","openSetting","isFullscreen","max","Waveform","drawWaveform","analyser","canvas","innerWidth","height","canvasContext","getContext","bufferLength","frequencyBinCount","totalBar","parseInt","dataArray","Uint8Array","peakArr","fill","velocityArr","WIDTH","HEIGHT","barWidth","averageRGB","getAverageRGB","barHeight","barColor","x","renderFrame","getByteFrequencyData","clearRect","fillStyle","fillRect","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","paused","waveformAniFr","getBarColor","heightRatio","barRatio","stopWaveform","getWaveformInstance","onresize","debounce","LeftPlayground","toggleWaveform","showWaveform","initAnalyzer","Fragment","BaiHat","audioContext","AudioContext","webkitAudioContext","audioSrcNode","createMediaElementSource","createAnalyser","connect","destination","fftSize","isPlaySong","loading","sort","newParams","currInx","find","idx","playerInstance","scrollTableToActiveSong","isScrollTr","zing_id","zingStream","spinImage","songTable","getById","allSongValue","activeTr","FETCHING_LYRIC","lines","lyric","endsWith","isLrc","hasTranslation","LYRIC_NOT_FOUND","setNoLyric","saveLyric","trim","split","initLyric","isNoLyric","setPlayLyricInterval","startTimes","endTimes","tranMaps","cntWord","offsetTime","currWordID","NO_LYRIC","metaExist","lyricMeta","initLrcLyric","initTrcLyric","async","temp","startLine","words","startWord","endWord","divLine","line","decodeTime","substring","createNewElement","parseFloat","myParseFloat","spanWord","replace","appendChild","readLyricMeta","appendLyricMeta","lineTimeLen","lineTranTag","tranNum","lineTranText","lineWords","lineTime","lineMap","Map","lineTranMap","reduce","total","curr","lineT","set","has","a","b","size","spanTran","end","lastIndexOf","by","date","source","divLyricInfo","d","dStr","isValidDate","formatDateMY","playLyricInterval","setInterval","updateLyric","clearPlayLyricInterval","clearInterval","clearCountdownInterval","reUpdateWordPass","scrollLyric","spinning","waveformInstance","drawWave","countdownAtEmptyWord","timeDiff","timeLeft","ceil","prevWord","prevParent","getAttribute","gotoNextWord","getCurrentWordByTime","currParent","child","activeAtCurr","removeActiveLastLine","currIndex","childNodes","finalLine","offsetTop","clientHeight","sec","mid","lo","hi","currErrWord","countdownInterval","passedWord","removeLineActive","notPassWord","toggleSetting","isShow","toggleFullscreen","setFullscreen","unsetFullscreen","body_wrapper","getByClass","filterTable","page","div_left_wrapper","addEventListener","componentWillUnmount","context","file_name","backgroundURL","backgroundImage","THEME_LIGHT","func","clear","contextType","LiliContext","withRouter"],"mappings":"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","file":"static/js/4.7304a902.chunk.js","sourcesContent":["import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nconst options = {\n  position: toast.POSITION.TOP_RIGHT, //\"top-right\"\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined\n};\n\nconst info = (text) => {\n  toast.info(text, options);\n};\n\nconst success = (text) => {\n  toast.success(text, options);\n};\n\nconst warn = (text) => {\n  toast.warn(text, options);\n};\n\nconst error = (err) => {\n  let msg;\n  if (err.data && err.data.message) msg = err.data.message;\n  else if (err) msg = err.toString();\n  else msg = 'Error: unexpected error occurred!';\n  toast.error(msg, options);\n};\n\nconst customToast = {\n  info,\n  success,\n  warn,\n  error\n};\n\nexport default customToast;\n","import { ACCESS_TOKEN } from '../../constants/Constants';\nimport axiosClient from '../../service/axiosClient';\nimport Toast from '../Toast/Toast';\nimport { ROLE_TABLE } from '../../constants/Constants';\n\nclass Auth {\n  constructor() {\n    this.userInfo = null;\n  }\n\n  isAuthenticated = () => {\n    const access_token = localStorage.getItem(ACCESS_TOKEN);\n    return !!access_token;\n  };\n\n  login = ({ username, password }, successCallback, failCallback) => {\n    const data = {\n      username,\n      password\n    };\n    axiosClient\n      .post('/signin', data)\n      .then((res) => {\n        localStorage.setItem(ACCESS_TOKEN, res[ACCESS_TOKEN]);\n        successCallback();\n      })\n      .catch((err) => {\n        failCallback(err.data ? err.data : err);\n      });\n  };\n\n  logout = () => {\n    axiosClient\n      .post('/signout')\n      .then((res) => {\n        localStorage.removeItem(ACCESS_TOKEN);\n        window.location = '/';\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n      });\n  };\n\n  getMe = () => {\n    return axiosClient.get('/api/user/me');\n  };\n\n  redirectToLoginPage = () => {\n    Toast.info('You need to login first!');\n    localStorage.removeItem(ACCESS_TOKEN);\n    window.location.hash = '/login';\n  };\n\n  /**\n   * Check xem mảng roles có tồn tại role nào có quyền truy cập path hay ko\n   * @param {string[]} roles - Array of role\n   * @param {string} path - URL\n   */\n  rolesHasPermission = (roles, path) => {\n    if (!ROLE_TABLE[path]) return true;\n    for (let i = 0; i < roles.length; i++) {\n      if (ROLE_TABLE[path].includes(roles[i])) return true;\n    }\n    // Dùng forEach: bất đồng bộ nên ko được nhé!\n    // Nó sẽ return false trước khi chạy vào trong forEach\n    // roles.forEach(role => {\n    //   if (ROLE_TABLE[path].includes(role)) return true;\n    // });\n    return false;\n  };\n}\n\nexport let auth = new Auth();\n","import axios from 'axios';\nimport queryString from 'query-string';\nimport { ACCESS_TOKEN } from '../constants/Constants';\nimport { auth } from '../components/Auth/Auth';\n\nconst cleanParam = (obj) => {\n  Object.keys(obj).forEach((k) => {\n    if (obj[k] === null || obj[k] === undefined) {\n      delete obj[k];\n    }\n  });\n  return obj;\n};\n\naxios.interceptors.request.use(\n  function (config) {\n    const newConfig = {\n      ...config,\n      paramsSerializer: (params) =>\n        queryString.stringify(cleanParam(params), { arrayFormat: 'repeat' }),\n      baseURL: process.env.REACT_APP_HOST_API,\n      // withCredentials: true,\n      headers: {\n        ...config.headers,\n        Pragma: 'no-cache'\n      }\n    };\n\n    // Add auth token\n    if (localStorage.getItem(ACCESS_TOKEN)) {\n      newConfig.headers.Authorization = `Bearer ${localStorage.getItem(ACCESS_TOKEN)}`;\n    }\n\n    return newConfig;\n  },\n  (error) => {\n    console.log(error);\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    if (response && response.data) return response.data;\n    return response;\n  },\n  (error) => {\n    if (error.response && error.response.status) {\n      if (error.response.status === 401) {\n        auth.redirectToLoginPage();\n      }\n      //... handle other statuses\n      return Promise.reject(error.response);\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default axios;\n","module.exports = __webpack_public_path__ + \"static/media/background.ab8abda0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/spin.b192bd62.jpg\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4RDmRXhpZgAATU0AKgAAAAgABAE7AAIAAAAJAAAISodpAAQAAAABAAAIVJydAAEAAAASAAAQzOocAAcAAAgMAAAAPgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFuaHR1IFRhAAAABZADAAIAAAAUAAAQopAEAAIAAAAUAAAQtpKRAAIAAAADMDEAAJKSAAIAAAADMDEAAOocAAcAAAgMAAAIlgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIwMjA6MDE6MDMgMjI6NTg6NTIAMjAyMDowMTowMyAyMjo1ODo1MgAAAEEAbgBoAHQAdQAgAFQAYQAAAP/hCxtodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+DQo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIj48cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPjxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSJ1dWlkOmZhZjViZGQ1LWJhM2QtMTFkYS1hZDMxLWQzM2Q3NTE4MmYxYiIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIi8+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPjx4bXA6Q3JlYXRlRGF0ZT4yMDIwLTAxLTAzVDIyOjU4OjUyLjAxMjwveG1wOkNyZWF0ZURhdGU+PC9yZGY6RGVzY3JpcHRpb24+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxkYzpjcmVhdG9yPjxyZGY6U2VxIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHJkZjpsaT5Bbmh0dSBUYTwvcmRmOmxpPjwvcmRmOlNlcT4NCgkJCTwvZGM6Y3JlYXRvcj48L3JkZjpEZXNjcmlwdGlvbj48L3JkZjpSREY+PC94OnhtcG1ldGE+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9J3cnPz7/2wBDAAcF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\"","module.exports = __webpack_public_path__ + \"static/media/favicon.b192bd62.png\";","/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce (fn, wait = 0, options = {}) {\n  let lastCallAt\n  let deferred\n  let timer\n  let pendingArgs = []\n  return function debounced (...args) {\n    const currentWait = getWait(wait)\n    const currentTime = new Date().getTime()\n\n    const isCold = !lastCallAt || (currentTime - lastCallAt) > currentWait\n\n    lastCallAt = currentTime\n\n    if (isCold && options.leading) {\n      return options.accumulate\n        ? Promise.resolve(fn.call(this, [args])).then(result => result[0])\n        : Promise.resolve(fn.call(this, ...args))\n    }\n\n    if (deferred) {\n      clearTimeout(timer)\n    } else {\n      deferred = defer()\n    }\n\n    pendingArgs.push(args)\n    timer = setTimeout(flush.bind(this), currentWait)\n\n    if (options.accumulate) {\n      const argsIndex = pendingArgs.length - 1\n      return deferred.promise.then(results => results[argsIndex])\n    }\n\n    return deferred.promise\n  }\n\n  function flush () {\n    const thisDeferred = deferred\n    clearTimeout(timer)\n\n    Promise.resolve(\n      options.accumulate\n        ? fn.call(this, pendingArgs)\n        : fn.apply(this, pendingArgs[pendingArgs.length - 1])\n    )\n      .then(thisDeferred.resolve, thisDeferred.reject)\n\n    pendingArgs = []\n    deferred = null\n  }\n}\n\nfunction getWait (wait) {\n  return (typeof wait === 'function') ? wait() : wait\n}\n\nfunction defer () {\n  const deferred = {}\n  deferred.promise = new Promise((resolve, reject) => {\n    deferred.resolve = resolve\n    deferred.reject = reject\n  })\n  return deferred\n}\n","import axiosClient from '../../service/axiosClient';\n\nconst getAllSongs = (params) => {\n  return axiosClient.get('/api/song/all', { params });\n};\n\nconst getLyric = (file) => {\n  return axiosClient.get('/api/lyric?file=' + file);\n};\n\nconst updateListen = (path) => {\n  return axiosClient.put('/api/song/listens?path=' + path);\n};\n\nconst getKaraokeWordStyle = (lyric_playground, process) => {\n  let isLightTheme = lyric_playground.classList.contains('lyric-pg-light');\n  return (\n    'background-image:' +\n    //\"-webkit-linear-gradient(top, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%), \" +\n    '-webkit-linear-gradient(left, ' +\n    (isLightTheme ? '#2199F9' : '#FC0') +\n    ' ' +\n    process +\n    '%, ' +\n    (isLightTheme ? '#333' : '#FFF') +\n    ' 0%)'\n  );\n};\n\nconst fillKaraokeWord = (lyric_playground, word) => {\n  word.setAttribute('style', getKaraokeWordStyle(lyric_playground, 100));\n};\n\nconst setBulletText = (lyric_playground, emptyWord, bullet) => {\n  let bulletArr = ['&nbsp;', '•', '••', '•••', '••••', '•••••'];\n  emptyWord.innerHTML = bulletArr[bullet];\n  fillKaraokeWord(lyric_playground, emptyWord);\n};\n\nconst runKaraokeEffect = (lyric_playground, myAudio, currWord, st, en) => {\n  let process = ((myAudio.currentTime - st) * 100) / (en - st);\n  currWord.setAttribute('style', getKaraokeWordStyle(lyric_playground, process));\n};\n\nconst emptyKaraokeWord = (word) => {\n  word.setAttribute('style', '');\n};\n\nconst BaiHatService = {\n  getAllSongs,\n  getLyric,\n  updateListen,\n  getKaraokeWordStyle,\n  fillKaraokeWord,\n  setBulletText,\n  runKaraokeEffect,\n  emptyKaraokeWord\n};\n\nexport default BaiHatService;\n","import React, { PureComponent } from 'react';\nimport './Input.scss';\n\nconst DEFAULT_INPUT_MAX_LENGTH = 200;\nconst TYPING_INTERVAL = 300;\n\nclass SearchBox extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      errorMsg: '',\n      invalid: false,\n      focus: false\n    };\n    this.typingTimer = null;\n  }\n\n  onChange = (e) => {\n    const { value } = e.target;\n    const maxLength = this.props.maxLength ? this.props.maxLength : DEFAULT_INPUT_MAX_LENGTH;\n    let errorMsg = '';\n\n    if (value.length > maxLength) {\n      errorMsg = 'Max length of search text is: ' + maxLength;\n    } else if (!this.regexValidation(value)) {\n      errorMsg = this.props.regexErrorMsg ? this.props.regexErrorMsg : 'Search text is invalid';\n    }\n\n    this.setState({\n      value,\n      errorMsg\n    });\n  };\n\n  onKeyUp = (e, searchText) => {\n    if (e.keyCode === 13) {\n      // Enter\n      this.onSearch(searchText);\n    } else {\n      this.typingTimer = setTimeout(() => {\n        this.onSearch(searchText);\n      }, TYPING_INTERVAL);\n    }\n  };\n\n  onKeyDown = () => {\n    clearTimeout(this.typingTimer);\n  };\n\n  onSearch = () => {\n    let { value } = this.state;\n    this.props.onSearch({ name: this.props.name, value });\n  };\n\n  onClear = () => {\n    this.setState({\n      value: ''\n    });\n    this.props.onSearch({ name: this.props.name, value: null });\n  };\n\n  regexValidation = (value) => {\n    const regex = this.props.regex ? this.props.regex : '';\n    if (value === '' || regex === '') return true;\n    return value.match(regex);\n  };\n\n  render() {\n    const { name, label, disabled = false, isRequire = false, type = 'text', placeholder = 'Search...' } = this.props;\n\n    const { value, errorMsg } = this.state;\n\n    return (\n      <div className=\"input-wrapper\">\n        {label && (\n          <label className=\"input-label\">\n            {label}\n            {isRequire && <span className=\"input-require\">&nbsp;*</span>}\n          </label>\n        )}\n        <div className=\"input-search-wrapper\">\n          <i className=\"fa fa-search input-icon-search\" onClick={this.onSearch}></i>\n          <input\n            type={type}\n            name={name}\n            value={value}\n            disabled={disabled}\n            onChange={this.onChange}\n            className={'input-text input-text-search ' + (!!errorMsg ? ' input-error' : '')}\n            placeholder={placeholder}\n            onKeyUp={this.onKeyUp}\n            onKeyDown={this.onKeyDown}\n          />\n          {value && <i className=\"fa fa-times input-icon-clear\" onClick={this.onClear}></i>}\n          {!!errorMsg && <div className=\"input-error-msg\">{errorMsg}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchBox;\n","import React from 'react';\nimport './Modal.scss';\n\nconst Modal = (props) => {\n  return (\n    <div className=\"modal-wrapper\">\n      <span className=\"close\" title=\"Close\" onClick={props.onClose}>\n        &times;\n      </span>\n      <div className=\"modal-content\">{props.children}</div>\n      <div className=\"caption\">{props.caption}</div>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport SearchBox from '../../components/Input/SearchBox';\nimport Modal from '../../components/Modal/Modal';\nimport { getAbsoluteUrl } from '../../service/UtilService';\nimport musicIcon from '../../assets/icons/music_icon.jpg';\n\nconst BaiHatTable = (props) => {\n  const [showModalPicture, setShowModalPicture] = React.useState(false);\n  const [selectedSong, setSelectedSong] = React.useState(null);\n\n  const onClickPicture = (song) => {\n    if (song.image_url) {\n      setSelectedSong({ ...song });\n      setShowModalPicture(true);\n    }\n  };\n\n  const onCloseModal = () => {\n    setSelectedSong(null);\n    setShowModalPicture(false);\n  };\n\n  const caption = selectedSong ? selectedSong.artist + ' - ' + selectedSong.title : '';\n\n  const imgModalStyle = {\n    width: '400px', // nếu browser width >= 400px thì img width cũng chỉ 400px\n    maxWidth: '80%' // để resize theo with của browser nếu browser width < 400px\n  };\n\n  return (\n    <div id=\"all_songs\">\n      <div className=\"search-wrapper\">\n        <SearchBox name=\"searchText\" onSearch={props.onSearch} />\n      </div>\n      <div className=\"all-song-value custom-scrollbar\">\n        <table className=\"table_striped\" id=\"songTable\" cellSpacing=\"0\" cellPadding=\"0\">\n          <thead>\n            <tr>\n              <th style={{ textAlign: 'right' }}>No.</th>\n              <th\n                style={{ cursor: 'pointer', minWidth: '220px' }}\n                onClick={() => props.getAllSongs({ sortBy: 'title', sortOrder: 'ASC' })}\n              >\n                Song\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'listens', sortOrder: 'DESC' })}>\n                Listens\n              </th>\n              <th\n                style={{ cursor: 'pointer' }}\n                onClick={() => props.getAllSongs({ sortBy: 'song_of_the_year', sortOrder: 'DESC' })}\n                title=\"Song of the year\"\n              >\n                SOY\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'type', sortOrder: 'ASC' })}>\n                Type\n              </th>\n              <th style={{ cursor: 'pointer' }} onClick={() => props.getAllSongs({ sortBy: 'createdDate', sortOrder: 'DESC' })}>\n                Date\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {props.songData.map((song, index) => {\n              const image_url = song.image_url ? getAbsoluteUrl(song.image_url) : musicIcon;\n              return (\n                <tr\n                  key={song.id}\n                  className={props.currSong && props.currSong.path === song.path ? 'tr-active' : ''}\n                  id={'tr-' + song.id}\n                >\n                  <td>{index + 1}</td>\n                  <td className=\"td-song-info\">\n                    <img\n                      className=\"song-picture\"\n                      src={image_url}\n                      alt={song.artist + ' - ' + song.title}\n                      onClick={() => onClickPicture(song)}\n                    />\n                    <a className=\"song-item\" href={'#/bai-hat/' + song.path} onClick={() => props.playSong(song)}>\n                      <div className=\"song-title\">{song.title}</div>\n                      <div className=\"song-artist\">{song.artist}</div>\n                    </a>\n                    <i className={'icon-play ' + (props.isPlaying ? 'playing' : 'pause')}></i>\n                  </td>\n                  <td>{song.listens}</td>\n                  <td>\n                    {song.song_of_the_year && (\n                      <span className=\"soy\" style={{ background: `var(--soy-${song.song_of_the_year}, #aeaeae)` }}>\n                        {song.song_of_the_year}\n                      </span>\n                    )}\n                  </td>\n                  <td>{song.type}</td>\n                  <td>{song.formatCreatedDate}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n      {showModalPicture && (\n        <Modal onClose={onCloseModal} caption={caption}>\n          <img style={imgModalStyle} className=\"img-modal\" src={getAbsoluteUrl(selectedSong.image_url)} alt={caption} />\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default BaiHatTable;\n","import React, { PureComponent } from 'react';\nimport Toast from '../../components/Toast/Toast';\nimport { saveSetting, getSetting, shuffle } from '../../service/UtilService';\nimport { SEQUENCE, SHUFFLE, REPEAT_ONE } from '../../constants/Constants';\nimport favicon from '../../assets/icons/favicon.png';\nimport './Player.css';\n\nclass Player extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playType: SEQUENCE,\n      isPlaying: false\n    };\n    this.myAudio = React.createRef();\n    this.currentTime = React.createRef();\n    this.progressWrapper = React.createRef();\n    this.progressBar = React.createRef();\n    this.llPlayer = React.createRef();\n    this.llPlayPause = React.createRef();\n    this.duration = React.createRef();\n    this.mouseDown = false;\n    this.showCurrentTime = null;\n    this.playList = []; // danh sách bài hát sẽ được phát\n    this.initPlayList = []; // danh sách ban đầu, để khi shuffle, xong lại chuyển về sequence, thì sẽ lấy list này\n    this.activeAudio = 0; // Index of current song in playList\n  }\n\n  componentDidMount() {\n    // truyền instance của class này cho component cha,\n    // để thằng cha có thể gọi các function trong class này\n    this.props.getPlayerInstance(this);\n  }\n\n  // Hiện tại BE ko còn lỗi ko get được duration của API streaming MP3 nữa,\n  // nên tạm thời ko cần show warning\n  // componentDidUpdate(prevProps) {\n  //   if (this.props.songURL !== prevProps.songURL) {\n  //     const interShowDurationIssue = setInterval(() => {\n  //       if (this.myAudio && this.myAudio.duration === Infinity) {\n  //         Toast.warn('Cannot get duration of this song from Zing');\n  //         clearInterval(interShowDurationIssue);\n  //       }\n  //     }, 1000);\n  //   }\n  // }\n\n  // Ref: https://developer.mozilla.org/en-US/docs/Web/API/MediaSession\n  setMediaSessionMeta = (title, artist, imgUrl) => {\n    if (!imgUrl) {\n      imgUrl = favicon;\n    }\n\n    if ('mediaSession' in window.navigator) {\n      window.navigator.mediaSession.metadata = new window.MediaMetadata({\n        title: title,\n        artist: artist,\n        artwork: [\n          { src: imgUrl, sizes: '96x96', type: 'image/png' },\n          { src: imgUrl, sizes: '128x128', type: 'image/png' },\n          { src: imgUrl, sizes: '192x192', type: 'image/png' },\n          { src: imgUrl, sizes: '256x256', type: 'image/png' },\n          { src: imgUrl, sizes: '384x384', type: 'image/png' },\n          { src: imgUrl, sizes: '512x512', type: 'image/png' }\n        ]\n      });\n      window.navigator.mediaSession.setActionHandler('previoustrack', this.prevSong);\n      window.navigator.mediaSession.setActionHandler('nexttrack', this.nextSong);\n      window.navigator.mediaSession.setActionHandler('play', this.playAudio);\n      window.navigator.mediaSession.setActionHandler('pause', this.pauseAudio);\n      window.navigator.mediaSession.setActionHandler('stop', this.pauseAudio);\n    } else {\n      console.log(\"Your browser doesn't not support MediaSession\");\n    }\n  };\n\n  // Mỗi lần parent muốn đổi sang phát 1 danh sách khác thì parent phải\n  // truyền danh sách phát mới đó thông qua function này, và phải setPlayType lại,\n  // vì nếu playType = shuffle thì cũng cần shuffle lại cái playList vừa được\n  // truyền vào đó (mà việc shuffle này được thực hiện trong function setPlayType)\n  setPlayList = (pl, activeAudioIdx) => {\n    // Note dùng như sau là sai nhé:\n    // this.playList = pl;\n    // Đây là truyền tham chiếu, do đó nếu sau này thay đổi biến this.playList\n    // (shuffle nó chẳng hạn, thì biến pl từ component cha cũng sẽ thay đổi theo => hỏng)\n    this.playList = [...pl];\n    this.initPlayList = [...pl];\n    this.activeAudio = activeAudioIdx;\n    this.setPlayType(getSetting('playType'));\n  };\n\n  setActiveAudio = (song) => {\n    // Nếu click Next/Previous button thì sẽ rơi vào case này: activeAudio đã được update\n    // ở 2 function đó rồi\n    if (this.playList[this.activeAudio].id === song.id) return;\n\n    // Nếu click trực tiếp trên songTable để phát bài mới thì ta cần update lại activeAudio\n    for (let i = 0; i < this.playList.length; i++) {\n      if (this.playList[i].id === song.id) {\n        this.activeAudio = i;\n        break;\n      }\n    }\n    console.log('reset ActiveAudio: ', this.activeAudio);\n  };\n\n  setMouseDown = () => {\n    this.mouseDown = true;\n  };\n\n  clearMouseDown = () => {\n    this.mouseDown = false;\n  };\n\n  // Trong app này, việc toggle được áp dụng với các button có 2 state: ON, OFF.\n  // Toggle sẽ lấy giá trị mới ngược với giá trị hiện tại.\n  // Trong các function toggle sẽ KHÔNG update state, và sẽ gọi các function abc() khác\n  // để bọn chúng setState, vì có thể có chỗ khác cũng sẽ gọi các function abc() đó,\n  // nếu update state trong toggle thì nơi khác gọi abc() sẽ ko update state được\n  toggleShuffle = () => {\n    this.state.playType === SHUFFLE ? this.setPlayType(SEQUENCE) : this.setPlayType(SHUFFLE);\n  };\n\n  toggleRepeat = () => {\n    this.state.playType === REPEAT_ONE ? this.setPlayType(SEQUENCE) : this.setPlayType(REPEAT_ONE);\n  };\n\n  togglePlay = () => {\n    this.state.isPlaying ? this.pauseAudio() : this.playAudio();\n  };\n\n  prevSong = () => {\n    const { playType } = this.state;\n    if (playType !== REPEAT_ONE) {\n      if (this.activeAudio === 0) {\n        Toast.warn('This is the first song of playing list!');\n        return;\n      } else this.activeAudio--;\n    }\n    this.props.playSong(this.playList[this.activeAudio], true);\n  };\n\n  nextSong = () => {\n    const { playType } = this.state;\n    if (playType !== REPEAT_ONE) {\n      if (this.activeAudio === this.playList.length - 1) {\n        Toast.warn('This is the last song of playing list. Please select another song manually to play!');\n        this.togglePlay(); // stop playing\n        return;\n      } else this.activeAudio++;\n    }\n    this.props.playSong(this.playList[this.activeAudio], true);\n  };\n\n  secsToMins = (time) => {\n    let int = Math.floor(time),\n      mins = Math.floor(int / 60),\n      secs = int % 60,\n      newTime = mins + ':' + ('0' + secs).slice(-2);\n\n    return newTime;\n  };\n\n  getCurrentTime = () => {\n    if (!this.myAudio) return;\n\n    const currentTimeFormatted = this.secsToMins(this.myAudio.currentTime),\n      currentTimePercentage = (this.myAudio.currentTime / this.getDuration()) * 100;\n\n    this.currentTime.innerText = currentTimeFormatted;\n    this.progressBar.style.width = currentTimePercentage + '%';\n\n    if (this.state.isPlaying) {\n      this.showCurrentTime = requestAnimationFrame(this.getCurrentTime);\n    } else {\n      cancelAnimationFrame(this.showCurrentTime);\n    }\n  };\n\n  showDuration = () => {\n    let durationFormatted = this.secsToMins(this.getDuration());\n    this.duration.innerText = durationFormatted;\n  };\n\n  /**\n   * Dùng updateProgressBar cho cả 2 event onClick và onMouseMove để khi user click và kéo,\n   * sau đó thả thì nó vẫn tua được tới vị trí user thả chuột\n   */\n  updateProgressBar = (e) => {\n    const totalWidth = this.progressWrapper.offsetWidth;\n    const offsetX = e.nativeEvent.offsetX; // https://stackoverflow.com/a/31520106/7688028\n    const offsetPercentage = offsetX / totalWidth;\n\n    if (this.mouseDown || e.type === 'click') {\n      this.myAudio.currentTime = this.getDuration() * offsetPercentage;\n      // Nếu isPlaying = true, thì việc update time đã được thực hiện ở requestAnimationFrame ở trên rồi\n      if (!this.state.isPlaying) {\n        this.getCurrentTime();\n      }\n      this.props.onSeeked();\n    }\n  };\n\n  // Nếu ko get được duration thì API streaming MP3 phía BE bị lỗi, cần fix BE.\n  // Hiện tại thì BE chưa có lỗi này, nhưng nếu chẳng may dính thì để duration = 10min\n  getDuration = () => {\n    return this.myAudio.duration === Infinity ? 600 : this.myAudio.duration;\n  };\n\n  playAudio = () => {\n    let playPromise = this.myAudio.play();\n\n    // In browsers that haven't yet supported this functionality,\n    // playPromise won't be defined.\n    if (playPromise !== undefined) {\n      playPromise\n        .then(() => {\n          // Automatic playback started!\n          this.setState({ isPlaying: true }, () => {\n            this.getCurrentTime();\n            this.props.onPlay();\n          });\n        })\n        .catch((error) => {\n          // Automatic playback failed.\n          this.pauseAudio();\n          console.log('Error playing file: ', error);\n          Toast.error('Lỗi: KHÔNG thể tự động phát nhạc, do bạn chưa tương tác với trang, hoặc Zing không cho phép phát bài này');\n        });\n    } else {\n      this.pauseAudio();\n      Toast.error(\"Your browser hasn't yet supported this functionality\");\n    }\n  };\n\n  pauseAudio = () => {\n    this.myAudio.pause();\n    this.props.onPause();\n    this.setState({ isPlaying: false });\n  };\n\n  // default = SEQUENCE\n  setPlayType = (pt = SEQUENCE) => {\n    this.setState({ playType: pt });\n    if (pt === SHUFFLE) {\n      const currSong = this.playList[this.activeAudio];\n\n      // Mỗi lần chọn/chuyển sang phát ngẫu nhiên sẽ trộn lại danh sách phát\n      shuffle(this.playList);\n\n      // find and move the currSong to the head of playList\n      for (let i = 0; i < this.playList.length; i++) {\n        if (this.playList[i].id === currSong.id) {\n          [this.playList[i], this.playList[0]] = [this.playList[0], this.playList[i]]; // swap 2 elements\n          this.activeAudio = 0;\n          break;\n        }\n      }\n\n      // console.log(\n      //   'After shuffle: ',\n      //   this.playList.map((song) => `${song.id}: ${song.title} (${song.artist})`)\n      // );\n    } else {\n      const currSong = this.playList[this.activeAudio];\n      this.playList = [...this.initPlayList];\n\n      // find currSong and set activeAudio equal to currSong position\n      for (let i = 0; i < this.playList.length; i++) {\n        if (this.playList[i].id === currSong.id) {\n          this.activeAudio = i;\n          break;\n        }\n      }\n\n      // console.log(\n      //   'After sequence: ',\n      //   this.playList.map((song) => `${song.id}: ${song.title} (${song.artist})`)\n      // );\n    }\n\n    saveSetting('playType', pt);\n  };\n\n  render() {\n    const { song } = this.props;\n    const { playType, isPlaying } = this.state;\n\n    return (\n      <div\n        className={`ll_player ${isPlaying ? 'll-playing' : 'll-paused'}`}\n        onMouseDown={this.setMouseDown}\n        onMouseUp={this.clearMouseDown}\n        ref={(node) => (this.llPlayer = node)}\n      >\n        <div className=\"info\">\n          <div id=\"song_details\">\n            <div className=\"song_title\">{song.title}</div>\n            <div className=\"song_artist\">{song.artist}</div>\n            <div className=\"song_album\">({song.album ? song.album : 'No Album'})</div>\n          </div>\n        </div>\n\n        <div className=\"ll-btn-wrapper\">\n          <button\n            className={`ll-shuffle ${playType === SHUFFLE ? 'active' : ''}`}\n            title={`${playType === SHUFFLE ? 'Turn off shuffle' : 'Shuffle'}`}\n            onClick={this.toggleShuffle}\n          >\n            <div className=\"arrow\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button className=\"ll-button ll-btn-prev\" title=\"Previous\" onClick={this.prevSong}>\n            <div className=\"arrow arrow-transform\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button\n            className=\"ll-button ll-play-pause\"\n            title={isPlaying ? 'Pause' : 'Play'}\n            onClick={this.togglePlay}\n            ref={(node) => (this.llPlayPause = node)}\n          >\n            <div className=\"arrow arrow-transform\"></div>\n          </button>\n          <button className=\"ll-button ll-btn-next\" title=\"Next\" onClick={this.nextSong}>\n            <div className=\"arrow arrow-transform\"></div>\n            <div className=\"arrow\"></div>\n          </button>\n          <button\n            className={`ll-repeat ${playType === REPEAT_ONE ? 'active' : ''}`}\n            title=\"Repeat one\"\n            onClick={this.toggleRepeat}\n          ></button>\n        </div>\n\n        <div className=\"time\">\n          <span className=\"current-time\" ref={(node) => (this.currentTime = node)}>\n            0:00\n          </span>\n          <span\n            className=\"progress\"\n            ref={(node) => (this.progressWrapper = node)}\n            onClick={this.updateProgressBar}\n            onMouseMove={this.updateProgressBar}\n          >\n            <span ref={(node) => (this.progressBar = node)}></span>\n          </span>\n          <span className=\"duration\" ref={(node) => (this.duration = node)}>\n            0:00\n          </span>\n        </div>\n\n        <audio\n          ref={(node) => (this.myAudio = node)}\n          id=\"myAudio\"\n          preload=\"metadata\"\n          src={this.props.songURL}\n          onLoadedMetadata={this.showDuration}\n          onEnded={this.nextSong}\n          crossOrigin=\"anonymous\"\n        ></audio>\n      </div>\n    );\n  }\n}\n\nexport default Player;\n","function getRelativePos(elm) {\n  let pPos = elm.parentNode.getBoundingClientRect(), // parent pos\n    cPos = elm.getBoundingClientRect(), // target pos\n    pos = {};\n\n  pos.top = cPos.top - pPos.top + elm.parentNode.scrollTop;\n  pos.right = cPos.right - pPos.right;\n  pos.bottom = cPos.bottom - pPos.bottom;\n  pos.left = cPos.left - pPos.left;\n\n  return pos;\n}\n\n// From: https://gist.github.com/gre/1650294\nfunction easeInOutCubic(t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\nfunction easeInOutQuad(t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\n\n/**\n * Scroll to an element inside a container\n * Chú ý: element = thẻ div. Nếu element mà là thẻ span thì nó sẽ scroll lên top của container\n * @param {HTMLElement} container The wrapper element to do scrolling\n * @param {HTMLElement} element Element inside container. Scroll to its position\n * @param {Number} duration Time to scroll, in milisecond\n * @param {Number} offset sau khi scroll tới element, đẩy nó lên 1 đoạn = offset (âm = đẩy xuống)\n **/\nexport function scrollInsideElement(container, element, duration, offset = 0) {\n  let pos = getRelativePos(element);\n  let start = container.scrollTop,\n    change = pos.top - start,\n    startTime = performance.now(),\n    now,\n    elapsed,\n    t;\n\n  function animateScroll() {\n    now = performance.now();\n    elapsed = now - startTime;\n    t = elapsed / duration;\n\n    container.scrollTop = start + change * easeInOutQuad(t) + offset;\n\n    if (t < 1) window.requestAnimationFrame(animateScroll);\n  }\n\n  animateScroll();\n}\n\n/**\n * Scroll to an element inside a container, but element will be\n * in the center of container\n */\nexport function scrollInsideElementToCenter(container, element, duration) {\n  scrollInsideElement(container, element, duration, -container.offsetHeight / 2 + element.offsetHeight / 2);\n}\n\n/**\n * Scroll the page to an element's position (element nên là thẻ div, ko phải span)\n * @param {HTMLElement} element the tag we wants browser to scroll to\n * @param {Number} duration scrolling time in milisecond\n */\nexport function scrollPage(element, duration) {\n  let startingY = window.pageYOffset;\n  let elementY = window.pageYOffset + element.getBoundingClientRect().top;\n\n  // If element is close to page's bottom then window will scroll only to some position above the element.\n  let targetY =\n    document.body.scrollHeight - elementY < window.innerHeight ? document.body.scrollHeight - window.innerHeight : elementY;\n  let diff = targetY - startingY;\n  let start;\n\n  if (!diff) return;\n\n  // Bootstrap our animation - it will get called right before next frame shall be rendered.\n  window.requestAnimationFrame(function step(timestamp) {\n    if (!start) start = timestamp;\n    // Elapsed miliseconds since start of scrolling.\n    let time = timestamp - start;\n\n    // Get percent of completion in range [0, 1].\n    let percent = Math.min(time / duration, 1);\n\n    // Apply the easing.\n    // It can cause bad-looking slow frames in browser performance tool, so be careful.\n    percent = easeInOutCubic(percent);\n\n    window.scrollTo(0, startingY + diff * percent);\n\n    // Proceed with animation as long as we wanted it to.\n    if (time < duration) {\n      window.requestAnimationFrame(step);\n    }\n  });\n}\n","import React, { PureComponent } from 'react';\nimport Toast from '../../components/Toast/Toast';\nimport { saveSetting, getSetting } from '../../service/UtilService';\nimport { scrollPage } from '../../service/scroll';\n\nclass Setting extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      volume: 100\n    };\n  }\n\n  onChangeVolume = (e) => {\n    const { value } = e.target;\n    const volume = value / 100;\n    this.setState({ volume: value });\n    this.props.myAudio.volume = volume;\n    saveSetting('volume', volume);\n  };\n\n  componentDidMount() {\n    this.props.initSettingsAtPlayer(this.initSettingsAtPlayer);\n  }\n\n  /**\n   * Init data for html element: lyric_playground, div_result and my_audio\n   * Chủ yếu init về css style chứ ko thay đổi state gì của React component\n   */\n  initSettingsAtPlayer = () => {\n    const { myAudio, lyric_playground } = this.props;\n    let lyricAlign = getSetting('lyricAlign');\n    if (lyricAlign) this.settingLyricAlign(lyricAlign);\n\n    let theme = getSetting('theme');\n    if (theme) {\n      switch (theme) {\n        case 'dark':\n          this.changeTheme('dark');\n          break;\n        case 'light':\n          this.changeTheme('light');\n          break;\n        case 'picture-bg':\n          this.changeTheme('picture-bg');\n          break;\n        default:\n          break;\n      }\n    }\n\n    // changeAudioSpeed\n    let speed = getSetting('speed');\n    if (speed) myAudio.playbackRate = speed;\n\n    // changeAudioVolume\n    let vol = getSetting('volume');\n    if (vol) {\n      myAudio.volume = vol;\n      this.setState({ volume: vol * 100 });\n    }\n\n    this.setKaraokeMode(getSetting('karaokeMode'));\n    this.setBlurMode(getSetting('blurMode'));\n    this.setGiganticLine(getSetting('giganticLine'));\n    this.setWordAppear(getSetting('wordAppear'));\n    this.setLineAppear(getSetting('lineAppear'));\n    setTimeout(() => {\n      scrollPage(lyric_playground, 300);\n    }, 10);\n  };\n\n  settingLyricAlign = (align) => {\n    this.props.div_result.style.textAlign = align;\n    saveSetting('lyricAlign', align);\n  };\n\n  settingTheme = (themeName) => {\n    this.changeTheme(themeName);\n    saveSetting('theme', themeName);\n  };\n\n  /**\n   * Note: Class theme sẽ bắt đầu = \"lyric-pg-\"\n   * Do đó những class ko liên quan đến theme KO được bắt đầu = \"lyric-pg-\"\n   */\n  changeTheme = (themeName) => {\n    const { lyric_playground, div_background } = this.props;\n\n    div_background.style.display = themeName === 'picture-bg' ? '' : 'none';\n\n    lyric_playground.classList.forEach((className) => {\n      if (className.includes('lyric-pg-')) lyric_playground.classList.remove(className);\n    });\n    lyric_playground.classList.add('lyric-pg-' + themeName);\n  };\n\n  toggleKaraokeMode = () => {\n    if (!this.props.div_result.classList.contains('karaoke-mode')) {\n      this.setKaraokeMode(true);\n    } else {\n      this.setKaraokeMode(false);\n    }\n  };\n  setKaraokeMode = (isKaraokeMode) => {\n    const { div_result } = this.props;\n    if (isKaraokeMode === true) {\n      div_result.classList.add('karaoke-mode');\n      div_result.classList.remove('karaoke-off');\n      saveSetting('karaokeMode', true);\n    } else if (isKaraokeMode === false) {\n      div_result.classList.remove('karaoke-mode');\n      div_result.classList.add('karaoke-off');\n      saveSetting('karaokeMode', false);\n    }\n  };\n\n  toggleBlurMode = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('blur-mode')) {\n      this.setBlurMode(true);\n    } else {\n      this.setBlurMode(false);\n    }\n  };\n  setBlurMode = (isBlurMode) => {\n    const { div_result } = this.props;\n    if (isBlurMode === true) {\n      div_result.classList.add('blur-mode');\n      saveSetting('blurMode', true);\n    } else if (isBlurMode === false) {\n      div_result.classList.remove('blur-mode');\n      saveSetting('blurMode', false);\n    }\n  };\n\n  toggleGiganticLine = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('div-res-big-active-line')) {\n      this.setGiganticLine(true);\n    } else {\n      this.setGiganticLine(false);\n    }\n  };\n  setGiganticLine = (isGiganticLine) => {\n    const { div_result } = this.props;\n    if (isGiganticLine === true) {\n      div_result.classList.add('div-res-big-active-line');\n      saveSetting('giganticLine', true);\n    } else if (isGiganticLine === false) {\n      div_result.classList.remove('div-res-big-active-line');\n      saveSetting('giganticLine', false);\n    }\n  };\n\n  flipWaveform = () => {\n    let flip = getSetting('flipWaveform');\n    if (flip && flip === true) {\n      flip = false;\n    } else {\n      flip = true;\n    }\n    saveSetting('flipWaveform', flip);\n    Toast.info(`Flip waveform = ${flip}, refresh page to take effect!`);\n\n    // Hiện tại việc update qua props này CHƯA implement được, bên component Waveform KHÔNG\n    // nhận được giá trị mới sau mỗi lần update, vui lòng F5!!!\n    this.props.updateFlipWaveform(flip);\n  };\n\n  toggleWordAppear = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('word-appear')) {\n      this.setWordAppear(true);\n    } else {\n      this.setWordAppear(false);\n    }\n  };\n  setWordAppear = (isWordAppear) => {\n    const { div_result } = this.props;\n    if (isWordAppear === true) {\n      div_result.classList.add('word-appear');\n      saveSetting('wordAppear', true);\n    } else if (isWordAppear === false) {\n      div_result.classList.remove('word-appear');\n      saveSetting('wordAppear', false);\n    }\n  };\n\n  toggleLineAppear = () => {\n    const { div_result } = this.props;\n    if (!div_result.classList.contains('line-appear')) {\n      this.setLineAppear(true);\n    } else {\n      this.setLineAppear(false);\n    }\n  };\n  setLineAppear = (isLineAppear) => {\n    const { div_result } = this.props;\n    if (isLineAppear === true) {\n      div_result.classList.add('line-appear');\n      saveSetting('lineAppear', true);\n    } else if (isLineAppear === false) {\n      div_result.classList.remove('line-appear');\n      saveSetting('lineAppear', false);\n    }\n  };\n\n  updateSpeed = (offset) => {\n    let speed = this.props.myAudio.playbackRate + offset;\n    speed = Number(speed.toFixed('1'));\n    this.props.myAudio.playbackRate = speed;\n    Toast.info('Speed: ' + speed + 'x');\n    saveSetting('speed', speed);\n  };\n\n  render() {\n    const { showSetting, openSetting, isFullscreen } = this.props;\n    const { volume } = this.state;\n    return (\n      <div className=\"setting_section\" style={{ display: isFullscreen ? 'none' : '' }}>\n        {!showSetting && (\n          <div className=\"btn_toggle_setting\" title=\"Settings\" onClick={openSetting}>\n            <i className=\"fa fa-ellipsis-h\"></i>\n          </div>\n        )}\n\n        {!!showSetting && (\n          <div id=\"setting_wrapper\">\n            <div>\n              <span className=\"setting-legend\">Lyric:&nbsp;</span>\n              <i className=\"fa fa-caret-up btn_sync_up\" title=\"Sync lyric: -100ms\"></i>\n              <i className=\"fa fa-caret-down btn_sync_down\" title=\"Sync lyric: +100ms\"></i>\n              <i className=\"setting_separator\">|</i>\n              <i\n                className=\"fa fa-align-left btn_align btn_align_left\"\n                title=\"Lyric left alignment\"\n                onClick={() => this.settingLyricAlign('left')}\n              ></i>\n              <i\n                className=\"fa fa-align-center btn_align btn_align_center\"\n                title=\"Lyric center\"\n                onClick={() => this.settingLyricAlign('center')}\n              ></i>\n              <i\n                className=\"fa fa-align-right btn_align btn_align_right\"\n                title=\"Lyric right alignment\"\n                onClick={() => this.settingLyricAlign('right')}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Theme:&nbsp;</span>\n              <i\n                className=\"fa fa-square btn_theme btn_theme_dark\"\n                title=\"Dark theme\"\n                onClick={() => this.settingTheme('dark')}\n              ></i>\n              <i\n                className=\"fa fa-square btn_theme btn_theme_light\"\n                title=\"Light theme\"\n                onClick={() => this.settingTheme('light')}\n              ></i>\n              <i\n                className=\"fa fa-picture-o btn_theme btn_theme_picture_bg\"\n                title=\"Picture background theme\"\n                onClick={() => this.settingTheme('picture-bg')}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Mode:&nbsp;</span>\n              <i\n                className=\"fa fa-microphone btn_theme btn_karaoke_mode\"\n                title=\"Karaoke mode\"\n                onClick={this.toggleKaraokeMode}\n              ></i>\n              <i className=\"fa fa-cloud btn_theme btn_blur_mode\" title=\"Blur mode\" onClick={this.toggleBlurMode}></i>\n              <i\n                className=\"fa fa-eye-slash btn_theme btn_word_appear\"\n                title=\"Word appears when time comes to it\"\n                onClick={this.toggleWordAppear}\n              ></i>\n              <i\n                className=\"fa fa-coffee btn_theme\"\n                title=\"Word & Line appears when time comes to it\"\n                onClick={this.toggleLineAppear}\n              ></i>\n              <i\n                className=\"fa fa-search-plus btn_theme btn_gigantic_line\"\n                title=\"Gigantic line\"\n                onClick={this.toggleGiganticLine}\n              ></i>\n              <i\n                className=\"fa fa-retweet btn_theme btn_flip_waveform\"\n                title=\"Flip waveform horizontally\"\n                onClick={this.flipWaveform}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Speed:&nbsp;</span>\n              <i\n                className=\"fa fa-plus-square btn_theme btn_increase_speed\"\n                title=\"Increase speed\"\n                onClick={() => this.updateSpeed(0.1)}\n              ></i>\n              <i\n                className=\"fa fa-minus-square btn_theme btn_decrease_speed\"\n                title=\"Decrease speed\"\n                onClick={() => this.updateSpeed(-0.1)}\n              ></i>\n            </div>\n\n            <div>\n              <span className=\"setting-legend\">Volume:&nbsp;</span>\n              <input type=\"range\" min=\"1\" max=\"100\" value={volume} className=\"slider-volume\" onChange={this.onChangeVolume} />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Setting;\n","import React from 'react';\nimport debounce from 'debounce-promise';\nimport { getAverageRGB } from '../../service/UtilService';\n\n/**\n * Ref: https://www.codehim.com/vanilla-javascript/javascript-audio-waveform-visualizer/\n */\nclass Waveform extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n    this.waveformAniFr = null;\n  }\n\n  componentDidMount() {\n    this.props.getWaveformInstance(this);\n    window.onresize = debounce(this.drawWaveform, 300);\n  }\n\n  drawWaveform = () => {\n    const { flipWaveform, analyser } = this.props;\n    if (!analyser) return;\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n    const canvasContext = this.canvas.getContext('2d');\n    const bufferLength = analyser.frequencyBinCount; // = fftSize/2\n\n    // vì có nhiều phần tử cuối của mảng dataArray = 0 nếu dataArray = new Uint8Array(bufferLength)\n    const totalBar = parseInt(bufferLength / 1.2);\n    const dataArray = new Uint8Array(totalBar);\n    const peakArr = Array(totalBar).fill(0);\n    const velocityArr = Array(totalBar).fill(0);\n    const acceleration = 0.05; // gia tốc của điểm peak khi rơi xuống\n    const WIDTH = this.canvas.width;\n    const HEIGHT = this.canvas.height;\n    const barWidth = parseInt(WIDTH / totalBar);\n    const heightLimit = 270; // what does this mean?\n    const averageRGB = getAverageRGB();\n    let barHeight, barColor, x;\n\n    console.log('bufferLength, totalBar, WIDTH, HEIGHT: ', bufferLength, totalBar, WIDTH, HEIGHT);\n\n    if (window.innerWidth <= 720) return; // not show animation on mobile device\n\n    console.log('Start drawing waveform...');\n\n    // Khi prop flipWaveform thay đổi thì hàm này KHÔNG nhận được giá trị mới, mà phải Refresh lại page\n    // Có solution nào đó, chẳng hạn getDerivedStateFromProps hay componentDidUpdate, nhưng lằng nhằng\n    // quá nên CHƯA implement được!\n    const renderFrame = () => {\n      analyser.getByteFrequencyData(dataArray);\n      canvasContext.clearRect(0, 0, WIDTH, HEIGHT);\n\n      // for debugging: nếu nó in ra thì animation này vẫn chạy!\n      // console.log('dataArray[0]', dataArray[0]);\n      for (let i = 0; i < totalBar; i++) {\n        // dataArray[i] là 1 số 8bit ko dấu, do đó nó sẽ thuộc khoảng [0,255],\n        // nhưng HEIGHT của canvas có thể < 255, do đó nếu cứ để barHeight = dataArray[i]\n        // thì sẽ ko đủ chỗ vẽ bar\n        // Set min barHeight = 1, vì nếu = 0 sẽ ko thấy hết các bar\n        // Note: sau khi add flipWaveform, thì việc nhiều bar = 0 lại bị chuyển về bên trái, haizzz\n        // (hiện tại ko flip thì ở bên phải ko còn nhiều bar = 0 nữa, nhưng flip thì lại bị)\n        // Sẽ fix sau...\n        if (flipWaveform === true) {\n          barHeight = 1 + parseInt((dataArray[totalBar - i] / heightLimit) * HEIGHT);\n        } else {\n          barHeight = 1 + parseInt((dataArray[i] / heightLimit) * HEIGHT);\n        }\n        // barColor = this.getBarColor(barHeight / HEIGHT, i / totalBar);\n        barColor = averageRGB;\n        x = (barWidth + 3) * i;\n\n        // draw bar\n        canvasContext.fillStyle = barColor;\n        canvasContext.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);\n\n        // draw peak of bar\n        if (barHeight > peakArr[i]) {\n          peakArr[i] = barHeight;\n          velocityArr[i] = 0;\n        }\n        if (peakArr[i] > 0) {\n          canvasContext.beginPath();\n          canvasContext.strokeStyle = barColor;\n          canvasContext.lineWidth = 3;\n          canvasContext.moveTo(x, HEIGHT - peakArr[i]);\n          canvasContext.lineTo(x + barWidth, HEIGHT - peakArr[i]);\n          canvasContext.stroke();\n          velocityArr[i] += acceleration;\n          peakArr[i] = peakArr[i] - velocityArr[i];\n        }\n      }\n\n      // Chỉ chạy animation khi audio đang play. Nếu ko check điều kiện này thì cho dù gọi\n      // cancelAnimationFrame(this.waveformAniFr) vẫn ko stop được cái animation này!\n      if (!this.props.myAudio.paused) this.waveformAniFr = requestAnimationFrame(renderFrame);\n    };\n\n    renderFrame();\n  };\n\n  /**\n   * @param {Number} heightRatio chiều cao của bar so với chiều cao của canvas. heightRatio <= 1\n   * @param {Number} barRatio vị trí của bar trong mảng. heightRatio <= 1\n   * @returns\n   */\n  getBarColor = (heightRatio, barRatio) => {\n    const r = parseInt(255 * barRatio); // dải màu gradient của mảng bar: blue -> tím hồng\n    const g = 100 - 30 * heightRatio; // bar càng cao thì màu càng đậm\n    const b = 255;\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  };\n\n  stopWaveform = () => {\n    cancelAnimationFrame(this.waveformAniFr);\n  };\n\n  render() {\n    return <canvas className=\"canvas-waveform\" ref={(node) => (this.canvas = node)}></canvas>;\n  }\n}\n\nexport default Waveform;\n","import React from 'react';\nimport Waveform from './Waveform';\n\nconst LeftPlayground = (props) => {\n  const { toggleWaveform, showWaveform, flipWaveform, analyser, initAnalyzer, myAudio, getWaveformInstance, song } = props;\n  return (\n    <div className=\"left_info\" onClick={toggleWaveform} title={showWaveform ? 'Switch to song meta' : 'Switch to waveform'}>\n      {showWaveform && (\n        <Waveform\n          analyser={analyser}\n          initAnalyzer={initAnalyzer}\n          myAudio={myAudio}\n          getWaveformInstance={getWaveformInstance}\n          flipWaveform={flipWaveform}\n        />\n      )}\n      {!showWaveform && (\n        <>\n          <div className=\"left_title\">{song.title}</div>\n          <div className=\"left_artist\">{song.artist}</div>\n          <div className=\"left_album\">({song.album ? song.album : 'No Album'})</div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default LeftPlayground;\n","import React, { PureComponent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Toast from '../../components/Toast/Toast';\nimport BaiHatService from './BaiHatService';\nimport backgroundImage from '../../assets/images/background.jpg';\nimport spinImage from '../../assets/images/spin.jpg';\nimport BaiHatTable from './BaiHatTable';\nimport Player from './Player';\nimport Setting from './Setting';\nimport LeftPlayground from './LeftPlayground';\nimport { NO_LYRIC, FETCHING_LYRIC, LYRIC_NOT_FOUND, THEME_LIGHT } from '../../constants/Constants';\nimport {\n  getById,\n  saveSetting,\n  getSetting,\n  decodeTime,\n  createNewElement,\n  myParseFloat,\n  getByClass,\n  filterTable,\n  getAbsoluteUrl,\n  isValidDate,\n  formatDateMY\n} from '../../service/UtilService';\nimport { scrollPage, scrollInsideElementToCenter } from '../../service/scroll';\nimport { LiliContext } from '../../context/LiliContext';\nimport './BaiHat.css';\nimport { buildDate } from '../../buildInfo';\n\nclass BaiHat extends PureComponent {\n  static contextType = LiliContext;\n\n  constructor(props) {\n    super(props);\n    let flipWaveform = getSetting('flipWaveform');\n    if (flipWaveform === undefined || flipWaveform === null) {\n      flipWaveform = false;\n    }\n    this.state = {\n      songData: [],\n      params: {\n        page: 0\n      },\n      analyser: null,\n      loading: false,\n      song: {}, // current song\n      showSetting: false,\n      isFullscreen: !!getSetting('fullscreen'), // !!null = false\n      showWaveform: getSetting('showWaveform') || false,\n      flipWaveform: flipWaveform,\n      isPlaying: false,\n      spinning: false\n    };\n\n    this.lines = [];\n    this.isLrc = false;\n    this.hasTranslation = false;\n    this.startTimes = [];\n    this.endTimes = [];\n    this.cntWord = 0;\n    this.offsetTime = 0;\n    this.currWordID = -1;\n    this.metaExist = false;\n    this.lyricMeta = {};\n    this.myAudio = null;\n    this.playLyricInterval = null;\n    this.countdownInterval = null;\n    this.currErrWord = null;\n    this.playerInstance = null;\n    this.waveformInstance = null;\n    this.initSettingsAtPlayer = null;\n    this.div_result = React.createRef();\n    this.lyric_playground = React.createRef();\n    this.div_background = React.createRef();\n    this.div_left_wrapper = React.createRef();\n  }\n\n  componentDidMount() {\n    const sortBy = getSetting('sortBy');\n    const sortOrder = getSetting('sortOrder');\n    this.getAllSongs(\n      {\n        sortBy,\n        sortOrder\n      },\n      true\n    );\n\n    // tham chiếu tới myAudio của component con, thực ra có thể dùng:\n    // this.myAudio = this.playerInstance.myAudio;\n    // nhưng muốn dùng cả 2 cách nên để như vậy\n    // (playerInstance chỉ dùng để call các function trong component Player)\n    this.myAudio = this.child.myAudio;\n\n    if (this.state.isFullscreen) {\n      this.setFullscreen();\n    }\n\n    window.addEventListener('keydown', (e) => {\n      if (!this.myAudio) return;\n\n      switch (e.key) {\n        case 'ArrowLeft':\n          this.myAudio.currentTime -= 5;\n          this.onSeeked();\n          break;\n        case 'ArrowRight':\n          this.myAudio.currentTime += 5;\n          this.onSeeked();\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.clearPlayLyricInterval();\n    this.clearCountdownInterval();\n  }\n\n  initAnalyzer = () => {\n    if (this.state.analyser) return;\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)(); // Safari uses webkitAudioContext\n    const audioSrcNode = audioContext.createMediaElementSource(this.myAudio);\n    const analyser = audioContext.createAnalyser();\n    audioSrcNode.connect(analyser);\n    analyser.connect(audioContext.destination);\n    analyser.fftSize = 128;\n    this.setState({\n      analyser\n    });\n  };\n\n  getAllSongs = (params, isPlaySong = false) => {\n    this.setState({ loading: true });\n    const sort = params.sortBy ? params.sortBy + ',' + params.sortOrder : this.state.params.sort;\n    if (params.sortBy) {\n      saveSetting('sortBy', params.sortBy);\n      saveSetting('sortOrder', params.sortOrder);\n    }\n    const newParams = {\n      ...this.state.params,\n      ...params,\n      sort\n    };\n    this.setState({\n      params: newParams\n    });\n    BaiHatService.getAllSongs(newParams)\n      .then((res) => {\n        const path = this.props.match.params.id;\n        let song = {};\n        let currInx = 0;\n        if (path) {\n          song = res.find((obj, idx) => {\n            if (obj.path === path) {\n              currInx = idx;\n              return true;\n            }\n            return false;\n          });\n        }\n\n        this.setState({\n          songData: res,\n          loading: false\n        });\n        this.playerInstance.setPlayList(res, currInx); // danh sách phát và 1 bài trong danh sách đó muốn được phát ngay lúc này\n        if (isPlaySong && song.path) {\n          this.playSong(song);\n        }\n        this.scrollTableToActiveSong(song);\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n        this.setState({\n          loading: false\n        });\n      });\n  };\n\n  /**\n   * Play a song\n   * @param {JSON} song info of a song we want to play\n   */\n  playSong = (song, isScrollTr = false) => {\n    console.log(`Start playing ${song.title} - ${song.artist}...`);\n    if (this.props.match.params.id !== song.path) {\n      window.location.href = '#/bai-hat/' + song.path;\n    }\n\n    if (song.zing_id) {\n      song.zingStream = getAbsoluteUrl('/api/zing/mp3/streaming?zing_id=' + song.zing_id);\n    }\n\n    // [js_async] cần chờ setState xong để nó render xong đã, sau đó mới fetch lyric,\n    // bởi vì trong getLyric, nếu có lyric, sẽ chờ hàm BaiHatService.getLyric\n    // thực hiện xong mới gọi saveLyric, còn khi ko có lyric sẽ gọi luôn hàm setNoLyric.\n    // 2 trường họp đó khác nhau dẫn đến kq khác nhau (có lyric thì ok, ko có thì lỗi)!\n    this.setState({ song }, () => {\n      this.getLyric(song);\n    });\n    const image_url = song && song.image_url ? getAbsoluteUrl(song.image_url) : spinImage;\n    this.playerInstance.setActiveAudio(song);\n    this.playerInstance.setMediaSessionMeta(song.title, song.artist, image_url);\n\n    if (isScrollTr) {\n      this.scrollTableToActiveSong(song);\n    }\n  };\n\n  scrollTableToActiveSong = (song = {}) => {\n    const songTable = getById('songTable');\n    if (!songTable || !song.id) return;\n    const allSongValue = songTable.parentNode;\n    const activeTr = getById('tr-' + song.id);\n    // allSongValue.scrollTop = activeTr.offsetTop - 34; // 34px = height of table header\n    scrollInsideElementToCenter(allSongValue, activeTr, 300); // chả cần animation chỗ này đâu :v\n  };\n\n  getLyric = (song) => {\n    // FetchingLyric\n    this.div_result.innerHTML = FETCHING_LYRIC;\n    this.lines = [];\n    if (song.lyric) {\n      // Currently only support .lrc, .xlrc and .trc. Will support .xtrc in the future\n      // .lrc: lyric with time for each line\n      // .xlrc: lrc lyric with translation\n      // .trc: lyric with time for each line and word\n      // .xtrc: trc lyric with translation\n      if (song.lyric.endsWith('.lrc')) {\n        this.isLrc = true;\n        this.hasTranslation = false;\n      } else if (song.lyric.endsWith('.xlrc')) {\n        this.isLrc = true;\n        this.hasTranslation = true;\n      } else {\n        this.isLrc = false;\n        this.hasTranslation = false;\n      }\n      BaiHatService.getLyric(song.lyric)\n        .then((res) => {\n          if (res === LYRIC_NOT_FOUND) this.setNoLyric();\n          else this.saveLyric(res);\n        })\n        .catch((err) => {\n          console.log(err);\n          Toast.error(err);\n        });\n    } else {\n      this.setNoLyric();\n    }\n  };\n\n  saveLyric = (lyric) => {\n    this.lines = lyric.trim().split('\\n');\n    this.initLyric();\n  };\n\n  isNoLyric = () => {\n    return this.lines.length === 0;\n  };\n\n  setNoLyric = () => {\n    this.lines = [];\n    this.initLyric();\n  };\n\n  initLyric = () => {\n    this.setPlayLyricInterval();\n    this.div_result.innerHTML = '';\n    this.startTimes = [];\n    this.endTimes = [];\n    this.tranMaps = [];\n    this.cntWord = 0;\n    this.offsetTime = 0;\n    this.currWordID = -1;\n    this.playerInstance.playAudio();\n\n    if (this.isNoLyric()) {\n      this.div_result.innerHTML = NO_LYRIC;\n    } else {\n      this.metaExist = false;\n      this.lyricMeta = {};\n      this.div_result.innerHTML = '';\n      if (this.isLrc) this.initLrcLyric();\n      else this.initTrcLyric();\n    }\n\n    this.initSettingsAtPlayer();\n  };\n\n  initTrcLyric = async () => {\n    let temp, startLine, words, startWord, endWord, divLine;\n\n    // Note: dùng \"for in\" ko được, phải dùng \"for await of\"\n    // Ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of\n    for await (let line of this.lines) {\n      temp = line.match(/\\[\\d+:\\d+\\.\\d+\\]/g); // ex: temp = [\"[1:15.047]\"]\n      if (temp != null) {\n        startLine = decodeTime(temp[0]); // ex: 75.047\n        temp = line.substring(temp[0].length); // ex: <271>I <256>keep <790>saying <1254>no\n        words = temp.match(/<\\d+>[^<]*/g);\n        divLine = createNewElement('div', null, 'line');\n\n        if (words == null) {\n          // Trường hợp này xảy ra với các file lyric cũ của TTPod, nó có 1-2 dòng như này:\n          // [99:00.100]好音质,天天动听!\n          // (Ko có millisecond, chẳng hạn <123>) Tốt nhất là ignore\n          continue;\n        }\n\n        startWord = startLine;\n        for await (let word of words) {\n          // match(/\\d+/)[0]: lấy số đầu tiên trong string này\n          // VD: string này có dạng: \"<123>demo \" thì kết quả là 123\n          // VD: string này có dạng: \"<123>demo 949\" thì kết quả là 123\n          endWord = startWord + parseFloat(word.match(/\\d+/)[0]) / 1000;\n          endWord = myParseFloat(endWord);\n\n          // Do lưu time vào 2 mảng startTimes và endTimes nên việc\n          // thêm attribute time-start và time-start chỉ dùng để debug\n          let spanWord = createNewElement('span', 'word-' + this.cntWord, 'not-pass-word', {\n            'time-start': startWord,\n            'time-end': endWord\n          });\n          spanWord.innerText = word.replace(/<\\d+>/, '');\n          if (spanWord.innerText.trim() === '') {\n            spanWord.innerHTML = '&nbsp;';\n            spanWord.setAttribute('is-empty', '1');\n          }\n          this.startTimes[this.cntWord] = startWord;\n          this.endTimes[this.cntWord] = endWord;\n\n          startWord = endWord;\n          this.cntWord++;\n          divLine.appendChild(spanWord);\n        }\n        this.div_result.appendChild(divLine);\n      } else {\n        this.readLyricMeta(line);\n      }\n    }\n\n    this.appendLyricMeta();\n  };\n\n  initLrcLyric = async () => {\n    let lineTime = '',\n      lineTimeLen,\n      lineTranTag,\n      tranNum,\n      lineTranText,\n      lineWords,\n      startLine;\n    let lineMap = new Map(); // key là 1 phần tử trong mảng startTimes\n\n    // Map<tranNum, Map<startLine, lineTranText>>\n    let lineTranMap = new Map();\n\n    // 1. Parse lyric\n\n    // ex: line = \"[01:53.41][00:28.13]Người theo hương hoa \"\n    for await (let line of this.lines) {\n      // lineTime có thể có 1 hoặc nhiều phần tử, ex: lineTime = ['[01:53.41]', '[00:28.13]']\n      lineTime = line.match(/\\[\\d+:\\d+\\.\\d+\\]/g);\n\n      // Dòng có lineTranTag là dòng dịch, có thể có nhiều loại ngôn ngữ khác nhau, ex:\n      // [tran1]Wǒmen táitóu wàng tiānkōng\n      // [tran2]We raise our heads to the sky\n      // ex: lineTranTag = ['[tran1]'], should have only 1 element\n      lineTranTag = line.match(/\\[tran\\d+\\]/g);\n\n      if (lineTime != null) {\n        // ex: lineTimeLen = length của [01:53.41][00:28.13] = 20\n        lineTimeLen = lineTime.reduce((total, curr) => total + curr.length, 0);\n        lineWords = line.substring(lineTimeLen); // ex: \"Người theo hương hoa \"\n\n        for await (const lineT of lineTime) {\n          startLine = decodeTime(lineT); // ex: startLine = decodeTime('[01:53.41]') = 113.41\n          this.startTimes[this.cntWord] = startLine;\n\n          // ex: lineMap = { 113.41 => \"Người theo hương hoa \", 28.13 => \"Người theo hương hoa \" }\n          lineMap.set(startLine, lineWords);\n\n          this.cntWord++;\n        }\n      } else if (lineTranTag != null) {\n        // Vì lineTranTag bắt buộc phải theo sau lineTime nên ta có thể dùng startLine để làm key cho mỗi lineTranTag\n        tranNum = lineTranTag[0].substring(1, lineTranTag[0].length - 1); // ex: tranNum = 'tran1'\n        lineTranText = line.substring(lineTranTag[0].length);\n        if (!lineTranMap.has(tranNum)) {\n          lineTranMap.set(tranNum, new Map());\n        }\n        lineTranMap.get(tranNum).set(startLine, lineTranText);\n      } else {\n        this.readLyricMeta(line);\n      }\n    }\n\n    this.startTimes.sort(function (a, b) {\n      return a - b;\n    });\n\n    // 2. Generate lyric (HTML) to display\n\n    for (let i = 0; i < this.startTimes.length; i++) {\n      let divLine = createNewElement('div', null, 'line');\n\n      let spanWord = createNewElement('span', 'word-' + i, 'not-pass-word', null);\n      spanWord.innerText = lineMap.get(this.startTimes[i]);\n      if (spanWord.innerText === '') {\n        spanWord.innerHTML = '&nbsp';\n        spanWord.setAttribute('is-empty', '1');\n      }\n      divLine.appendChild(spanWord);\n\n      // Add translation\n      if (lineTranMap.size > 0) {\n        for (let [key, value] of lineTranMap) {\n          if (value.has(this.startTimes[i])) {\n            let spanTran = createNewElement('div', null, 'line-tran ' + key, null);\n            spanTran.innerText = value.get(this.startTimes[i]);\n            divLine.appendChild(spanTran);\n          }\n        }\n      }\n\n      this.div_result.appendChild(divLine);\n    }\n    this.appendLyricMeta();\n\n    for (let i = 0; i < this.startTimes.length - 1; i++) {\n      this.endTimes[i] = this.startTimes[i + 1];\n    }\n    this.endTimes[this.startTimes.length - 1] = this.myAudio.duration;\n  };\n\n  // Note: có trường hợp 1 dòng meta có ký tự đặc biệt, chẳng hạn: '[by: Tuzaku]\\r'\n  // Lúc này substring sẽ bị bug: this.lyricMeta.by = \"Tuzaku]\"\n  // Cái bug đó ko nhiều, kệ, khỏi fix! => Đã fix\n  readLyricMeta = (line = '') => {\n    const end = line.lastIndexOf(']');\n    if (line.includes('offset:')) {\n      // ex: [offset:-200]\n      this.offsetTime = line.match(/[0-9|-]+/g);\n      this.offsetTime = parseInt(this.offsetTime);\n    } else if (line.includes('[author:')) {\n      // ex: [author:Tuzaku]\n      // deprecated, lyric file should use [by:] instead\n      this.metaExist = true;\n      this.lyricMeta.by = line.substring('[author:'.length, end).trim();\n    } else if (line.includes('[by:')) {\n      // ex: [by:Tuzaku]\n      this.metaExist = true;\n      this.lyricMeta.by = line.substring('[by:'.length, end).trim();\n    } else if (line.includes('[createdDate:')) {\n      // ex: [createdDate:2021-06-28]\n      // deprecated, lyric file should use [date:] instead\n      this.metaExist = true;\n      this.lyricMeta.date = line.substring('[createdDate:'.length, end).trim();\n    } else if (line.includes('[date:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.date = line.substring('[date:'.length, end).trim();\n    } else if (line.includes('[source:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.source = line.substring('[source:'.length, end).trim();\n    } else if (line.includes('[ti:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.title = line.substring('[ti:'.length, end).trim();\n    } else if (line.includes('[ar:')) {\n      // ex: [date:2021-06-28]\n      this.metaExist = true;\n      this.lyricMeta.artist = line.substring('[ar:'.length, end).trim();\n    }\n  };\n\n  appendLyricMeta = () => {\n    if (this.metaExist) {\n      this.div_result.appendChild(createNewElement('div', null, 'line-meta')); // empty line\n      let divLine = createNewElement('div', null, 'line-meta');\n      divLine.innerText = '-----------';\n      this.div_result.appendChild(divLine);\n\n      const divLyricInfo = createNewElement('div', null, 'lyric-info');\n      this.div_result.appendChild(divLyricInfo);\n\n      // Song meta\n      if (this.lyricMeta.title) {\n        divLine = createNewElement('div', null, 'line-meta', { style: 'font-weight:bold' });\n        divLine.innerText = this.lyricMeta.title + ' - ' + this.lyricMeta.artist;\n        divLyricInfo.appendChild(divLine);\n      }\n\n      // Lyric meta\n      if (this.lyricMeta.by) {\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Lyric creator: ' + this.lyricMeta.by;\n        divLyricInfo.appendChild(divLine);\n      }\n      if (this.lyricMeta.source) {\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Source: ' + this.lyricMeta.source;\n        divLyricInfo.appendChild(divLine);\n      }\n      if (this.lyricMeta.date) {\n        const d = new Date(this.lyricMeta.date);\n        const dStr = isValidDate(d) ? formatDateMY(d) : d;\n        divLine = createNewElement('div', null, 'line-meta');\n        divLine.innerText = 'Date: ' + dStr;\n        divLyricInfo.appendChild(divLine);\n      }\n    }\n  };\n\n  setPlayLyricInterval = () => {\n    if (this.myAudio && !this.myAudio.paused) {\n      this.playLyricInterval = setInterval(() => {\n        this.updateLyric();\n      }, 30);\n    }\n  };\n\n  clearPlayLyricInterval = () => {\n    if (this.playLyricInterval) clearInterval(this.playLyricInterval);\n    this.playLyricInterval = null;\n  };\n\n  onSeeked = () => {\n    this.clearCountdownInterval();\n    if (!this.playLyricInterval) {\n      this.updateLyric();\n    }\n    setTimeout(() => {\n      if (!this.isNoLyric()) {\n        this.reUpdateWordPass();\n      }\n    }, 0);\n    this.scrollLyric();\n  };\n\n  onPause = () => {\n    this.clearCountdownInterval();\n    this.clearPlayLyricInterval();\n    this.setState({ isPlaying: false, spinning: false });\n    if (this.waveformInstance) this.waveformInstance.stopWaveform();\n  };\n\n  onPlay = () => {\n    if (!this.playLyricInterval) this.setPlayLyricInterval();\n    this.setState({ isPlaying: true, spinning: true });\n    if (this.myAudio.currentTime === 0) {\n      const path = this.props.match.params.id;\n      if (path) {\n        setTimeout(() => {\n          let currPath = this.props.match.params.id;\n          if (currPath === path) {\n            BaiHatService.updateListen(path)\n              .then((res) => {\n                console.log(res);\n              })\n              .catch((err) => {\n                console.log(err);\n                Toast.error(err);\n              });\n          }\n        }, 60000); // nghe 1 bài quá 1 phút mới tính 1 lượt nghe\n      }\n      setTimeout(() => {\n        // re-update passed words (in fact, all words are not passed words)\n        if (getById('word-0') && !this.isNoLyric()) {\n          for (let i = 0; i < this.cntWord; i++) {\n            getById('word-' + i).classList.add('not-pass-word');\n          }\n        }\n      }, 0);\n    }\n    if (this.state.showWaveform && this.waveformInstance) this.drawWave();\n  };\n\n  countdownAtEmptyWord = (currWord) => {\n    let nextWord = getById('word-' + (this.currWordID + 1));\n    if (nextWord) {\n      let timeDiff = this.endTimes[this.currWordID] - this.startTimes[this.currWordID];\n      let timeLeft = this.endTimes[this.currWordID] + this.offsetTime / 1000 - this.myAudio.currentTime;\n      if ((timeDiff >= 5 && timeLeft <= 5) || (timeDiff >= 3 && timeLeft <= 3)) {\n        BaiHatService.setBulletText(this.lyric_playground, currWord, Math.ceil(timeLeft));\n      }\n    }\n  };\n\n  updateLyric = async () => {\n    if (this.isNoLyric()) {\n      this.clearPlayLyricInterval();\n      return;\n    }\n\n    let prevWord, prevParent;\n\n    // Chạy hiệu ứng karaoke cho từ hiện tại\n    if (this.currWordID >= 0) {\n      const st = this.startTimes[this.currWordID] + this.offsetTime / 1000;\n      const en = this.endTimes[this.currWordID] + this.offsetTime / 1000;\n      const currWord = getById('word-' + this.currWordID);\n\n      if (st <= this.myAudio.currentTime && en >= this.myAudio.currentTime) {\n        // TODO change this to state variable, or class variable (karaokeMode)\n        if (this.div_result.classList.contains('karaoke-mode')) {\n          BaiHatService.runKaraokeEffect(this.lyric_playground, this.myAudio, currWord, st, en);\n        }\n        if (currWord.getAttribute('is-empty') === '1') {\n          this.countdownAtEmptyWord(currWord);\n        }\n\n        return;\n      }\n\n      // Sau khi myAudio.currentTime nằm ngoài khoảng [st:en] thì đã đi qua\n      // word hiện tại, lúc này currWord sẽ trở thành preWord\n      prevWord = getById('word-' + this.currWordID);\n      if (prevWord && prevWord.getAttribute('is-empty') === '1') {\n        // Xóa bullet text ở từ trước đó, thường thì từ đó sẽ đứng trên 1 empty line\n        BaiHatService.setBulletText(this.lyric_playground, prevWord, 0);\n      }\n\n      // Có thể từ trước đó mới chỉ fill 95% chẳng hạn, ta cần fill nốt từ đó\n      BaiHatService.fillKaraokeWord(this.lyric_playground, prevWord);\n\n      prevParent = prevWord.parentNode;\n      prevWord.classList.remove('word-active', 'curr-word');\n    }\n\n    // Sau khi chạy xong hiệu ứng karaoke cho từ hiện tại, word này trở thành prevWord,\n    // cần tìm currWord mới, sau đó thêm các class cho currWord, currLine,\n    // các từ trước và sau currWord ở trên cùng 1 line\n    this.gotoNextWord(prevWord, prevParent);\n  };\n\n  gotoNextWord = async (prevWord, prevParent) => {\n    this.currWordID = this.getCurrentWordByTime(this.myAudio.currentTime);\n    if (this.currWordID >= 0) {\n      const currWord = getById('word-' + this.currWordID);\n      const currParent = currWord.parentNode;\n\n      currWord.classList.add('word-active', 'curr-word');\n      currWord.classList.remove('not-pass-word');\n\n      if (prevParent !== currParent) {\n        if (prevParent) {\n          prevParent.classList.remove('line-active');\n          for await (let child of prevParent.children) {\n            if (child === prevWord) break;\n            child.classList.remove('word-active');\n          }\n        }\n\n        currParent.classList.add('line-active');\n      }\n      this.activeAtCurr(currWord, currParent);\n    } else {\n      this.removeActiveLastLine();\n    }\n  };\n\n  /**\n   * Active các từ trước currWord, và remove active cho các từ phía sau currWord\n   * @param {HTMLElement} currWord tag này là current word\n   * @param {HTMLElement} currParent tag này là cha chứa current word ở trên\n   */\n  activeAtCurr = (currWord, currParent) => {\n    let currIndex;\n    for (let i = 0; i < currParent.children.length; i++) {\n      if (currParent.children[i] === currWord) {\n        currIndex = i;\n        break;\n      }\n      currParent.children[i].classList.add('word-active');\n    }\n    for (let i = currIndex + 1; i < currParent.children.length; i++) {\n      if (!currParent.children[i].classList.contains('word-active')) break;\n      currParent.children[i].classList.remove('word-active');\n    }\n\n    // scroll\n    if (currWord === currParent.childNodes[0]) {\n      setTimeout(() => {\n        this.scrollLyric();\n      }, 110); // phải chờ cho CSS transition xong mới get được height đúng\n    }\n  };\n\n  /**\n   * Chạy hết nhạc thì xóa active ở dòng cuối cùng\n   */\n  removeActiveLastLine = async () => {\n    const finalLine = getById('word-' + (this.cntWord - 1)).parentNode;\n    if (finalLine.classList.contains('line-active')) {\n      finalLine.classList.remove('line-active');\n      for await (let child of finalLine.children) {\n        child.classList.remove('word-active');\n      }\n    }\n  };\n\n  // TODO khi hết bài cần scroll xuống cuối cùng (metadata), nếu không có info không thấy được\n  scrollLyric = (currWord = null) => {\n    if (currWord == null) {\n      currWord = getById('word-' + this.currWordID);\n    }\n    if (currWord != null) {\n      this.div_result.scrollTop =\n        20 +\n        currWord.parentNode.offsetTop -\n        getById('word-0').offsetTop -\n        this.div_result.offsetHeight / 2 +\n        currWord.parentNode.clientHeight / 2; // height of parent of currWord (div.line.active-line)\n    }\n  };\n\n  getCurrentWordByTime = (sec) => {\n    let lo = 0,\n      hi = this.cntWord - 1;\n    let mid, st, en;\n\n    while (lo <= hi) {\n      mid = parseInt((lo + hi) / 2);\n      st = this.startTimes[mid] + this.offsetTime / 1000;\n      en = this.endTimes[mid] + this.offsetTime / 1000;\n\n      if (st <= sec && en >= sec) {\n        // Nếu như có 2 từ có khoảng thời gian bị chồng\n        // lên nhau thì ta ưu tiên từ đứng đằng sau\n        st = this.startTimes[mid + 1] + this.offsetTime / 1000;\n        en = this.endTimes[mid + 1] + this.offsetTime / 1000;\n        if (st <= sec && en >= sec) return mid + 1;\n        else return mid;\n      } else if (st > sec) hi = mid - 1;\n      else lo = mid + 1;\n    }\n\n    if (mid === 0 || mid === this.cntWord - 1) mid = -1;\n    else {\n      // ko tìm thấy thẻ nào có st <= sec <= en (do lyric bị sai).\n      // tuy vậy, vẫn return thẻ gần đó nhất\n      // if(mid)\n      if (mid && mid !== this.currErrWord) {\n        Toast.warn(`Warning: lyric is not correct near \"${getById('word-' + mid).innerText}\"`);\n        this.currErrWord = mid;\n      }\n    }\n\n    // delete interval when finish song!\n    if (sec > this.endTimes[this.cntWord - 1]) this.clearPlayLyricInterval();\n\n    return mid;\n  };\n\n  clearCountdownInterval = () => {\n    clearInterval(this.countdownInterval);\n    this.countdownInterval = null;\n  };\n\n  reUpdateWordPass = () => {\n    // this.currWordID giờ sẽ là vị trí mới sau thao tác seek nhảy tới\n    this.currWordID = this.getCurrentWordByTime(this.myAudio.currentTime);\n    if (this.currWordID >= 0) {\n      for (let i = 0; i < this.currWordID; i++) {\n        let passedWord = getById('word-' + i);\n        passedWord.classList.remove('not-pass-word');\n        if (passedWord.getAttribute('is-empty') === '1') {\n          passedWord.innerHTML = '&nbsp;'; // remove bullet text\n        }\n        BaiHatService.fillKaraokeWord(this.lyric_playground, passedWord);\n        this.removeLineActive(passedWord);\n      }\n      for (let i = this.currWordID; i < this.cntWord; i++) {\n        let notPassWord = getById('word-' + i);\n        notPassWord.classList.add('not-pass-word');\n        if (notPassWord.getAttribute('is-empty') === '1') {\n          notPassWord.innerHTML = '&nbsp;'; // remove bullet text\n        }\n        BaiHatService.emptyKaraokeWord(notPassWord);\n        this.removeLineActive(notPassWord);\n      }\n      // addLineActive\n      getById('word-' + this.currWordID).parentNode.classList.add('line-active');\n    }\n  };\n\n  removeLineActive = (child) => {\n    if (child.parentNode.classList.contains('line-active')) {\n      child.parentNode.classList.remove('line-active');\n    }\n  };\n\n  toggleSetting = (isShow) => {\n    this.setState({\n      showSetting: isShow\n    });\n  };\n\n  toggleFullscreen = () => {\n    const isFullscreen = !this.state.isFullscreen;\n    if (isFullscreen) {\n      this.setFullscreen();\n    } else {\n      this.unsetFullscreen();\n    }\n    this.setState({ isFullscreen });\n    saveSetting('fullscreen', isFullscreen);\n    setTimeout(() => {\n      this.scrollLyric();\n    }, 350);\n  };\n\n  toggleWaveform = () => {\n    const showWaveform = !this.state.showWaveform;\n    this.setState({ showWaveform }, () => {\n      if (!this.waveformInstance) return;\n      if (showWaveform) this.drawWave();\n      else this.waveformInstance.stopWaveform();\n    });\n    saveSetting('showWaveform', showWaveform);\n  };\n\n  drawWave = async () => {\n    // phải đợi analyzer khởi tạo xong mới draw waveform được\n    await this.initAnalyzer();\n    this.waveformInstance.drawWaveform();\n  };\n\n  setFullscreen = () => {\n    let body_wrapper = getByClass('body_wrapper');\n    document.body.classList.add('overflow-hidden');\n    body_wrapper.classList.add('body-fs');\n    body_wrapper.classList.remove('body-normal');\n  };\n\n  unsetFullscreen = () => {\n    let body_wrapper = getByClass('body_wrapper');\n    document.body.classList.remove('overflow-hidden');\n    body_wrapper.classList.remove('body-fs');\n    body_wrapper.classList.add('body-normal');\n    setTimeout(() => {\n      scrollPage(this.lyric_playground, 300);\n    }, 200);\n  };\n\n  onSearch = (obj) => {\n    filterTable('songTable', 1, obj.value ? obj.value : '');\n  };\n\n  render() {\n    const { songData, song, showSetting, isFullscreen, isPlaying, spinning, showWaveform, flipWaveform, analyser } = this.state;\n    const { theme } = this.context;\n    let songURL;\n    if (song.zing_id) {\n      songURL = song.zingStream;\n    } else {\n      songURL = song?.file_name ? getAbsoluteUrl('/api/song/file?file=' + song.file_name) : null;\n    }\n    const image_url = song?.image_url ? getAbsoluteUrl(song.image_url) : spinImage;\n    const backgroundURL = `url(${song?.image_url ? \"'\" + getAbsoluteUrl(song.image_url) + \"'\" : backgroundImage})`;\n\n    return (\n      <div\n        className={`body_wrapper ${theme === THEME_LIGHT ? 'body-light' : 'body-dark'} ${\n          isFullscreen ? 'body-fs' : 'body-normal'\n        }`}\n      >\n        <div id=\"all-song-wrapper\">\n          <div className=\"edit-time\">Posted on: Sep 3, 2021. Last modified: {buildDate ? buildDate : 'Sep 3, 2021'}.</div>\n          {songData && songData.length !== 0 && (\n            <BaiHatTable\n              songData={songData}\n              currSong={song}\n              getAllSongs={this.getAllSongs}\n              playSong={this.playSong}\n              onSearch={this.onSearch}\n              isPlaying={isPlaying}\n            />\n          )}\n        </div>\n\n        <Player\n          song={song}\n          songURL={songURL}\n          onSeeked={this.onSeeked}\n          onPause={this.onPause}\n          onPlay={this.onPlay}\n          ref={(node) => {\n            this.child = node;\n          }}\n          getPlayerInstance={(playerInstance) => {\n            this.playerInstance = playerInstance;\n          }}\n          playSong={this.playSong}\n        />\n\n        <div id=\"lyric_playground\" ref={(node) => (this.lyric_playground = node)} className=\"lyric-pg-picture-bg\">\n          <div className=\"background-wrapper\">\n            <div\n              id=\"div_background\"\n              ref={(node) => (this.div_background = node)}\n              className=\"bg-image\"\n              style={{ backgroundImage: backgroundURL, textAlign: 'center' }}\n            ></div>\n          </div>\n          <div className=\"lyric-wrapper\">\n            <div id=\"div_left_wrapper\" className=\"left-wrapper\" ref={(node) => (this.div_left_wrapper = node)}>\n              <img\n                id=\"spinning_img\"\n                crossOrigin=\"anonymous\"\n                style={{ cursor: 'pointer' }}\n                className={`left_img spinning ${spinning ? '' : 'paused-spin'}`}\n                src={image_url}\n                alt=\"Left info\"\n                onClick={() => {\n                  this.setState({ spinning: !spinning });\n                }}\n              />\n              <canvas id=\"spinning_canvas\" style={{ display: 'none' }}></canvas>\n              <LeftPlayground\n                toggleWaveform={this.toggleWaveform}\n                showWaveform={showWaveform}\n                flipWaveform={flipWaveform}\n                analyser={analyser}\n                initAnalyzer={this.initAnalyzer}\n                myAudio={this.myAudio}\n                getWaveformInstance={(waveformInstance) => {\n                  this.waveformInstance = waveformInstance;\n                }}\n                song={song}\n              />\n            </div>\n            <div\n              id=\"div_result\"\n              className=\"custom-scrollbar karaoke-mode\"\n              style={{ textAlign: 'center' }}\n              ref={(node) => (this.div_result = node)}\n              onClick={() => this.toggleSetting(false)}\n            ></div>\n          </div>\n\n          <Setting\n            div_result={this.div_result}\n            lyric_playground={this.lyric_playground}\n            div_background={this.div_background}\n            div_left_wrapper={this.div_left_wrapper}\n            myAudio={this.myAudio}\n            showSetting={showSetting}\n            isFullscreen={isFullscreen}\n            scrollLyric={this.scrollLyric}\n            initSettingsAtPlayer={(func) => (this.initSettingsAtPlayer = func)}\n            openSetting={() => this.toggleSetting(true)}\n            updateFlipWaveform={(flip) => this.setState({ flipWaveform: flip })}\n          />\n\n          <div className={`${isFullscreen ? 'setbot_fs' : ''} setting_bottom`}>\n            <i className=\"fa fa-arrows-alt btn_align btn_fullscreen\" onClick={this.toggleFullscreen}></i>\n          </div>\n          <div style={{ clear: 'both' }}></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(BaiHat);\n","\n// This file is automatically generated by generateBuildInfo.js\n// Ref: Copilot\nexport const buildDate = \"Oct 21, 2024\";\n"],"sourceRoot":""}