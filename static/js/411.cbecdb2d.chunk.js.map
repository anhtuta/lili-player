{"version":3,"file":"static/js/411.cbecdb2d.chunk.js","mappings":"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","sources":["service/axiosClient.js","components/Auth/Auth.js","components/Nav/Nav.js","components/Toast/Toast.js"],"sourcesContent":["import axios from 'axios';\nimport queryString from 'query-string';\nimport { ACCESS_TOKEN } from '../constants/Constants';\nimport { auth } from '../components/Auth/Auth';\n\nconst cleanParam = (obj) => {\n  Object.keys(obj).forEach((k) => {\n    if (obj[k] === null || obj[k] === undefined) {\n      delete obj[k];\n    }\n  });\n  return obj;\n};\n\naxios.interceptors.request.use(\n  function (config) {\n    const newConfig = {\n      ...config,\n      paramsSerializer: (params) =>\n        queryString.stringify(cleanParam(params), { arrayFormat: 'repeat' }),\n      baseURL: process.env.REACT_APP_HOST_API,\n      // withCredentials: true,\n      headers: {\n        ...config.headers,\n        Pragma: 'no-cache'\n      }\n    };\n\n    // Add auth token\n    if (localStorage.getItem(ACCESS_TOKEN)) {\n      newConfig.headers.Authorization = `Bearer ${localStorage.getItem(ACCESS_TOKEN)}`;\n    }\n\n    return newConfig;\n  },\n  (error) => {\n    console.log(error);\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    if (response && response.data) return response.data;\n    return response;\n  },\n  (error) => {\n    if (error.response && error.response.status) {\n      if (error.response.status === 401) {\n        auth.redirectToLoginPage();\n      }\n      //... handle other statuses\n      return Promise.reject(error.response);\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default axios;\n","import { ACCESS_TOKEN } from '../../constants/Constants';\nimport axiosClient from '../../service/axiosClient';\nimport Toast from '../Toast/Toast';\nimport { ROLE_TABLE } from '../../constants/Constants';\n\nclass Auth {\n  constructor() {\n    this.userInfo = null;\n  }\n\n  isAuthenticated = () => {\n    const access_token = localStorage.getItem(ACCESS_TOKEN);\n    return !!access_token;\n  };\n\n  login = ({ username, password }, successCallback, failCallback) => {\n    const data = {\n      username,\n      password\n    };\n    axiosClient\n      .post('/signin', data)\n      .then((res) => {\n        localStorage.setItem(ACCESS_TOKEN, res[ACCESS_TOKEN]);\n        successCallback();\n      })\n      .catch((err) => {\n        failCallback(err.data ? err.data : err);\n      });\n  };\n\n  logout = () => {\n    axiosClient\n      .post('/signout')\n      .then((res) => {\n        localStorage.removeItem(ACCESS_TOKEN);\n        window.location = '/';\n      })\n      .catch((err) => {\n        console.log(err);\n        Toast.error(err);\n      });\n  };\n\n  getMe = () => {\n    return axiosClient.get('/api/user/me');\n  };\n\n  redirectToLoginPage = () => {\n    Toast.info('You need to login first!');\n    localStorage.removeItem(ACCESS_TOKEN);\n    window.location.hash = '/login';\n  };\n\n  /**\n   * Check xem máº£ng roles cÃ³ tá»“n táº¡i role nÃ o cÃ³ quyá»n truy cáº­p path hay ko\n   * @param {string[]} roles - Array of role\n   * @param {string} path - URL\n   */\n  rolesHasPermission = (roles, path) => {\n    if (!ROLE_TABLE[path]) return true;\n    for (let i = 0; i < roles.length; i++) {\n      if (ROLE_TABLE[path].includes(roles[i])) return true;\n    }\n    // DÃ¹ng forEach: báº¥t Ä‘á»“ng bá»™ nÃªn ko Ä‘Æ°á»£c nhÃ©!\n    // NÃ³ sáº½ return false trÆ°á»›c khi cháº¡y vÃ o trong forEach\n    // roles.forEach(role => {\n    //   if (ROLE_TABLE[path].includes(role)) return true;\n    // });\n    return false;\n  };\n}\n\nexport let auth = new Auth();\n","import React, { useContext } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { MENU_ITEMS, THEME_DARK, THEME_LIGHT } from '../../constants/Constants';\nimport { auth } from '../Auth/Auth';\nimport { LiliContext } from '../../context/LiliContext';\nimport './Nav.scss';\n\nconst Nav = ({ userInfo }) => {\n  const location = useLocation();\n  const { theme, updateTheme } = useContext(LiliContext);\n\n  const handleLogout = () => {\n    auth.logout();\n  };\n\n  const getActiveMenuItems = (roleArray, menuItems) => {\n    menuItems.forEach((item, index) => {\n      if (item.subItems) {\n        getActiveMenuItems(roleArray, item.subItems);\n      } else {\n        if (!auth.rolesHasPermission(roleArray, item.path)) {\n          // Äá»ªNG dÃ¹ng splice, bá»Ÿi vÃ¬ JS báº¥t Ä‘á»“ng bá»™ nÃªn sáº½ bá»‹ lá»—i thá»‰nh thoáº£ng bá»‹ miss menu item\n          // menuItems.splice(index, 1);\n          item.enabled = false;\n        }\n      }\n    });\n  };\n\n  const generateMenu = (menuItems) => {\n    const { pathname } = location;\n    return menuItems.map((item) => {\n      const itemClass = 'menu-item' + (item.path === pathname ? ' active-menu' : '');\n      if (item.path === null) item.path = '#';\n\n      if (item.subItems) {\n        return (\n          <li key={item.key} className={itemClass + ' menu-parent level' + item.level}>\n            <Link to={item.path}>\n              {item.name} <i className={'caret fas ' + (item.level > 1 ? 'fa-caret-right' : 'fa-caret-down')}></i>\n            </Link>\n            <ul key={item.key} className={itemClass + ' sub-menu level' + (item.level + 1)}>\n              {generateMenu(item.subItems)}\n            </ul>\n          </li>\n        );\n      } else {\n        return (\n          item.enabled && (\n            <li key={item.key} className={itemClass + ' level' + item.level}>\n              <Link to={item.path}>{item.name}</Link>\n            </li>\n          )\n        );\n      }\n    });\n  };\n\n  const toggleDarkMode = () => {\n    if (theme === THEME_LIGHT) {\n      updateTheme(THEME_DARK);\n    } else {\n      updateTheme(THEME_LIGHT);\n    }\n  };\n\n  const roleArray = userInfo ? userInfo.roleArray : [];\n  const menuItems = [...MENU_ITEMS];\n  getActiveMenuItems(roleArray, menuItems);\n\n  return (\n    <nav className=\"custom-navbar\">\n      <ul className=\"nav-wrapper\">{generateMenu(menuItems)}</ul>\n      <div className=\"userinfo-wrapper\">\n        <div className=\"div-header\">\n          <span\n            className=\"btn_dark_mode\"\n            title={theme === THEME_LIGHT ? 'Toggle Dark mode' : 'Toggle Light mode'}\n            onClick={toggleDarkMode}\n            role=\"img\"\n            aria-label=\"emoji\"\n          >\n            {theme === THEME_LIGHT ? 'ðŸŒœ' : 'ðŸŒž'}\n          </span>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Nav;\n","import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst options = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined\n};\n\nconst info = (text) => {\n  toast.info(text, options);\n};\n\nconst success = (text) => {\n  toast.success(text, options);\n};\n\nconst warn = (text) => {\n  toast.warn(text, options);\n};\n\nconst error = (err) => {\n  let msg;\n  if (err.data && err.data.message) msg = err.data.message;\n  else if (err) msg = err.toString();\n  else msg = 'Error: unexpected error occurred!';\n  toast.error(msg, options);\n};\n\nconst customToast = {\n  info,\n  success,\n  warn,\n  error\n};\n\nexport default customToast;\n"],"names":["axios","interceptors","request","use","config","newConfig","_objectSpread","paramsSerializer","params","queryString","stringify","obj","Object","keys","forEach","k","undefined","arrayFormat","baseURL","process","headers","Pragma","localStorage","getItem","ACCESS_TOKEN","Authorization","concat","error","console","log","Promise","reject","response","data","status","auth","redirectToLoginPage","constructor","isAuthenticated","login","_ref","successCallback","failCallback","username","password","axiosClient","post","then","res","setItem","catch","err","logout","removeItem","window","location","Toast","getMe","get","info","hash","rolesHasPermission","roles","path","ROLE_TABLE","i","length","includes","this","userInfo","useLocation","theme","updateTheme","useContext","LiliContext","getActiveMenuItems","roleArray","menuItems","item","index","subItems","enabled","generateMenu","pathname","map","itemClass","_jsxs","className","level","children","Link","to","name","_jsx","key","MENU_ITEMS","title","THEME_LIGHT","onClick","toggleDarkMode","THEME_DARK","role","options","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","text","toast","success","warn","msg","message","toString"],"sourceRoot":""}