"use strict";(self.webpackChunkliliana_player=self.webpackChunkliliana_player||[]).push([[122],{101:(A,e,t)=>{t.d(e,{A:()=>o});var i=t(555),s=t(263),a=t(246),r=t(123),n=t(304);s.A.interceptors.request.use(function(A){const e=(0,i.A)((0,i.A)({},A),{},{paramsSerializer:A=>{return a.A.stringify((e=A,Object.keys(e).forEach(A=>{null!==e[A]&&void 0!==e[A]||delete e[A]}),e),{arrayFormat:"repeat"});var e},baseURL:"https://blog.nenmongvietnam.com/laravel/public",headers:(0,i.A)((0,i.A)({},A.headers),{},{Pragma:"no-cache"})});return localStorage.getItem(r.Xh)&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem(r.Xh))),e},A=>(console.log(A),Promise.reject(A))),s.A.interceptors.response.use(A=>A&&A.data?A.data:A,A=>A.response&&A.response.status?(401===A.response.status&&n.j.redirectToLoginPage(),Promise.reject(A.response)):Promise.reject(A));const o=s.A},291:(A,e,t)=>{t.r(e),t.d(e,{default:()=>U});var i=t(555),s=t(495),a=t(43),r=t(981),n=t(782),o=t(101);const l=(A,e)=>{let t=A.classList.contains("lyric-pg-light");return"background-image:-webkit-linear-gradient(left, "+(t?"#2199F9":"#FC0")+" "+e+"%, "+(t?"#333":"#FFF")+" 0%)"},c=(A,e)=>{e.setAttribute("style",l(A,100))},g={getAllSongs:A=>o.A.get("/api/song/all",{params:A}),getLyric:A=>o.A.get("/api/lyric?file="+A),updateListen:A=>o.A.put("/api/song/listens?path="+A),getKaraokeWordStyle:l,fillKaraokeWord:c,setBulletText:(A,e,t)=>{e.innerHTML=["&nbsp;","\u2022","\u2022\u2022","\u2022\u2022\u2022","\u2022\u2022\u2022\u2022","\u2022\u2022\u2022\u2022\u2022"][t],c(A,e)},runKaraokeEffect:(A,e,t,i,s)=>{let a=100*(e.currentTime-i)/(s-i);t.setAttribute("style",l(A,a))},emptyKaraokeWord:A=>{A.setAttribute("style","")}},h=t.p+"static/media/background.f0e791c4349fd41efd9e.jpg",d=t.p+"static/media/spin.f8463f3c65c06c934dae.jpg";t(702);var C=t(579);class I extends a.PureComponent{constructor(A){super(A),this.onChange=A=>{const{value:e}=A.target,t=this.props.maxLength?this.props.maxLength:200;let i="";e.length>t?i="Max length of search text is: "+t:this.regexValidation(e)||(i=this.props.regexErrorMsg?this.props.regexErrorMsg:"Search text is invalid"),this.setState({value:e,errorMsg:i})},this.onKeyUp=(A,e)=>{13===A.keyCode?this.onSearch(e):this.typingTimer=setTimeout(()=>{this.onSearch(e)},300)},this.onKeyDown=()=>{clearTimeout(this.typingTimer)},this.onSearch=()=>{let{value:A}=this.state;this.props.onSearch({name:this.props.name,value:A})},this.onClear=()=>{this.setState({value:""}),this.props.onSearch({name:this.props.name,value:null})},this.regexValidation=A=>{const e=this.props.regex?this.props.regex:"";return""===A||""===e||A.match(e)},this.state={value:"",errorMsg:"",invalid:!1,focus:!1},this.typingTimer=null}render(){const{name:A,label:e,disabled:t=!1,isRequire:i=!1,type:s="text",placeholder:a="Search..."}=this.props,{value:r,errorMsg:n}=this.state;return(0,C.jsxs)("div",{className:"input-wrapper",children:[e&&(0,C.jsxs)("label",{className:"input-label",children:[e,i&&(0,C.jsx)("span",{className:"input-require",children:"\xa0*"})]}),(0,C.jsxs)("div",{className:"input-search-wrapper",children:[(0,C.jsx)("i",{className:"fa fa-search input-icon-search",onClick:this.onSearch}),(0,C.jsx)("input",{type:s,name:A,value:r,disabled:t,onChange:this.onChange,className:"input-text input-text-search "+(n?" input-error":""),placeholder:a,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown}),r&&(0,C.jsx)("i",{className:"fa fa-times input-icon-clear",onClick:this.onClear}),!!n&&(0,C.jsx)("div",{className:"input-error-msg",children:n})]})]})}}const u=I,p=A=>(0,C.jsxs)("div",{className:"modal-wrapper",children:[(0,C.jsx)("span",{className:"close",title:"Close",onClick:A.onClose,children:"\xd7"}),(0,C.jsx)("div",{className:"modal-content",children:A.children}),(0,C.jsx)("div",{className:"caption",children:A.caption})]});var m=t(623);const y=A=>{const[e,t]=a.useState(!1),[s,r]=a.useState(null),n=s?s.artist+" - "+s.title:"",o=["#ff3311","#ff4422","#ff6644","#ff9933","#feae2d","#ccbb33","#d0c310","#aacc22","#69d025","#22ccaa","#12bdb9","#11aabb","#4444dd","#3311bb","#3b0cbd","#442299"],l=o[o.length-1],c=[...new Set(A.songData.map(A=>A.song_of_the_year).filter(Boolean))].sort((A,e)=>e-A),g=A=>{if(!A)return l;const e=c.indexOf(A);return o[e]||l},h=A=>{if(!A)return"#fff";return c.indexOf(A)<o.length/2?"#000":"#fff"};return(0,C.jsxs)("div",{id:"all_songs",children:[(0,C.jsx)("div",{className:"search-wrapper",children:(0,C.jsx)(u,{name:"searchText",onSearch:A.onSearch})}),(0,C.jsx)("div",{className:"all-song-value custom-scrollbar",children:(0,C.jsxs)("table",{className:"table_striped",id:"songTable",cellSpacing:"0",cellPadding:"0",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{style:{textAlign:"right"},children:"No."}),(0,C.jsx)("th",{style:{cursor:"pointer",minWidth:"220px"},onClick:()=>A.getAllSongs({sortBy:"title",sortOrder:"ASC"}),children:"Song"}),(0,C.jsx)("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"listens",sortOrder:"DESC"}),children:"Listens"}),(0,C.jsx)("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"song_of_the_year",sortOrder:"DESC"}),title:"Song of the year",children:"SOY"}),(0,C.jsx)("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"type",sortOrder:"ASC"}),children:"Type"}),(0,C.jsx)("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"createdDate",sortOrder:"DESC"}),children:"Date"})]})}),(0,C.jsx)("tbody",{children:A.songData.map((e,s)=>{const a=e.image_url?(0,m.Lo)(e.image_url):"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4RDmRXhpZgAATU0AKgAAAAgABAE7AAIAAAAJAAAISodpAAQAAAABAAAIVJydAAEAAAASAAAQzOocAAcAAAgMAAAAPgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFuaHR1IFRhAAAABZADAAIAAAAUAAAQopAEAAIAAAAUAAAQtpKRAAIAAAADMDEAAJKSAAIAAAADMDEAAOocAAcAAAgMAAAIlgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIwMjA6MDE6MDMgMjI6NTg6NTIAMjAyMDowMTowMyAyMjo1ODo1MgAAAEEAbgBoAHQAdQAgAFQAYQAAAP/hCxtodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+DQo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIj48cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPjxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSJ1dWlkOmZhZjViZGQ1LWJhM2QtMTFkYS1hZDMxLWQzM2Q3NTE4MmYxYiIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIi8+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPjx4bXA6Q3JlYXRlRGF0ZT4yMDIwLTAxLTAzVDIyOjU4OjUyLjAxMjwveG1wOkNyZWF0ZURhdGU+PC9yZGY6RGVzY3JpcHRpb24+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxkYzpjcmVhdG9yPjxyZGY6U2VxIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHJkZjpsaT5Bbmh0dSBUYTwvcmRmOmxpPjwvcmRmOlNlcT4NCgkJCTwvZGM6Y3JlYXRvcj48L3JkZjpEZXNjcmlwdGlvbj48L3JkZjpSREY+PC94OnhtcG1ldGE+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9J3cnPz7/2wBDAAcF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";return(0,C.jsxs)("tr",{className:A.currSong&&A.currSong.path===e.path?"tr-active":"",id:"tr-"+e.id,children:[(0,C.jsx)("td",{children:s+1}),(0,C.jsxs)("td",{className:"td-song-info",children:[(0,C.jsx)("img",{className:"song-picture",src:a,alt:e.artist+" - "+e.title,onClick:()=>(A=>{A.image_url&&(r((0,i.A)({},A)),t(!0))})(e)}),(0,C.jsxs)("a",{className:"song-item",href:"#/bai-hat/"+e.path,onClick:()=>A.playSong(e),children:[(0,C.jsx)("div",{className:"song-title",children:e.title}),(0,C.jsx)("div",{className:"song-artist",children:e.artist})]}),(0,C.jsx)("i",{className:"icon-play "+(A.isPlaying?"playing":"pause")})]}),(0,C.jsx)("td",{children:e.listens}),(0,C.jsx)("td",{children:e.song_of_the_year&&(0,C.jsx)("span",{className:"soy",style:{background:g(e.song_of_the_year),color:h(e.song_of_the_year)},title:"Song of the Year: ".concat(e.song_of_the_year),children:e.song_of_the_year})}),(0,C.jsx)("td",{children:e.type}),(0,C.jsx)("td",{children:e.formatCreatedDate})]},e.id)})})]})}),e&&(0,C.jsx)(p,{onClose:()=>{r(null),t(!1)},caption:n,children:(0,C.jsx)("img",{style:{width:"400px",maxWidth:"80%"},className:"img-modal",src:(0,m.Lo)(s.image_url),alt:n})})]})};var f=t(123);const v=t.p+"static/media/favicon.f8463f3c65c06c934dae.png";class x extends a.PureComponent{constructor(A){var e;super(A),e=this,this.setMediaSessionMeta=(A,e,t)=>{t||(t=v),"mediaSession"in window.navigator?(window.navigator.mediaSession.metadata=new window.MediaMetadata({title:A,artist:e,artwork:[{src:t,sizes:"96x96",type:"image/png"},{src:t,sizes:"128x128",type:"image/png"},{src:t,sizes:"192x192",type:"image/png"},{src:t,sizes:"256x256",type:"image/png"},{src:t,sizes:"384x384",type:"image/png"},{src:t,sizes:"512x512",type:"image/png"}]}),window.navigator.mediaSession.setActionHandler("previoustrack",this.prevSong),window.navigator.mediaSession.setActionHandler("nexttrack",this.nextSong),window.navigator.mediaSession.setActionHandler("play",this.playAudio),window.navigator.mediaSession.setActionHandler("pause",this.pauseAudio),window.navigator.mediaSession.setActionHandler("stop",this.pauseAudio)):console.log("Your browser doesn't not support MediaSession")},this.setPlayList=(A,e)=>{this.playList=[...A],this.initPlayList=[...A],this.activeAudio=e,this.setPlayType((0,m.PL)("playType"))},this.setActiveAudio=A=>{if(this.playList[this.activeAudio].id!==A.id){for(let e=0;e<this.playList.length;e++)if(this.playList[e].id===A.id){this.activeAudio=e;break}console.log("reset ActiveAudio: ",this.activeAudio)}},this.setMouseDown=()=>{this.mouseDown=!0},this.clearMouseDown=()=>{this.mouseDown=!1},this.toggleShuffle=()=>{this.state.playType===f.ki?this.setPlayType(f.gt):this.setPlayType(f.ki)},this.toggleRepeat=()=>{this.state.playType===f.np?this.setPlayType(f.gt):this.setPlayType(f.np)},this.togglePlay=()=>{this.state.isPlaying?this.pauseAudio():this.playAudio()},this.prevSong=()=>{const{playType:A}=this.state;if(A!==f.np){if(0===this.activeAudio)return void n.A.warn("This is the first song of playing list!");this.activeAudio--}this.props.playSong(this.playList[this.activeAudio],!0)},this.nextSong=()=>{const{playType:A}=this.state;if(A!==f.np){if(this.activeAudio===this.playList.length-1)return n.A.warn("This is the last song of playing list. Please select another song manually to play!"),void this.togglePlay();this.activeAudio++}this.props.playSong(this.playList[this.activeAudio],!0)},this.secsToMins=A=>{let e=Math.floor(A);return Math.floor(e/60)+":"+("0"+e%60).slice(-2)},this.getCurrentTime=()=>{if(!this.myAudio)return;const A=this.secsToMins(this.myAudio.currentTime),e=this.myAudio.currentTime/this.getDuration()*100;this.currentTime.innerText=A,this.progressBar.style.width=e+"%",this.state.isPlaying?this.showCurrentTime=requestAnimationFrame(this.getCurrentTime):cancelAnimationFrame(this.showCurrentTime)},this.showDuration=()=>{let A=this.secsToMins(this.getDuration());this.duration.innerText=A},this.updateProgressBar=A=>{const e=this.progressWrapper.offsetWidth,t=A.nativeEvent.offsetX/e;(this.mouseDown||"click"===A.type)&&(this.myAudio.currentTime=this.getDuration()*t,this.state.isPlaying||this.getCurrentTime(),this.props.onSeeked())},this.getDuration=()=>this.myAudio.duration===1/0?600:this.myAudio.duration,this.playAudio=()=>{let A=this.myAudio.play();void 0!==A?A.then(()=>{this.setState({isPlaying:!0},()=>{this.getCurrentTime(),this.props.onPlay()})}).catch(A=>{this.pauseAudio(),console.log("Error playing file: ",A),n.A.error("L\u1ed7i: KH\xd4NG th\u1ec3 t\u1ef1 \u0111\u1ed9ng ph\xe1t nh\u1ea1c, do b\u1ea1n ch\u01b0a t\u01b0\u01a1ng t\xe1c v\u1edbi trang, ho\u1eb7c Zing kh\xf4ng cho ph\xe9p ph\xe1t b\xe0i n\xe0y")}):(this.pauseAudio(),n.A.error("Your browser hasn't yet supported this functionality"))},this.pauseAudio=()=>{this.myAudio.pause(),this.props.onPause(),this.setState({isPlaying:!1})},this.setPlayType=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.gt;if(e.setState({playType:A}),A===f.ki){const A=e.playList[e.activeAudio];(0,m.k4)(e.playList);for(let t=0;t<e.playList.length;t++)if(e.playList[t].id===A.id){[e.playList[t],e.playList[0]]=[e.playList[0],e.playList[t]],e.activeAudio=0;break}}else{const A=e.playList[e.activeAudio];e.playList=[...e.initPlayList];for(let t=0;t<e.playList.length;t++)if(e.playList[t].id===A.id){e.activeAudio=t;break}}(0,m.kB)("playType",A)},this.state={playType:f.gt,isPlaying:!1},this.myAudio=a.createRef(),this.currentTime=a.createRef(),this.progressWrapper=a.createRef(),this.progressBar=a.createRef(),this.llPlayer=a.createRef(),this.llPlayPause=a.createRef(),this.duration=a.createRef(),this.mouseDown=!1,this.showCurrentTime=null,this.playList=[],this.initPlayList=[],this.activeAudio=0}componentDidMount(){this.props.getPlayerInstance(this)}render(){const{song:A}=this.props,{playType:e,isPlaying:t}=this.state;return(0,C.jsxs)("div",{className:"ll_player ".concat(t?"ll-playing":"ll-paused"),onMouseDown:this.setMouseDown,onMouseUp:this.clearMouseDown,ref:A=>this.llPlayer=A,children:[(0,C.jsx)("div",{className:"info",children:(0,C.jsxs)("div",{id:"song_details",children:[(0,C.jsx)("div",{className:"song_title",children:A.title}),(0,C.jsx)("div",{className:"song_artist",children:A.artist}),(0,C.jsxs)("div",{className:"song_album",children:["(",A.album?A.album:"No Album",")"]})]})}),(0,C.jsxs)("div",{className:"ll-btn-wrapper",children:[(0,C.jsxs)("button",{className:"ll-shuffle ".concat(e===f.ki?"active":""),title:"".concat(e===f.ki?"Turn off shuffle":"Shuffle"),onClick:this.toggleShuffle,children:[(0,C.jsx)("div",{className:"arrow"}),(0,C.jsx)("div",{className:"arrow"})]}),(0,C.jsxs)("button",{className:"ll-button ll-btn-prev",title:"Previous",onClick:this.prevSong,children:[(0,C.jsx)("div",{className:"arrow arrow-transform"}),(0,C.jsx)("div",{className:"arrow"})]}),(0,C.jsx)("button",{className:"ll-button ll-play-pause",title:t?"Pause":"Play",onClick:this.togglePlay,ref:A=>this.llPlayPause=A,children:(0,C.jsx)("div",{className:"arrow arrow-transform"})}),(0,C.jsxs)("button",{className:"ll-button ll-btn-next",title:"Next",onClick:this.nextSong,children:[(0,C.jsx)("div",{className:"arrow arrow-transform"}),(0,C.jsx)("div",{className:"arrow"})]}),(0,C.jsx)("button",{className:"ll-repeat ".concat(e===f.np?"active":""),title:"Repeat one",onClick:this.toggleRepeat})]}),(0,C.jsxs)("div",{className:"time",children:[(0,C.jsx)("span",{className:"current-time",ref:A=>this.currentTime=A,children:"0:00"}),(0,C.jsx)("span",{className:"progress",ref:A=>this.progressWrapper=A,onClick:this.updateProgressBar,onMouseMove:this.updateProgressBar,children:(0,C.jsx)("span",{ref:A=>this.progressBar=A})}),(0,C.jsx)("span",{className:"duration",ref:A=>this.duration=A,children:"0:00"})]}),(0,C.jsx)("audio",{ref:A=>this.myAudio=A,id:"myAudio",preload:"metadata",src:this.props.songURL,onLoadedMetadata:this.showDuration,onEnded:this.nextSong,crossOrigin:"anonymous"})]})}}const w=x;function L(A,e,t){!function(A,e,t){let i,s,a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=function(A){let e=A.parentNode.getBoundingClientRect(),t=A.getBoundingClientRect(),i={};return i.top=t.top-e.top+A.parentNode.scrollTop,i.right=t.right-e.right,i.bottom=t.bottom-e.bottom,i.left=t.left-e.left,i}(e),o=A.scrollTop,l=n.top-o,c=performance.now();!function e(){i=performance.now(),s=i-c,a=s/t,A.scrollTop=o+l*function(A){return A<.5?2*A*A:(4-2*A)*A-1}(a)+r,a<1&&window.requestAnimationFrame(e)}()}(A,e,t,-A.offsetHeight/2+e.offsetHeight/2)}function b(A,e){let t,i=window.pageYOffset,s=window.pageYOffset+A.getBoundingClientRect().top,a=(document.body.scrollHeight-s<window.innerHeight?document.body.scrollHeight-window.innerHeight:s)-i;a&&window.requestAnimationFrame(function A(s){t||(t=s);let r=s-t,n=Math.min(r/e,1);var o;n=(o=n)<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1,window.scrollTo(0,i+a*n),r<e&&window.requestAnimationFrame(A)})}class j extends a.PureComponent{constructor(A){super(A),this.onChangeVolume=A=>{const{value:e}=A.target,t=e/100;this.setState({volume:e}),this.props.myAudio.volume=t,(0,m.kB)("volume",t)},this.initSettingsAtPlayer=()=>{const{myAudio:A,lyric_playground:e}=this.props;let t=(0,m.PL)("lyricAlign");t&&this.settingLyricAlign(t);let i=(0,m.PL)("theme");if(i)switch(i){case"dark":this.changeTheme("dark");break;case"light":this.changeTheme("light");break;case"picture-bg":this.changeTheme("picture-bg")}let s=(0,m.PL)("speed");s&&(A.playbackRate=s);let a=(0,m.PL)("volume");a&&(A.volume=a,this.setState({volume:100*a})),this.setKaraokeMode((0,m.PL)("karaokeMode")),this.setBlurMode((0,m.PL)("blurMode")),this.setGiganticLine((0,m.PL)("giganticLine")),this.setWordAppear((0,m.PL)("wordAppear")),this.setLineAppear((0,m.PL)("lineAppear")),this.setTranslate((0,m.PL)("translate")),setTimeout(()=>{b(e,300)},10)},this.updateSyncLyric=A=>{this.props.updateSyncLyric(A)},this.settingLyricAlign=A=>{this.props.div_result.style.textAlign=A,(0,m.kB)("lyricAlign",A)},this.settingTheme=A=>{this.changeTheme(A),(0,m.kB)("theme",A)},this.changeTheme=A=>{const{lyric_playground:e,div_background:t}=this.props;t.style.display="picture-bg"===A?"":"none",e.classList.forEach(A=>{A.includes("lyric-pg-")&&e.classList.remove(A)}),e.classList.add("lyric-pg-"+A)},this.toggleKaraokeMode=()=>{this.props.div_result.classList.contains("karaoke-mode")?this.setKaraokeMode(!1):this.setKaraokeMode(!0)},this.setKaraokeMode=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("karaoke-mode"),e.classList.remove("karaoke-off"),(0,m.kB)("karaokeMode",!0)):!1===A&&(e.classList.remove("karaoke-mode"),e.classList.add("karaoke-off"),(0,m.kB)("karaokeMode",!1))},this.toggleBlurMode=()=>{const{div_result:A}=this.props;A.classList.contains("blur-mode")?this.setBlurMode(!1):this.setBlurMode(!0)},this.setBlurMode=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("blur-mode"),(0,m.kB)("blurMode",!0)):!1===A&&(e.classList.remove("blur-mode"),(0,m.kB)("blurMode",!1))},this.toggleGiganticLine=()=>{const{div_result:A}=this.props;A.classList.contains("div-res-big-active-line")?this.setGiganticLine(!1):this.setGiganticLine(!0)},this.setGiganticLine=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("div-res-big-active-line"),(0,m.kB)("giganticLine",!0)):!1===A&&(e.classList.remove("div-res-big-active-line"),(0,m.kB)("giganticLine",!1))},this.flipWaveform=()=>{let A=(0,m.PL)("flipWaveform");A=!A||!0!==A,(0,m.kB)("flipWaveform",A),n.A.info("Flip waveform = ".concat(A,", refresh page to take effect!")),this.props.updateFlipWaveform(A)},this.toggleWordAppear=()=>{const{div_result:A}=this.props;A.classList.contains("word-appear")?this.setWordAppear(!1):this.setWordAppear(!0)},this.setWordAppear=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("word-appear"),(0,m.kB)("wordAppear",!0)):!1===A&&(e.classList.remove("word-appear"),(0,m.kB)("wordAppear",!1))},this.toggleLineAppear=()=>{const{div_result:A}=this.props;A.classList.contains("line-appear")?this.setLineAppear(!1):this.setLineAppear(!0)},this.setLineAppear=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("line-appear"),(0,m.kB)("lineAppear",!0)):!1===A&&(e.classList.remove("line-appear"),(0,m.kB)("lineAppear",!1))},this.toggleTranslate=()=>{const{div_result:A}=this.props;A.classList.contains("translate")?this.setTranslate(!1):this.setTranslate(!0)},this.setTranslate=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("translate"),(0,m.kB)("translate",!0)):!1===A&&(e.classList.remove("translate"),(0,m.kB)("translate",!1))},this.updateSpeed=A=>{let e=this.props.myAudio.playbackRate+A;e=Number(e.toFixed("1")),this.props.myAudio.playbackRate=e,n.A.info("Speed: "+e+"x"),(0,m.kB)("speed",e)},this.createLyricCard=()=>{this.props.createLyricCard()},this.state={volume:100}}componentDidMount(){this.props.initSettingsAtPlayer(this.initSettingsAtPlayer)}render(){const{showSetting:A,openSetting:e,isFullscreen:t}=this.props,{volume:i}=this.state;return(0,C.jsxs)("div",{className:"setting_section",style:{display:t?"none":""},children:[!A&&(0,C.jsx)("div",{className:"btn_toggle_setting",title:"Settings",onClick:e,children:(0,C.jsx)("i",{className:"fa fa-ellipsis-h"})}),!!A&&(0,C.jsxs)("div",{id:"setting_wrapper",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"setting-legend",children:"Lyric:\xa0"}),(0,C.jsx)("i",{className:"fa fa-caret-up btn_sync_up",title:"Sync lyric: -100ms (client only)",onClick:()=>this.updateSyncLyric(-100)}),(0,C.jsx)("i",{className:"fa fa-caret-down btn_sync_down",title:"Sync lyric: +100ms (client only)",onClick:()=>this.updateSyncLyric(100)}),(0,C.jsx)("i",{className:"setting_separator",children:"|"}),(0,C.jsx)("i",{className:"fa fa-align-left btn_align btn_align_left",title:"Lyric left alignment",onClick:()=>this.settingLyricAlign("left")}),(0,C.jsx)("i",{className:"fa fa-align-center btn_align btn_align_center",title:"Lyric center",onClick:()=>this.settingLyricAlign("center")}),(0,C.jsx)("i",{className:"fa fa-align-right btn_align btn_align_right",title:"Lyric right alignment",onClick:()=>this.settingLyricAlign("right")})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"setting-legend",children:"Theme:\xa0"}),(0,C.jsx)("i",{className:"fa fa-square btn_theme btn_theme_dark",title:"Dark theme",onClick:()=>this.settingTheme("dark")}),(0,C.jsx)("i",{className:"fa fa-square btn_theme btn_theme_light",title:"Light theme",onClick:()=>this.settingTheme("light")}),(0,C.jsx)("i",{className:"fa fa-picture-o btn_theme btn_theme_picture_bg",title:"Picture background theme",onClick:()=>this.settingTheme("picture-bg")})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"setting-legend",children:"Mode:\xa0"}),(0,C.jsx)("i",{className:"fa fa-microphone btn_theme btn_karaoke_mode",title:"Karaoke mode",onClick:this.toggleKaraokeMode}),(0,C.jsx)("i",{className:"fa fa-cloud btn_theme btn_blur_mode",title:"Blur mode",onClick:this.toggleBlurMode}),(0,C.jsx)("i",{className:"fa fa-eye-slash btn_theme btn_word_appear",title:"Word appears when time comes to it",onClick:this.toggleWordAppear}),(0,C.jsx)("i",{className:"fa fa-coffee btn_theme",title:"Word & Line appears when time comes to it",onClick:this.toggleLineAppear}),(0,C.jsx)("i",{className:"fa fa-search-plus btn_theme btn_gigantic_line",title:"Gigantic line",onClick:this.toggleGiganticLine}),(0,C.jsx)("i",{className:"fa fa-retweet btn_theme btn_flip_waveform",title:"Flip waveform horizontally",onClick:this.flipWaveform}),(0,C.jsx)("i",{className:"fa fa-language btn_theme btn_translate",title:"Lyric translation (only .xlrc lyric)",onClick:this.toggleTranslate})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"setting-legend",children:"Speed:\xa0"}),(0,C.jsx)("i",{className:"fa fa-plus-square btn_theme btn_increase_speed",title:"Increase speed",onClick:()=>this.updateSpeed(.1)}),(0,C.jsx)("i",{className:"fa fa-minus-square btn_theme btn_decrease_speed",title:"Decrease speed",onClick:()=>this.updateSpeed(-.1)})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"setting-legend",children:"Volume:\xa0"}),(0,C.jsx)("input",{type:"range",min:"1",max:"100",value:i,className:"slider-volume",onChange:this.onChangeVolume})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{className:"setting-legend",children:"Create Lyric Card:\xa0"}),(0,C.jsx)("i",{className:"fa fa-quote-right btn_theme",onClick:this.createLyricCard})]})]})]})}}const k=j;var T=t(740),S=t.n(T);class N extends a.PureComponent{constructor(A){super(A),this.drawWaveform=()=>{const{flipWaveform:A,analyser:e}=this.props;if(!e)return;this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;const t=this.canvas.getContext("2d"),i=e.frequencyBinCount,s=parseInt(i/1.2),a=new Uint8Array(s),r=Array(s).fill(0),n=Array(s).fill(0),o=this.canvas.width,l=this.canvas.height,c=parseInt(o/s),g=(0,m.Hr)();let h,d,C;if(console.log("bufferLength, totalBar, WIDTH, HEIGHT: ",i,s,o,l),window.innerWidth<=720)return;console.log("Start drawing waveform...");const I=()=>{e.getByteFrequencyData(a),t.clearRect(0,0,o,l);for(let e=0;e<s;e++)h=!0===A?1+parseInt(a[s-e]/270*l):1+parseInt(a[e]/270*l),d=g,C=(c+3)*e,t.fillStyle=d,t.fillRect(C,l-h,c,h),h>r[e]&&(r[e]=h,n[e]=0),r[e]>0&&(t.beginPath(),t.strokeStyle=d,t.lineWidth=3,t.moveTo(C,l-r[e]),t.lineTo(C+c,l-r[e]),t.stroke(),n[e]+=.05,r[e]=r[e]-n[e]);this.props.myAudio.paused||(this.waveformAniFr=requestAnimationFrame(I))};I()},this.getBarColor=(A,e)=>"rgb("+parseInt(255*e)+","+(100-30*A)+",255)",this.stopWaveform=()=>{cancelAnimationFrame(this.waveformAniFr)},this.canvas=a.createRef(),this.waveformAniFr=null}componentDidMount(){this.props.getWaveformInstance(this),window.onresize=S()(this.drawWaveform,300)}render(){return(0,C.jsx)("canvas",{className:"canvas-waveform",ref:A=>this.canvas=A})}}const _=N,M=A=>{const{toggleWaveform:e,showWaveform:t,flipWaveform:i,analyser:s,initAnalyzer:a,myAudio:r,getWaveformInstance:n,song:o}=A;return(0,C.jsxs)("div",{className:"left_info",onClick:e,title:t?"Switch to song meta":"Switch to waveform",children:[t&&(0,C.jsx)(_,{analyser:s,initAnalyzer:a,myAudio:r,getWaveformInstance:n,flipWaveform:i}),!t&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"left_title",children:o.title}),(0,C.jsx)("div",{className:"left_artist",children:o.artist}),(0,C.jsxs)("div",{className:"left_album",children:["(",o.album?o.album:"No Album",")"]})]})]})};var K=t(905);const P=A=>{let{isOpen:e,onClose:t,lyricText:i,onGenerateCard:s}=A;const[r,n]=(0,a.useState)(""),o=(0,a.useRef)(null);(0,a.useEffect)(()=>{e&&n("")},[e]);const l=()=>{const A=window.getSelection(),e=A?A.toString().trim():"";e&&n(e)};return e?(0,C.jsx)("div",{className:"lyric-selection-modal-overlay",children:(0,C.jsx)("div",{className:"lyric-selection-modal-container",children:(0,C.jsx)(p,{onClose:t,caption:"Select Lyric Text",children:(0,C.jsxs)("div",{className:"lyric-selection-content",children:[(0,C.jsx)("h3",{children:"Select Lyric Text"}),(0,C.jsx)("p",{className:"instruction",children:"Select the text below that you want to include in your lyric card:"}),(0,C.jsx)("div",{ref:o,className:"lyric-display",onMouseUp:()=>{l()},dangerouslySetInnerHTML:{__html:i}}),(0,C.jsx)("div",{className:"mobile-selection-actions",children:(0,C.jsx)("button",{className:"btn-generate-mobile",onClick:l,children:"Confirm selection (mobile)"})}),r&&(0,C.jsxs)("div",{className:"selected-preview",children:[(0,C.jsx)("h4",{children:"Selected Text:"}),(0,C.jsx)("div",{className:"preview-text",children:r}),(0,C.jsx)("button",{className:"btn-generate",onClick:()=>{r&&s(r)},children:"Generate Card"})]})]})})})}):null};var W=t(316);const F=A=>{let{textAlign:e,setTextAlign:t,textColor:i,setTextColor:s,isBold:a,setIsBold:r,backgroundColor:n,setBackgroundColor:o,useSongImage:l,setUseSongImage:c,hasSongImage:g,overlayOpacity:h,setOverlayOpacity:d,fontFamily:I,setFontFamily:u,fontSize:p,setFontSize:m}=A;return(0,C.jsxs)("div",{className:"card-config",children:[(0,C.jsxs)("div",{className:"config-group bg-source",children:[(0,C.jsx)("span",{children:"Background Source:"}),(0,C.jsxs)("div",{className:"button-group",children:[(0,C.jsx)("button",{className:"btn-config ".concat(l?"":"active"),onClick:()=>c(!1),title:"Use solid color",children:"Color"}),(0,C.jsx)("button",{className:"btn-config ".concat(l?"active":""),onClick:()=>c(!0),title:"Use song image",disabled:!g,children:"Song image"})]})]}),(0,C.jsxs)("div",{className:"config-group",children:[(0,C.jsx)("span",{children:"Text Alignment:"}),(0,C.jsxs)("div",{className:"button-group",children:[(0,C.jsx)("button",{className:"btn-config ".concat("left"===e?"active":""),onClick:()=>t("left"),title:"Align left",children:(0,C.jsx)("i",{className:"fa fa-align-left"})}),(0,C.jsx)("button",{className:"btn-config ".concat("center"===e?"active":""),onClick:()=>t("center"),title:"Align center",children:(0,C.jsx)("i",{className:"fa fa-align-center"})}),(0,C.jsx)("button",{className:"btn-config ".concat("right"===e?"active":""),onClick:()=>t("right"),title:"Align right",children:(0,C.jsx)("i",{className:"fa fa-align-right"})})]})]}),(0,C.jsxs)("div",{className:"config-group config-text-color",children:[(0,C.jsx)("span",{children:"Text Color: \xa0"}),(0,C.jsx)("input",{type:"color",value:i,onChange:A=>s(A.target.value),className:"color-picker"}),(0,C.jsx)("span",{className:"bold-toggle",children:"Bold:\xa0"}),(0,C.jsx)("input",{type:"checkbox",checked:a,onChange:A=>r(A.target.checked),className:"bold-checkbox"})]}),(0,C.jsxs)("div",{className:"config-group",children:[(0,C.jsx)("span",{children:"Background Color:"}),(0,C.jsxs)("div",{className:"color-inputs",children:[(0,C.jsx)("input",{type:"color",value:n,onChange:A=>o(A.target.value),className:"color-picker"}),(0,C.jsxs)("select",{value:n,onChange:A=>o(A.target.value),className:"preset-colors",children:[(0,C.jsx)("option",{value:"#667eea",children:"Purple Gradient"}),(0,C.jsx)("option",{value:"#601f9e",children:"Dark Purple"}),(0,C.jsx)("option",{value:"#1a1a2e",children:"Dark Blue"}),(0,C.jsx)("option",{value:"#0f3460",children:"Navy"}),(0,C.jsx)("option",{value:"#e94560",children:"Pink"}),(0,C.jsx)("option",{value:"#ff6b6b",children:"Red"}),(0,C.jsx)("option",{value:"#4ecdc4",children:"Teal"}),(0,C.jsx)("option",{value:"#45b7d1",children:"Cyan"})]})]})]}),(0,C.jsxs)("div",{className:"config-group",children:[(0,C.jsx)("span",{children:"Font Family:"}),(0,C.jsxs)("select",{value:I,onChange:A=>u(A.target.value),className:"font-select",children:[(0,C.jsx)("option",{value:"Open Sans",children:"Open Sans"}),(0,C.jsx)("option",{value:"Verdana",children:"Verdana"}),(0,C.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,C.jsx)("option",{value:"Lavishly Yours",children:"Lavishly Yours"}),(0,C.jsx)("option",{value:"Lobster",children:"Lobster"}),(0,C.jsx)("option",{value:"Pacifico",children:"Pacifico"}),(0,C.jsx)("option",{value:"Borel",children:"Borel"})]})]}),(0,C.jsxs)("div",{className:"config-group",children:[(0,C.jsxs)("span",{children:["Font Size: ",p,"px"]}),(0,C.jsx)("input",{type:"range",min:"5",max:"40",value:p,onChange:A=>m(Number(A.target.value)),className:"font-size-slider"})]}),(0,C.jsxs)("div",{className:"config-group",children:[(0,C.jsxs)("span",{children:["Image Overlay: ",h,"%"]}),(0,C.jsx)("input",{type:"range",min:"0",max:"80",step:"5",value:h,onChange:A=>d(Number(A.target.value)),className:"font-size-slider"})]})]})},B=A=>{let{isOpen:e,onClose:t,onCloseAll:i,song:s,selectedText:r}=A;const n=(0,a.useRef)(null),[o,l]=(0,a.useState)("left"),[c,g]=(0,a.useState)("#667eea"),[h,I]=(0,a.useState)(!0),[u,y]=(0,a.useState)(60),[f,v]=(0,a.useState)("#ffffff"),[x,w]=(0,a.useState)(!1),[L,b]=(0,a.useState)(14),[j,k]=(0,a.useState)("Open Sans"),T=(null===s||void 0===s?void 0:s.image_url)||null,S=T?(0,m.Lo)(T):d;return e?(0,C.jsx)("div",{className:"lyric-download-modal-overlay",children:(0,C.jsx)("div",{className:"lyric-download-modal-container",children:(0,C.jsx)(p,{onClose:i,children:(0,C.jsxs)("div",{className:"lyric-download-content",children:[(0,C.jsx)("h3",{children:"Generate Lyric Card"}),(0,C.jsxs)("div",{className:"config-preview-row",children:[(0,C.jsx)(F,{textAlign:o,setTextAlign:l,textColor:f,setTextColor:v,isBold:x,setIsBold:w,backgroundColor:c,setBackgroundColor:g,useSongImage:h,setUseSongImage:I,hasSongImage:Boolean(S),overlayOpacity:u,setOverlayOpacity:y,fontFamily:j,setFontFamily:k,fontSize:L,setFontSize:b}),(0,C.jsxs)("div",{ref:n,className:"lyric-card",style:{backgroundColor:c,backgroundImage:h&&S?"linear-gradient(rgba(0,0,0,".concat(u/100,"), rgba(0,0,0,").concat(u/100,")), url(").concat(S,")"):"none",backgroundSize:h&&S?"cover":"auto",backgroundPosition:"center",backgroundRepeat:"no-repeat",textAlign:o},children:[(0,C.jsx)("div",{className:"card-lyric-text",style:{color:f,fontFamily:j,fontSize:"".concat(L,"px"),fontWeight:x?"bold":"normal"},children:r}),(0,C.jsxs)("div",{className:"card-song-info",style:{color:f},children:[s.title&&(0,C.jsx)("div",{className:"card-title",children:s.title}),s.artist&&(0,C.jsx)("div",{className:"card-artist",children:s.artist})]})]})]}),(0,C.jsxs)("div",{className:"card-actions",children:[(0,C.jsxs)("button",{className:"btn-action",onClick:async()=>{const A=n.current;if(A)try{const e=A.getBoundingClientRect(),t=Math.round(Math.max(e.width,e.height)),i=await W.gO(A,{pixelRatio:4,cacheBust:!0,width:t,height:t,style:{width:"".concat(t,"px"),height:"".concat(t,"px")}}),a=document.createElement("a"),r=(s.title||"untitled").replaceAll(/\s+/g,""),n=(s.artist||"unknown").replaceAll(/\s+/g,"");a.download="lyric-card-".concat(r,"-").concat(n,".jpg"),a.href=i,a.click()}catch(e){console.error(e)}},children:[(0,C.jsx)("i",{className:"fa fa-download"})," Download Card"]}),(0,C.jsxs)("button",{className:"btn-action",onClick:()=>{navigator.clipboard.writeText(r),alert("Lyric text copied to clipboard!")},children:[(0,C.jsx)("i",{className:"fa fa-copy"})," Copy Text"]}),(0,C.jsxs)("button",{className:"btn-action",onClick:t,children:[(0,C.jsx)("i",{className:"fa fa-arrow-left"})," Back to Selection"]})]})]})})})}):null},R=A=>{let{isOpen:e,onClose:t,song:i,lyricText:s}=A;const[r,n]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),c=()=>{l(!1),n(""),t()};return e?(0,C.jsx)(C.Fragment,{children:o?(0,C.jsx)(B,{isOpen:o,onClose:()=>{l(!1)},onCloseAll:c,song:i,selectedText:r}):(0,C.jsx)(P,{isOpen:e,onClose:c,lyricText:s,onGenerateCard:A=>{console.log("Selected Text for Lyric Card:",A),n(A),l(!0)}})}):null},D="Dec 13, 2025";class H extends a.PureComponent{constructor(A){var e;super(A),e=this,this.initAnalyzer=()=>{if(this.state.analyser)return;const A=new(window.AudioContext||window.webkitAudioContext),e=A.createMediaElementSource(this.myAudio),t=A.createAnalyser();e.connect(t),t.connect(A.destination),t.fftSize=128,this.setState({analyser:t})},this.getAllSongs=function(A){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.setState({loading:!0});const s=A.sortBy?A.sortBy+","+A.sortOrder:e.state.params.sort;A.sortBy&&((0,m.kB)("sortBy",A.sortBy),(0,m.kB)("sortOrder",A.sortOrder));const a=(0,i.A)((0,i.A)((0,i.A)({},e.state.params),A),{},{sort:s});e.setState({params:a}),g.getAllSongs(a).then(A=>{const i=e.props.match.params.id;let s={},a=0;i&&(s=A.find((A,e)=>A.path===i&&(a=e,!0))),e.setState({songData:A,loading:!1}),e.playerInstance.setPlayList(A,a),t&&s.path&&e.playSong(s),e.scrollTableToActiveSong(s)}).catch(A=>{console.log(A),n.A.error(A),e.setState({loading:!1})})},this.playSong=function(A){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("Start playing ".concat(A.title," - ").concat(A.artist,"...")),e.props.match.params.id!==A.path&&(window.location.href="#/bai-hat/"+A.path),A.zing_id&&(A.zingStream=(0,m.Lo)("/api/zing/mp3/streaming?zing_id="+A.zing_id)),e.setState({song:A},()=>{e.getLyric(A)});const i=A&&A.image_url?(0,m.Lo)(A.image_url):d;e.playerInstance.setActiveAudio(A),e.playerInstance.setMediaSessionMeta(A.title,A.artist,i),t&&e.scrollTableToActiveSong(A)},this.scrollTableToActiveSong=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(0,m.Hc)("songTable");if(!e||!A.id)return;L(e.parentNode,(0,m.Hc)("tr-"+A.id),300)},this.getLyric=A=>{this.div_result.innerHTML=f.jD,this.lines=[],A.lyric?(A.lyric.endsWith(".lrc")?(this.isLrc=!0,this.hasTranslation=!1):A.lyric.endsWith(".xlrc")?(this.isLrc=!0,this.hasTranslation=!0):(this.isLrc=!1,this.hasTranslation=!1),g.getLyric(A.lyric).then(A=>{A===f.Fu?this.setNoLyric():this.saveLyric(A)}).catch(A=>{console.log(A),n.A.error(A)})):this.setNoLyric()},this.saveLyric=A=>{this.lines=A.trim().split("\n"),this.initLyric()},this.isNoLyric=()=>0===this.lines.length,this.setNoLyric=()=>{this.lines=[],this.initLyric()},this.initLyric=()=>{this.setPlayLyricInterval(),this.div_result.innerHTML="",this.startTimes=[],this.endTimes=[],this.tranMaps=[],this.cntWord=0,this.offsetTime=0,this.currWordID=-1,this.playerInstance.playAudio(),this.isNoLyric()?this.div_result.innerHTML=f.eh:(this.metaExist=!1,this.lyricMeta={},this.div_result.innerHTML="",this.isLrc?this.initLrcLyric():this.initTrcLyric()),this.initSettingsAtPlayer()},this.initTrcLyric=async()=>{let A,e,t,i,a,r;var n,o=!1,l=!1;try{for(var c,g=(0,s.A)(this.lines);o=!(c=await g.next()).done;o=!1){let n=c.value;if(A=n.match(/\[\d+:\d+\.\d+\]/g),null!=A){if(e=(0,m.A4)(A[0]),A=n.substring(A[0].length),t=A.match(/<\d+>[^<]*/g),r=(0,m.N3)("div",null,"line"),null==t)continue;i=e;var h,d=!1,C=!1;try{for(var I,u=(0,s.A)(t);d=!(I=await u.next()).done;d=!1){let A=I.value;{a=i+parseFloat(A.match(/\d+/)[0])/1e3,a=(0,m.kV)(a);let e=(0,m.N3)("span","word-"+this.cntWord,"not-pass-word",{"time-start":i,"time-end":a});e.innerText=A.replace(/<\d+>/,""),""===e.innerText.trim()&&(e.innerHTML="&nbsp;",e.setAttribute("is-empty","1")),this.startTimes[this.cntWord]=i,this.endTimes[this.cntWord]=a,i=a,this.cntWord++,r.appendChild(e)}}}catch(p){C=!0,h=p}finally{try{d&&null!=u.return&&await u.return()}finally{if(C)throw h}}this.div_result.appendChild(r)}else this.readLyricMeta(n)}}catch(p){l=!0,n=p}finally{try{o&&null!=g.return&&await g.return()}finally{if(l)throw n}}this.appendLyricMeta()},this.initLrcLyric=async()=>{let A,e,t,i,a,r,n="",o=new Map,l=new Map;var c,g=!1,h=!1;try{for(var d,C=(0,s.A)(this.lines);g=!(d=await C.next()).done;g=!1){let c=d.value;if(n=c.match(/\[\d+:\d+\.\d+\]/g),e=c.match(/\[tran\d+\]/g),null!=n){A=n.reduce((A,e)=>A+e.length,0),a=c.substring(A);var I,u=!1,p=!1;try{for(var y,f=(0,s.A)(n);u=!(y=await f.next()).done;u=!1){const A=y.value;r=(0,m.A4)(A),this.startTimes[this.cntWord]=r,o.set(r,a),this.cntWord++}}catch(v){p=!0,I=v}finally{try{u&&null!=f.return&&await f.return()}finally{if(p)throw I}}}else null!=e?(t=e[0].substring(1,e[0].length-1),i=c.substring(e[0].length),l.has(t)||l.set(t,new Map),l.get(t).set(r,i)):this.readLyricMeta(c)}}catch(v){h=!0,c=v}finally{try{g&&null!=C.return&&await C.return()}finally{if(h)throw c}}this.startTimes.sort(function(A,e){return A-e});for(let s=0;s<this.startTimes.length;s++){let A=(0,m.N3)("div",null,"line"),e=(0,m.N3)("span","word-"+s,"not-pass-word",null);if(e.innerText=o.get(this.startTimes[s]),""===e.innerText&&(e.innerHTML="&nbsp",e.setAttribute("is-empty","1")),A.appendChild(e),l.size>0)for(let[t,i]of l)if(i.has(this.startTimes[s])){let e=(0,m.N3)("div",null,"line-tran "+t,null);e.innerText=i.get(this.startTimes[s]),A.appendChild(e)}this.div_result.appendChild(A)}this.appendLyricMeta();for(let s=0;s<this.startTimes.length-1;s++)this.endTimes[s]=this.startTimes[s+1];this.endTimes[this.startTimes.length-1]=this.myAudio.duration},this.readLyricMeta=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=A.lastIndexOf("]");A.includes("offset:")?(e.offsetTime=A.match(/[0-9|-]+/g),e.offsetTime=parseInt(e.offsetTime)):A.includes("[author:")?(e.metaExist=!0,e.lyricMeta.by=A.substring(8,t).trim()):A.includes("[by:")?(e.metaExist=!0,e.lyricMeta.by=A.substring(4,t).trim()):A.includes("[createdDate:")?(e.metaExist=!0,e.lyricMeta.date=A.substring(13,t).trim()):A.includes("[date:")?(e.metaExist=!0,e.lyricMeta.date=A.substring(6,t).trim()):A.includes("[source:")?(e.metaExist=!0,e.lyricMeta.source=A.substring(8,t).trim()):A.includes("[ti:")?(e.metaExist=!0,e.lyricMeta.title=A.substring(4,t).trim()):A.includes("[ar:")&&(e.metaExist=!0,e.lyricMeta.artist=A.substring(4,t).trim())},this.appendLyricMeta=()=>{if(this.metaExist){this.div_result.appendChild((0,m.N3)("div",null,"line-meta"));let A=(0,m.N3)("div",null,"line-meta");A.innerText="-----------",this.div_result.appendChild(A);const e=(0,m.N3)("div",null,"lyric-info");if(this.div_result.appendChild(e),this.lyricMeta.title&&(A=(0,m.N3)("div",null,"line-meta",{style:"font-weight:bold"}),A.innerText=this.lyricMeta.title+" - "+this.lyricMeta.artist,e.appendChild(A)),this.lyricMeta.by&&(A=(0,m.N3)("div",null,"line-meta"),A.innerText="Lyric creator: "+this.lyricMeta.by,e.appendChild(A)),this.lyricMeta.source&&(A=(0,m.N3)("div",null,"line-meta"),A.innerText="Source: "+this.lyricMeta.source,e.appendChild(A)),this.lyricMeta.date){const t=new Date(this.lyricMeta.date),i=(0,m.vd)(t)?(0,m.O)(t):t;A=(0,m.N3)("div",null,"line-meta"),A.innerText="Date: "+i,e.appendChild(A)}}},this.setPlayLyricInterval=()=>{this.myAudio&&!this.myAudio.paused&&(this.playLyricInterval=setInterval(()=>{this.updateLyric()},30))},this.clearPlayLyricInterval=()=>{this.playLyricInterval&&clearInterval(this.playLyricInterval),this.playLyricInterval=null},this.onSeeked=()=>{this.clearCountdownInterval(),this.playLyricInterval||this.updateLyric(),setTimeout(()=>{this.isNoLyric()||this.reUpdateWordPass()},0),this.scrollLyric()},this.onPause=()=>{this.clearCountdownInterval(),this.clearPlayLyricInterval(),this.setState({isPlaying:!1,spinning:!1}),this.waveformInstance&&this.waveformInstance.stopWaveform()},this.onPlay=()=>{if(this.playLyricInterval||this.setPlayLyricInterval(),this.setState({isPlaying:!0,spinning:!0}),0===this.myAudio.currentTime){const A=this.props.match.params.id;A&&setTimeout(()=>{this.props.match.params.id===A&&g.updateListen(A).then(A=>{console.log(A)}).catch(A=>{console.log(A),n.A.error(A)})},6e4),setTimeout(()=>{if((0,m.Hc)("word-0")&&!this.isNoLyric())for(let A=0;A<this.cntWord;A++)(0,m.Hc)("word-"+A).classList.add("not-pass-word")},0)}this.state.showWaveform&&this.waveformInstance&&this.drawWave()},this.countdownAtEmptyWord=A=>{if((0,m.Hc)("word-"+(this.currWordID+1))){let e=this.endTimes[this.currWordID]-this.startTimes[this.currWordID],t=this.endTimes[this.currWordID]+this.offsetTime/1e3-this.myAudio.currentTime;(e>=5&&t<=5||e>=3&&t<=3)&&g.setBulletText(this.lyric_playground,A,Math.ceil(t))}},this.updateLyric=async()=>{if(this.isNoLyric())return void this.clearPlayLyricInterval();let A,e;if(this.currWordID>=0){const t=this.startTimes[this.currWordID]+this.offsetTime/1e3,i=this.endTimes[this.currWordID]+this.offsetTime/1e3,s=(0,m.Hc)("word-"+this.currWordID);if(t<=this.myAudio.currentTime&&i>=this.myAudio.currentTime)return this.div_result.classList.contains("karaoke-mode")&&g.runKaraokeEffect(this.lyric_playground,this.myAudio,s,t,i),void("1"===s.getAttribute("is-empty")&&this.countdownAtEmptyWord(s));A=(0,m.Hc)("word-"+this.currWordID),A&&"1"===A.getAttribute("is-empty")&&g.setBulletText(this.lyric_playground,A,0),g.fillKaraokeWord(this.lyric_playground,A),e=A.parentNode,A.classList.remove("word-active","curr-word")}this.gotoNextWord(A,e)},this.gotoNextWord=async(A,e)=>{if(this.currWordID=this.getCurrentWordByTime(this.myAudio.currentTime),this.currWordID>=0){const l=(0,m.Hc)("word-"+this.currWordID),c=l.parentNode;if(l.classList.add("word-active","curr-word"),l.classList.remove("not-pass-word"),e!==c){if(e){e.classList.remove("line-active");var t,i=!1,a=!1;try{for(var r,n=(0,s.A)(e.children);i=!(r=await n.next()).done;i=!1){let e=r.value;if(e===A)break;e.classList.remove("word-active")}}catch(o){a=!0,t=o}finally{try{i&&null!=n.return&&await n.return()}finally{if(a)throw t}}}c.classList.add("line-active")}this.activeAtCurr(l,c)}else this.removeActiveLastLine()},this.activeAtCurr=(A,e)=>{let t;for(let i=0;i<e.children.length;i++){if(e.children[i]===A){t=i;break}e.children[i].classList.add("word-active")}for(let i=t+1;i<e.children.length&&e.children[i].classList.contains("word-active");i++)e.children[i].classList.remove("word-active");A===e.childNodes[0]&&setTimeout(()=>{this.scrollLyric()},110)},this.removeActiveLastLine=async()=>{const A=(0,m.Hc)("word-"+(this.cntWord-1)).parentNode;if(A.classList.contains("line-active")){A.classList.remove("line-active");var e,t=!1,i=!1;try{for(var a,r=(0,s.A)(A.children);t=!(a=await r.next()).done;t=!1){a.value.classList.remove("word-active")}}catch(n){i=!0,e=n}finally{try{t&&null!=r.return&&await r.return()}finally{if(i)throw e}}}},this.scrollLyric=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==A&&(A=(0,m.Hc)("word-"+e.currWordID)),null!=A&&(e.div_result.scrollTop=20+A.parentNode.offsetTop-(0,m.Hc)("word-0").offsetTop-e.div_result.offsetHeight/2+A.parentNode.clientHeight/2)},this.getCurrentWordByTime=A=>{let e,t,i,s=0,a=this.cntWord-1;for(;s<=a;){if(e=parseInt((s+a)/2),t=this.startTimes[e]+this.offsetTime/1e3,i=this.endTimes[e]+this.offsetTime/1e3,t<=A&&i>=A)return t=this.startTimes[e+1]+this.offsetTime/1e3,i=this.endTimes[e+1]+this.offsetTime/1e3,t<=A&&i>=A?e+1:e;t>A?a=e-1:s=e+1}return 0===e||e===this.cntWord-1?e=-1:e&&e!==this.currErrWord&&(n.A.warn('Warning: lyric is not correct near "'.concat((0,m.Hc)("word-"+e).innerText,'"')),this.currErrWord=e),A>this.endTimes[this.cntWord-1]&&this.clearPlayLyricInterval(),e},this.clearCountdownInterval=()=>{clearInterval(this.countdownInterval),this.countdownInterval=null},this.reUpdateWordPass=()=>{if(this.currWordID=this.getCurrentWordByTime(this.myAudio.currentTime),this.currWordID>=0){for(let A=0;A<this.currWordID;A++){let e=(0,m.Hc)("word-"+A);e.classList.remove("not-pass-word"),"1"===e.getAttribute("is-empty")&&(e.innerHTML="&nbsp;"),g.fillKaraokeWord(this.lyric_playground,e),this.removeLineActive(e)}for(let A=this.currWordID;A<this.cntWord;A++){let e=(0,m.Hc)("word-"+A);e.classList.add("not-pass-word"),"1"===e.getAttribute("is-empty")&&(e.innerHTML="&nbsp;"),g.emptyKaraokeWord(e),this.removeLineActive(e)}(0,m.Hc)("word-"+this.currWordID).parentNode.classList.add("line-active")}},this.removeLineActive=A=>{A.parentNode.classList.contains("line-active")&&A.parentNode.classList.remove("line-active")},this.toggleSetting=A=>{this.setState({showSetting:A})},this.toggleFullscreen=()=>{const A=!this.state.isFullscreen;A?this.setFullscreen():this.unsetFullscreen(),this.setState({isFullscreen:A}),(0,m.kB)("fullscreen",A),setTimeout(()=>{this.scrollLyric()},350)},this.toggleWaveform=()=>{const A=!this.state.showWaveform;this.setState({showWaveform:A},()=>{this.waveformInstance&&(A?this.drawWave():this.waveformInstance.stopWaveform())}),(0,m.kB)("showWaveform",A)},this.drawWave=async()=>{await this.initAnalyzer(),this.waveformInstance.drawWaveform()},this.setFullscreen=()=>{let A=(0,m.yf)("body_wrapper");document.body.classList.add("overflow-hidden"),A.classList.add("body-fs"),A.classList.remove("body-normal")},this.unsetFullscreen=()=>{let A=(0,m.yf)("body_wrapper");document.body.classList.remove("overflow-hidden"),A.classList.remove("body-fs"),A.classList.add("body-normal"),setTimeout(()=>{b(this.lyric_playground,300)},200)},this.updateSyncLyric=A=>{this.offsetTime+=A,n.A.success("Offset lyric: "+this.offsetTime+"ms")},this.onSearch=A=>{(0,m.jB)("songTable",1,A.value?A.value:"")},this.createLyricCard=()=>{this.isNoLyric()?n.A.warn("No lyric available to create a card"):this.setState({showLyricCardModal:!0})},this.closeLyricCardModal=()=>{this.setState({showLyricCardModal:!1})};let t=(0,m.PL)("flipWaveform");void 0!==t&&null!==t||(t=!1),this.state={songData:[],params:{page:0},analyser:null,loading:!1,song:{},showSetting:!1,isFullscreen:!!(0,m.PL)("fullscreen"),showWaveform:(0,m.PL)("showWaveform")||!1,flipWaveform:t,isPlaying:!1,spinning:!1,showLyricCardModal:!1},this.lines=[],this.isLrc=!1,this.hasTranslation=!1,this.startTimes=[],this.endTimes=[],this.cntWord=0,this.offsetTime=0,this.currWordID=-1,this.metaExist=!1,this.lyricMeta={},this.myAudio=null,this.playLyricInterval=null,this.countdownInterval=null,this.currErrWord=null,this.playerInstance=null,this.waveformInstance=null,this.initSettingsAtPlayer=null,this.div_result=a.createRef(),this.lyric_playground=a.createRef(),this.div_background=a.createRef(),this.div_left_wrapper=a.createRef()}componentDidMount(){const A=(0,m.PL)("sortBy"),e=(0,m.PL)("sortOrder");this.getAllSongs({sortBy:A,sortOrder:e},!0),this.myAudio=this.child.myAudio,this.state.isFullscreen&&this.setFullscreen(),window.addEventListener("keydown",A=>{if(this.myAudio)switch(A.key){case"ArrowLeft":this.myAudio.currentTime-=5,this.onSeeked();break;case"ArrowRight":this.myAudio.currentTime+=5,this.onSeeked()}})}componentWillUnmount(){this.clearPlayLyricInterval(),this.clearCountdownInterval()}render(){var A;const{songData:e,song:t,showSetting:i,isFullscreen:s,isPlaying:a,spinning:r,showWaveform:n,flipWaveform:o,analyser:l,showLyricCardModal:c}=this.state,{theme:g}=this.context;let I;I=t.zing_id?t.zingStream:null!==t&&void 0!==t&&t.file_name?(0,m.Lo)("/api/song/file?file="+t.file_name):null;const u=null!==t&&void 0!==t&&t.image_url?(0,m.Lo)(t.image_url):d,p="url(".concat(null!==t&&void 0!==t&&t.image_url?"'"+(0,m.Lo)(t.image_url)+"'":h,")");return(0,C.jsxs)("div",{className:"body_wrapper ".concat(g===f.Vw?"body-light":"body-dark"," ").concat(s?"body-fs":"body-normal"),children:[(0,C.jsxs)("div",{id:"all-song-wrapper",children:[(0,C.jsxs)("div",{className:"edit-time",children:["Posted on: Sep 3, 2021. Last modified: ",D||"Sep 3, 2021","."]}),e&&0!==e.length&&(0,C.jsx)(y,{songData:e,currSong:t,getAllSongs:this.getAllSongs,playSong:this.playSong,onSearch:this.onSearch,isPlaying:a})]}),(0,C.jsx)(w,{song:t,songURL:I,onSeeked:this.onSeeked,onPause:this.onPause,onPlay:this.onPlay,ref:A=>{this.child=A},getPlayerInstance:A=>{this.playerInstance=A},playSong:this.playSong}),(0,C.jsxs)("div",{id:"lyric_playground",ref:A=>this.lyric_playground=A,className:"lyric-pg-picture-bg",children:[(0,C.jsx)("div",{className:"background-wrapper",children:(0,C.jsx)("div",{id:"div_background",ref:A=>this.div_background=A,className:"bg-image",style:{backgroundImage:p,textAlign:"center"}})}),(0,C.jsxs)("div",{className:"lyric-wrapper",children:[(0,C.jsxs)("div",{id:"div_left_wrapper",className:"left-wrapper",ref:A=>this.div_left_wrapper=A,children:[(0,C.jsx)("img",{id:"spinning_img",crossOrigin:"anonymous",style:{cursor:"pointer"},className:"left_img spinning ".concat(r?"":"paused-spin"),src:u,alt:"Left info",onClick:()=>{this.setState({spinning:!r})}}),(0,C.jsx)("canvas",{id:"spinning_canvas",style:{display:"none"}}),(0,C.jsx)(M,{toggleWaveform:this.toggleWaveform,showWaveform:n,flipWaveform:o,analyser:l,initAnalyzer:this.initAnalyzer,myAudio:this.myAudio,getWaveformInstance:A=>{this.waveformInstance=A},song:t})]}),(0,C.jsx)("div",{id:"div_result",className:"custom-scrollbar karaoke-mode div-res-big-active-line",style:{textAlign:"center"},ref:A=>this.div_result=A,onClick:()=>this.toggleSetting(!1)})]}),(0,C.jsx)(k,{div_result:this.div_result,lyric_playground:this.lyric_playground,div_background:this.div_background,div_left_wrapper:this.div_left_wrapper,myAudio:this.myAudio,showSetting:i,isFullscreen:s,scrollLyric:this.scrollLyric,initSettingsAtPlayer:A=>this.initSettingsAtPlayer=A,openSetting:()=>this.toggleSetting(!0),updateFlipWaveform:A=>this.setState({flipWaveform:A}),updateSyncLyric:A=>this.updateSyncLyric(A),createLyricCard:()=>this.createLyricCard()}),(0,C.jsx)("div",{className:"".concat(s?"setbot_fs":""," setting_bottom"),children:(0,C.jsx)("i",{className:"fa fa-arrows-alt btn_align btn_fullscreen",onClick:this.toggleFullscreen})}),(0,C.jsx)("div",{style:{clear:"both"}})]}),(0,C.jsx)(R,{isOpen:c,onClose:this.closeLyricCardModal,song:t,lyricText:(null===(A=this.div_result)||void 0===A?void 0:A.innerHTML)||""})]})}}H.contextType=K.g;const U=()=>{const A=(0,r.g)();return(0,C.jsx)(H,{match:{params:A}})}},304:(A,e,t)=>{t.d(e,{j:()=>r});var i=t(123),s=t(101),a=t(782);let r=new class{constructor(){this.isAuthenticated=()=>!!localStorage.getItem(i.Xh),this.login=(A,e,t)=>{let{username:a,password:r}=A;const n={username:a,password:r};s.A.post("/signin",n).then(A=>{localStorage.setItem(i.Xh,A[i.Xh]),e()}).catch(A=>{t(A.data?A.data:A)})},this.logout=()=>{s.A.post("/signout").then(A=>{localStorage.removeItem(i.Xh),window.location="/"}).catch(A=>{console.log(A),a.A.error(A)})},this.getMe=()=>s.A.get("/api/user/me"),this.redirectToLoginPage=()=>{a.A.info("You need to login first!"),localStorage.removeItem(i.Xh),window.location.hash="/login"},this.rolesHasPermission=(A,e)=>{if(!i.cq[e])return!0;for(let t=0;t<A.length;t++)if(i.cq[e].includes(A[t]))return!0;return!1},this.userInfo=null}}},702:()=>{},782:(A,e,t)=>{t.d(e,{A:()=>a});var i=t(115);t(342);const s={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},a={info:A=>{i.oR.info(A,s)},success:A=>{i.oR.success(A,s)},warn:A=>{i.oR.warn(A,s)},error:A=>{let e;e=A.data&&A.data.message?A.data.message:A?A.toString():"Error: unexpected error occurred!",i.oR.error(e,s)}}}}]);
//# sourceMappingURL=122.5ed09aba.chunk.js.map