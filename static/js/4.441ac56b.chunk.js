(this["webpackJsonpliliana-player"]=this["webpackJsonpliliana-player"]||[]).push([[4],{37:function(A,e,t){"use strict";var i=t(16);t(44);const s={position:i.b.POSITION.TOP_RIGHT,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},a={info:A=>{i.b.info(A,s)},success:A=>{i.b.success(A,s)},warn:A=>{i.b.warn(A,s)},error:A=>{let e;e=A.data&&A.data.message?A.data.message:A?A.toString():"Error: unexpected error occurred!",i.b.error(e,s)}};e.a=a},39:function(A,e,t){"use strict";t.d(e,"a",(function(){return r}));var i=t(8),s=t(40),a=t(37);let r=new class{constructor(){this.isAuthenticated=()=>!!localStorage.getItem(i.a),this.login=(A,e,t)=>{let{username:a,password:r}=A;const n={username:a,password:r};s.a.post("/signin",n).then(A=>{localStorage.setItem(i.a,A[i.a]),e()}).catch(A=>{t(A.data?A.data:A)})},this.logout=()=>{s.a.post("/signout").then(A=>{localStorage.removeItem(i.a),window.location="/"}).catch(A=>{console.log(A),a.a.error(A)})},this.getMe=()=>s.a.get("/api/user/me"),this.redirectToLoginPage=()=>{a.a.info("You need to login first!"),localStorage.removeItem(i.a),window.location.hash="/login"},this.rolesHasPermission=(A,e)=>{if(!i.g[e])return!0;for(let t=0;t<A.length;t++)if(i.g[e].includes(A[t]))return!0;return!1},this.userInfo=null}}},40:function(A,e,t){"use strict";var i=t(71),s=t(43),a=t.n(s),r=t(8),n=t(39);i.a.interceptors.request.use((function(A){const e={...A,paramsSerializer:A=>{return a.a.stringify((e=A,Object.keys(e).forEach(A=>{null!==e[A]&&void 0!==e[A]||delete e[A]}),e),{arrayFormat:"repeat"});var e},baseURL:"https://blog.nenmongvietnam.com/laravel/public",headers:{...A.headers,Pragma:"no-cache"}};return localStorage.getItem(r.a)&&(e.headers.Authorization="Bearer "+localStorage.getItem(r.a)),e}),A=>(console.log(A),Promise.reject(A))),i.a.interceptors.response.use(A=>A&&A.data?A.data:A,A=>A.response&&A.response.status?(401===A.response.status&&n.a.redirectToLoginPage(),Promise.reject(A.response)):Promise.reject(A)),e.a=i.a},45:function(A,e,t){},58:function(A,e,t){A.exports=t.p+"static/media/background.ab8abda0.jpg"},59:function(A,e,t){A.exports=t.p+"static/media/spin.b192bd62.jpg"},60:function(A,e,t){},61:function(A,e){A.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4RDmRXhpZgAATU0AKgAAAAgABAE7AAIAAAAJAAAISodpAAQAAAABAAAIVJydAAEAAAASAAAQzOocAAcAAAgMAAAAPgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFuaHR1IFRhAAAABZADAAIAAAAUAAAQopAEAAIAAAAUAAAQtpKRAAIAAAADMDEAAJKSAAIAAAADMDEAAOocAAcAAAgMAAAIlgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIwMjA6MDE6MDMgMjI6NTg6NTIAMjAyMDowMTowMyAyMjo1ODo1MgAAAEEAbgBoAHQAdQAgAFQAYQAAAP/hCxtodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+DQo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIj48cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPjxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSJ1dWlkOmZhZjViZGQ1LWJhM2QtMTFkYS1hZDMxLWQzM2Q3NTE4MmYxYiIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIi8+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPjx4bXA6Q3JlYXRlRGF0ZT4yMDIwLTAxLTAzVDIyOjU4OjUyLjAxMjwveG1wOkNyZWF0ZURhdGU+PC9yZGY6RGVzY3JpcHRpb24+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxkYzpjcmVhdG9yPjxyZGY6U2VxIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHJkZjpsaT5Bbmh0dSBUYTwvcmRmOmxpPjwvcmRmOlNlcT4NCgkJCTwvZGM6Y3JlYXRvcj48L3JkZjpEZXNjcmlwdGlvbj48L3JkZjpSREY+PC94OnhtcG1ldGE+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9J3cnPz7/2wBDAAcF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"},62:function(A,e,t){A.exports=t.p+"static/media/favicon.b192bd62.png"},63:function(A,e,t){},64:function(A,e,t){"use strict";function i(A){return"function"===typeof A?A():A}function s(){var A={};return A.promise=new Promise((function(e,t){A.resolve=e,A.reject=t})),A}A.exports=function(A){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=void 0,r=void 0,n=void 0,o=[];return function(){var g=i(e),c=(new Date).getTime(),h=!a||c-a>g;a=c;for(var d=arguments.length,C=Array(d),I=0;I<d;I++)C[I]=arguments[I];if(h&&t.leading)return t.accumulate?Promise.resolve(A.call(this,[C])).then((function(A){return A[0]})):Promise.resolve(A.call.apply(A,[this].concat(C)));if(r?clearTimeout(n):r=s(),o.push(C),n=setTimeout(l.bind(this),g),t.accumulate){var m=o.length-1;return r.promise.then((function(A){return A[m]}))}return r.promise};function l(){var e=r;clearTimeout(n),Promise.resolve(t.accumulate?A.call(this,o):A.apply(this,o[o.length-1])).then(e.resolve,e.reject),o=[],r=null}}},65:function(A,e,t){},72:function(A,e,t){"use strict";t.r(e);var i=t(0),s=t.n(i),a=t(2),r=t(37),n=t(40);const o=(A,e)=>{let t=A.classList.contains("lyric-pg-light");return"background-image:-webkit-linear-gradient(left, "+(t?"#2199F9":"#FC0")+" "+e+"%, "+(t?"#333":"#FFF")+" 0%)"},l=(A,e)=>{e.setAttribute("style",o(A,100))};var g={getAllSongs:A=>n.a.get("/api/song/all",{params:A}),getLyric:A=>n.a.get("/api/lyric?file="+A),updateListen:A=>n.a.put("/api/song/listens?path="+A),getKaraokeWordStyle:o,fillKaraokeWord:l,setBulletText:(A,e,t)=>{e.innerHTML=["&nbsp;","\u2022","\u2022\u2022","\u2022\u2022\u2022","\u2022\u2022\u2022\u2022","\u2022\u2022\u2022\u2022\u2022"][t],l(A,e)},runKaraokeEffect:(A,e,t,i,s)=>{let a=100*(e.currentTime-i)/(s-i);t.setAttribute("style",o(A,a))},emptyKaraokeWord:A=>{A.setAttribute("style","")}},c=t(58),h=t.n(c),d=t(59),C=t.n(d);t(45);class I extends i.PureComponent{constructor(A){super(A),this.onChange=A=>{const{value:e}=A.target,t=this.props.maxLength?this.props.maxLength:200;let i="";e.length>t?i="Max length of search text is: "+t:this.regexValidation(e)||(i=this.props.regexErrorMsg?this.props.regexErrorMsg:"Search text is invalid"),this.setState({value:e,errorMsg:i})},this.onKeyUp=(A,e)=>{13===A.keyCode?this.onSearch(e):this.typingTimer=setTimeout(()=>{this.onSearch(e)},300)},this.onKeyDown=()=>{clearTimeout(this.typingTimer)},this.onSearch=()=>{let{value:A}=this.state;this.props.onSearch({name:this.props.name,value:A})},this.onClear=()=>{this.setState({value:""}),this.props.onSearch({name:this.props.name,value:null})},this.regexValidation=A=>{const e=this.props.regex?this.props.regex:"";return""===A||""===e||A.match(e)},this.state={value:"",errorMsg:"",invalid:!1,focus:!1},this.typingTimer=null}render(){const{name:A,label:e,disabled:t=!1,isRequire:i=!1,type:a="text",placeholder:r="Search..."}=this.props,{value:n,errorMsg:o}=this.state;return s.a.createElement("div",{className:"input-wrapper"},e&&s.a.createElement("label",{className:"input-label"},e,i&&s.a.createElement("span",{className:"input-require"},"\xa0*")),s.a.createElement("div",{className:"input-search-wrapper"},s.a.createElement("i",{className:"fa fa-search input-icon-search",onClick:this.onSearch}),s.a.createElement("input",{type:a,name:A,value:n,disabled:t,onChange:this.onChange,className:"input-text input-text-search "+(o?" input-error":""),placeholder:r,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown}),n&&s.a.createElement("i",{className:"fa fa-times input-icon-clear",onClick:this.onClear}),!!o&&s.a.createElement("div",{className:"input-error-msg"},o)))}}var m=I;t(60);var u=A=>s.a.createElement("div",{className:"modal-wrapper"},s.a.createElement("span",{className:"close",title:"Close",onClick:A.onClose},"\xd7"),s.a.createElement("div",{className:"modal-content"},A.children),s.a.createElement("div",{className:"caption"},A.caption)),p=t(13),y=t(61),f=t.n(y);var v=A=>{const[e,t]=s.a.useState(!1),[i,a]=s.a.useState(null),r=i?i.artist+" - "+i.title:"",n=["#ff4422","#ff6644","#ff9933","#feae2d","#ccbb33","#d0c310","#aacc22","#69d025","#22ccaa","#12bdb9","#11aabb","#4444dd","#3311bb","#3b0cbd","#442299"],o=[...new Set(A.songData.map(A=>A.song_of_the_year).filter(Boolean))].sort((A,e)=>e-A),l=A=>{if(!A)return"#1e90ff";const e=o.indexOf(A);return n[e]||"#1e90ff"},g=A=>{if(!A)return"#fff";return o.indexOf(A)<n.length/2?"#000":"#fff"};return s.a.createElement("div",{id:"all_songs"},s.a.createElement("div",{className:"search-wrapper"},s.a.createElement(m,{name:"searchText",onSearch:A.onSearch})),s.a.createElement("div",{className:"all-song-value custom-scrollbar"},s.a.createElement("table",{className:"table_striped",id:"songTable",cellSpacing:"0",cellPadding:"0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:{textAlign:"right"}},"No."),s.a.createElement("th",{style:{cursor:"pointer",minWidth:"220px"},onClick:()=>A.getAllSongs({sortBy:"title",sortOrder:"ASC"})},"Song"),s.a.createElement("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"listens",sortOrder:"DESC"})},"Listens"),s.a.createElement("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"song_of_the_year",sortOrder:"DESC"}),title:"Song of the year"},"SOY"),s.a.createElement("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"type",sortOrder:"ASC"})},"Type"),s.a.createElement("th",{style:{cursor:"pointer"},onClick:()=>A.getAllSongs({sortBy:"createdDate",sortOrder:"DESC"})},"Date"))),s.a.createElement("tbody",null,A.songData.map((e,i)=>{const r=e.image_url?Object(p.e)(e.image_url):f.a;return s.a.createElement("tr",{key:e.id,className:A.currSong&&A.currSong.path===e.path?"tr-active":"",id:"tr-"+e.id},s.a.createElement("td",null,i+1),s.a.createElement("td",{className:"td-song-info"},s.a.createElement("img",{className:"song-picture",src:r,alt:e.artist+" - "+e.title,onClick:()=>(A=>{A.image_url&&(a({...A}),t(!0))})(e)}),s.a.createElement("a",{className:"song-item",href:"#/bai-hat/"+e.path,onClick:()=>A.playSong(e)},s.a.createElement("div",{className:"song-title"},e.title),s.a.createElement("div",{className:"song-artist"},e.artist)),s.a.createElement("i",{className:"icon-play "+(A.isPlaying?"playing":"pause")})),s.a.createElement("td",null,e.listens),s.a.createElement("td",null,e.song_of_the_year&&s.a.createElement("span",{className:"soy",style:{background:l(e.song_of_the_year),color:g(e.song_of_the_year)},title:"Song of the Year: "+e.song_of_the_year},e.song_of_the_year)),s.a.createElement("td",null,e.type),s.a.createElement("td",null,e.formatCreatedDate))})))),e&&s.a.createElement(u,{onClose:()=>{a(null),t(!1)},caption:r},s.a.createElement("img",{style:{width:"400px",maxWidth:"80%"},className:"img-modal",src:Object(p.e)(i.image_url),alt:r})))},b=t(8),w=t(62),L=t.n(w);t(63);class E extends i.PureComponent{constructor(A){var e;super(A),e=this,this.setMediaSessionMeta=(A,e,t)=>{t||(t=L.a),"mediaSession"in window.navigator?(window.navigator.mediaSession.metadata=new window.MediaMetadata({title:A,artist:e,artwork:[{src:t,sizes:"96x96",type:"image/png"},{src:t,sizes:"128x128",type:"image/png"},{src:t,sizes:"192x192",type:"image/png"},{src:t,sizes:"256x256",type:"image/png"},{src:t,sizes:"384x384",type:"image/png"},{src:t,sizes:"512x512",type:"image/png"}]}),window.navigator.mediaSession.setActionHandler("previoustrack",this.prevSong),window.navigator.mediaSession.setActionHandler("nexttrack",this.nextSong),window.navigator.mediaSession.setActionHandler("play",this.playAudio),window.navigator.mediaSession.setActionHandler("pause",this.pauseAudio),window.navigator.mediaSession.setActionHandler("stop",this.pauseAudio)):console.log("Your browser doesn't not support MediaSession")},this.setPlayList=(A,e)=>{this.playList=[...A],this.initPlayList=[...A],this.activeAudio=e,this.setPlayType(Object(p.i)("playType"))},this.setActiveAudio=A=>{if(this.playList[this.activeAudio].id!==A.id){for(let e=0;e<this.playList.length;e++)if(this.playList[e].id===A.id){this.activeAudio=e;break}console.log("reset ActiveAudio: ",this.activeAudio)}},this.setMouseDown=()=>{this.mouseDown=!0},this.clearMouseDown=()=>{this.mouseDown=!1},this.toggleShuffle=()=>{this.state.playType===b.j?this.setPlayType(b.h):this.setPlayType(b.j)},this.toggleRepeat=()=>{this.state.playType===b.f?this.setPlayType(b.h):this.setPlayType(b.f)},this.togglePlay=()=>{this.state.isPlaying?this.pauseAudio():this.playAudio()},this.prevSong=()=>{const{playType:A}=this.state;if(A!==b.f){if(0===this.activeAudio)return void r.a.warn("This is the first song of playing list!");this.activeAudio--}this.props.playSong(this.playList[this.activeAudio],!0)},this.nextSong=()=>{const{playType:A}=this.state;if(A!==b.f){if(this.activeAudio===this.playList.length-1)return r.a.warn("This is the last song of playing list. Please select another song manually to play!"),void this.togglePlay();this.activeAudio++}this.props.playSong(this.playList[this.activeAudio],!0)},this.secsToMins=A=>{let e=Math.floor(A);return Math.floor(e/60)+":"+("0"+e%60).slice(-2)},this.getCurrentTime=()=>{if(!this.myAudio)return;const A=this.secsToMins(this.myAudio.currentTime),e=this.myAudio.currentTime/this.getDuration()*100;this.currentTime.innerText=A,this.progressBar.style.width=e+"%",this.state.isPlaying?this.showCurrentTime=requestAnimationFrame(this.getCurrentTime):cancelAnimationFrame(this.showCurrentTime)},this.showDuration=()=>{let A=this.secsToMins(this.getDuration());this.duration.innerText=A},this.updateProgressBar=A=>{const e=this.progressWrapper.offsetWidth,t=A.nativeEvent.offsetX/e;(this.mouseDown||"click"===A.type)&&(this.myAudio.currentTime=this.getDuration()*t,this.state.isPlaying||this.getCurrentTime(),this.props.onSeeked())},this.getDuration=()=>this.myAudio.duration===1/0?600:this.myAudio.duration,this.playAudio=()=>{let A=this.myAudio.play();void 0!==A?A.then(()=>{this.setState({isPlaying:!0},()=>{this.getCurrentTime(),this.props.onPlay()})}).catch(A=>{this.pauseAudio(),console.log("Error playing file: ",A),r.a.error("L\u1ed7i: KH\xd4NG th\u1ec3 t\u1ef1 \u0111\u1ed9ng ph\xe1t nh\u1ea1c, do b\u1ea1n ch\u01b0a t\u01b0\u01a1ng t\xe1c v\u1edbi trang, ho\u1eb7c Zing kh\xf4ng cho ph\xe9p ph\xe1t b\xe0i n\xe0y")}):(this.pauseAudio(),r.a.error("Your browser hasn't yet supported this functionality"))},this.pauseAudio=()=>{this.myAudio.pause(),this.props.onPause(),this.setState({isPlaying:!1})},this.setPlayType=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.h;if(e.setState({playType:A}),A===b.j){const A=e.playList[e.activeAudio];Object(p.m)(e.playList);for(let t=0;t<e.playList.length;t++)if(e.playList[t].id===A.id){[e.playList[t],e.playList[0]]=[e.playList[0],e.playList[t]],e.activeAudio=0;break}}else{const A=e.playList[e.activeAudio];e.playList=[...e.initPlayList];for(let t=0;t<e.playList.length;t++)if(e.playList[t].id===A.id){e.activeAudio=t;break}}Object(p.l)("playType",A)},this.state={playType:b.h,isPlaying:!1},this.myAudio=s.a.createRef(),this.currentTime=s.a.createRef(),this.progressWrapper=s.a.createRef(),this.progressBar=s.a.createRef(),this.llPlayer=s.a.createRef(),this.llPlayPause=s.a.createRef(),this.duration=s.a.createRef(),this.mouseDown=!1,this.showCurrentTime=null,this.playList=[],this.initPlayList=[],this.activeAudio=0}componentDidMount(){this.props.getPlayerInstance(this)}render(){const{song:A}=this.props,{playType:e,isPlaying:t}=this.state;return s.a.createElement("div",{className:"ll_player "+(t?"ll-playing":"ll-paused"),onMouseDown:this.setMouseDown,onMouseUp:this.clearMouseDown,ref:A=>this.llPlayer=A},s.a.createElement("div",{className:"info"},s.a.createElement("div",{id:"song_details"},s.a.createElement("div",{className:"song_title"},A.title),s.a.createElement("div",{className:"song_artist"},A.artist),s.a.createElement("div",{className:"song_album"},"(",A.album?A.album:"No Album",")"))),s.a.createElement("div",{className:"ll-btn-wrapper"},s.a.createElement("button",{className:"ll-shuffle "+(e===b.j?"active":""),title:""+(e===b.j?"Turn off shuffle":"Shuffle"),onClick:this.toggleShuffle},s.a.createElement("div",{className:"arrow"}),s.a.createElement("div",{className:"arrow"})),s.a.createElement("button",{className:"ll-button ll-btn-prev",title:"Previous",onClick:this.prevSong},s.a.createElement("div",{className:"arrow arrow-transform"}),s.a.createElement("div",{className:"arrow"})),s.a.createElement("button",{className:"ll-button ll-play-pause",title:t?"Pause":"Play",onClick:this.togglePlay,ref:A=>this.llPlayPause=A},s.a.createElement("div",{className:"arrow arrow-transform"})),s.a.createElement("button",{className:"ll-button ll-btn-next",title:"Next",onClick:this.nextSong},s.a.createElement("div",{className:"arrow arrow-transform"}),s.a.createElement("div",{className:"arrow"})),s.a.createElement("button",{className:"ll-repeat "+(e===b.f?"active":""),title:"Repeat one",onClick:this.toggleRepeat})),s.a.createElement("div",{className:"time"},s.a.createElement("span",{className:"current-time",ref:A=>this.currentTime=A},"0:00"),s.a.createElement("span",{className:"progress",ref:A=>this.progressWrapper=A,onClick:this.updateProgressBar,onMouseMove:this.updateProgressBar},s.a.createElement("span",{ref:A=>this.progressBar=A})),s.a.createElement("span",{className:"duration",ref:A=>this.duration=A},"0:00")),s.a.createElement("audio",{ref:A=>this.myAudio=A,id:"myAudio",preload:"metadata",src:this.props.songURL,onLoadedMetadata:this.showDuration,onEnded:this.nextSong,crossOrigin:"anonymous"}))}}var T=E;function S(A){let e=A.parentNode.getBoundingClientRect(),t=A.getBoundingClientRect(),i={};return i.top=t.top-e.top+A.parentNode.scrollTop,i.right=t.right-e.right,i.bottom=t.bottom-e.bottom,i.left=t.left-e.left,i}function k(A){return A<.5?2*A*A:(4-2*A)*A-1}function K(A,e,t){!function(A,e,t){let i,s,a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=S(e),o=A.scrollTop,l=n.top-o,g=performance.now();function c(){i=performance.now(),s=i-g,a=s/t,A.scrollTop=o+l*k(a)+r,a<1&&window.requestAnimationFrame(c)}c()}(A,e,t,-A.offsetHeight/2+e.offsetHeight/2)}function j(A,e){let t,i=window.pageYOffset,s=window.pageYOffset+A.getBoundingClientRect().top,a=(document.body.scrollHeight-s<window.innerHeight?document.body.scrollHeight-window.innerHeight:s)-i;a&&window.requestAnimationFrame((function A(s){t||(t=s);let r=s-t,n=Math.min(r/e,1);var o;n=(o=n)<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1,window.scrollTo(0,i+a*n),r<e&&window.requestAnimationFrame(A)}))}class W extends i.PureComponent{constructor(A){super(A),this.onChangeVolume=A=>{const{value:e}=A.target,t=e/100;this.setState({volume:e}),this.props.myAudio.volume=t,Object(p.l)("volume",t)},this.initSettingsAtPlayer=()=>{const{myAudio:A,lyric_playground:e}=this.props;let t=Object(p.i)("lyricAlign");t&&this.settingLyricAlign(t);let i=Object(p.i)("theme");if(i)switch(i){case"dark":this.changeTheme("dark");break;case"light":this.changeTheme("light");break;case"picture-bg":this.changeTheme("picture-bg")}let s=Object(p.i)("speed");s&&(A.playbackRate=s);let a=Object(p.i)("volume");a&&(A.volume=a,this.setState({volume:100*a})),this.setKaraokeMode(Object(p.i)("karaokeMode")),this.setBlurMode(Object(p.i)("blurMode")),this.setGiganticLine(Object(p.i)("giganticLine")),this.setWordAppear(Object(p.i)("wordAppear")),this.setLineAppear(Object(p.i)("lineAppear")),setTimeout(()=>{j(e,300)},10)},this.settingLyricAlign=A=>{this.props.div_result.style.textAlign=A,Object(p.l)("lyricAlign",A)},this.settingTheme=A=>{this.changeTheme(A),Object(p.l)("theme",A)},this.changeTheme=A=>{const{lyric_playground:e,div_background:t}=this.props;t.style.display="picture-bg"===A?"":"none",e.classList.forEach(A=>{A.includes("lyric-pg-")&&e.classList.remove(A)}),e.classList.add("lyric-pg-"+A)},this.toggleKaraokeMode=()=>{this.props.div_result.classList.contains("karaoke-mode")?this.setKaraokeMode(!1):this.setKaraokeMode(!0)},this.setKaraokeMode=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("karaoke-mode"),e.classList.remove("karaoke-off"),Object(p.l)("karaokeMode",!0)):!1===A&&(e.classList.remove("karaoke-mode"),e.classList.add("karaoke-off"),Object(p.l)("karaokeMode",!1))},this.toggleBlurMode=()=>{const{div_result:A}=this.props;A.classList.contains("blur-mode")?this.setBlurMode(!1):this.setBlurMode(!0)},this.setBlurMode=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("blur-mode"),Object(p.l)("blurMode",!0)):!1===A&&(e.classList.remove("blur-mode"),Object(p.l)("blurMode",!1))},this.toggleGiganticLine=()=>{const{div_result:A}=this.props;A.classList.contains("div-res-big-active-line")?this.setGiganticLine(!1):this.setGiganticLine(!0)},this.setGiganticLine=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("div-res-big-active-line"),Object(p.l)("giganticLine",!0)):!1===A&&(e.classList.remove("div-res-big-active-line"),Object(p.l)("giganticLine",!1))},this.flipWaveform=()=>{let A=Object(p.i)("flipWaveform");A=!A||!0!==A,Object(p.l)("flipWaveform",A),r.a.info(`Flip waveform = ${A}, refresh page to take effect!`),this.props.updateFlipWaveform(A)},this.toggleWordAppear=()=>{const{div_result:A}=this.props;A.classList.contains("word-appear")?this.setWordAppear(!1):this.setWordAppear(!0)},this.setWordAppear=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("word-appear"),Object(p.l)("wordAppear",!0)):!1===A&&(e.classList.remove("word-appear"),Object(p.l)("wordAppear",!1))},this.toggleLineAppear=()=>{const{div_result:A}=this.props;A.classList.contains("line-appear")?this.setLineAppear(!1):this.setLineAppear(!0)},this.setLineAppear=A=>{const{div_result:e}=this.props;!0===A?(e.classList.add("line-appear"),Object(p.l)("lineAppear",!0)):!1===A&&(e.classList.remove("line-appear"),Object(p.l)("lineAppear",!1))},this.updateSpeed=A=>{let e=this.props.myAudio.playbackRate+A;e=Number(e.toFixed("1")),this.props.myAudio.playbackRate=e,r.a.info("Speed: "+e+"x"),Object(p.l)("speed",e)},this.state={volume:100}}componentDidMount(){this.props.initSettingsAtPlayer(this.initSettingsAtPlayer)}render(){const{showSetting:A,openSetting:e,isFullscreen:t}=this.props,{volume:i}=this.state;return s.a.createElement("div",{className:"setting_section",style:{display:t?"none":""}},!A&&s.a.createElement("div",{className:"btn_toggle_setting",title:"Settings",onClick:e},s.a.createElement("i",{className:"fa fa-ellipsis-h"})),!!A&&s.a.createElement("div",{id:"setting_wrapper"},s.a.createElement("div",null,s.a.createElement("span",{className:"setting-legend"},"Lyric:\xa0"),s.a.createElement("i",{className:"fa fa-caret-up btn_sync_up",title:"Sync lyric: -100ms"}),s.a.createElement("i",{className:"fa fa-caret-down btn_sync_down",title:"Sync lyric: +100ms"}),s.a.createElement("i",{className:"setting_separator"},"|"),s.a.createElement("i",{className:"fa fa-align-left btn_align btn_align_left",title:"Lyric left alignment",onClick:()=>this.settingLyricAlign("left")}),s.a.createElement("i",{className:"fa fa-align-center btn_align btn_align_center",title:"Lyric center",onClick:()=>this.settingLyricAlign("center")}),s.a.createElement("i",{className:"fa fa-align-right btn_align btn_align_right",title:"Lyric right alignment",onClick:()=>this.settingLyricAlign("right")})),s.a.createElement("div",null,s.a.createElement("span",{className:"setting-legend"},"Theme:\xa0"),s.a.createElement("i",{className:"fa fa-square btn_theme btn_theme_dark",title:"Dark theme",onClick:()=>this.settingTheme("dark")}),s.a.createElement("i",{className:"fa fa-square btn_theme btn_theme_light",title:"Light theme",onClick:()=>this.settingTheme("light")}),s.a.createElement("i",{className:"fa fa-picture-o btn_theme btn_theme_picture_bg",title:"Picture background theme",onClick:()=>this.settingTheme("picture-bg")})),s.a.createElement("div",null,s.a.createElement("span",{className:"setting-legend"},"Mode:\xa0"),s.a.createElement("i",{className:"fa fa-microphone btn_theme btn_karaoke_mode",title:"Karaoke mode",onClick:this.toggleKaraokeMode}),s.a.createElement("i",{className:"fa fa-cloud btn_theme btn_blur_mode",title:"Blur mode",onClick:this.toggleBlurMode}),s.a.createElement("i",{className:"fa fa-eye-slash btn_theme btn_word_appear",title:"Word appears when time comes to it",onClick:this.toggleWordAppear}),s.a.createElement("i",{className:"fa fa-coffee btn_theme",title:"Word & Line appears when time comes to it",onClick:this.toggleLineAppear}),s.a.createElement("i",{className:"fa fa-search-plus btn_theme btn_gigantic_line",title:"Gigantic line",onClick:this.toggleGiganticLine}),s.a.createElement("i",{className:"fa fa-retweet btn_theme btn_flip_waveform",title:"Flip waveform horizontally",onClick:this.flipWaveform})),s.a.createElement("div",null,s.a.createElement("span",{className:"setting-legend"},"Speed:\xa0"),s.a.createElement("i",{className:"fa fa-plus-square btn_theme btn_increase_speed",title:"Increase speed",onClick:()=>this.updateSpeed(.1)}),s.a.createElement("i",{className:"fa fa-minus-square btn_theme btn_decrease_speed",title:"Decrease speed",onClick:()=>this.updateSpeed(-.1)})),s.a.createElement("div",null,s.a.createElement("span",{className:"setting-legend"},"Volume:\xa0"),s.a.createElement("input",{type:"range",min:"1",max:"100",value:i,className:"slider-volume",onChange:this.onChangeVolume}))))}}var N=W,_=t(64),M=t.n(_);class O extends s.a.PureComponent{constructor(A){super(A),this.drawWaveform=()=>{const{flipWaveform:A,analyser:e}=this.props;if(!e)return;this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;const t=this.canvas.getContext("2d"),i=e.frequencyBinCount,s=parseInt(i/1.2),a=new Uint8Array(s),r=Array(s).fill(0),n=Array(s).fill(0),o=this.canvas.width,l=this.canvas.height,g=parseInt(o/s),c=Object(p.f)();let h,d,C;if(console.log("bufferLength, totalBar, WIDTH, HEIGHT: ",i,s,o,l),window.innerWidth<=720)return;console.log("Start drawing waveform...");const I=()=>{e.getByteFrequencyData(a),t.clearRect(0,0,o,l);for(let e=0;e<s;e++)h=!0===A?1+parseInt(a[s-e]/270*l):1+parseInt(a[e]/270*l),d=c,C=(g+3)*e,t.fillStyle=d,t.fillRect(C,l-h,g,h),h>r[e]&&(r[e]=h,n[e]=0),r[e]>0&&(t.beginPath(),t.strokeStyle=d,t.lineWidth=3,t.moveTo(C,l-r[e]),t.lineTo(C+g,l-r[e]),t.stroke(),n[e]+=.05,r[e]=r[e]-n[e]);this.props.myAudio.paused||(this.waveformAniFr=requestAnimationFrame(I))};I()},this.getBarColor=(A,e)=>"rgb("+parseInt(255*e)+","+(100-30*A)+",255)",this.stopWaveform=()=>{cancelAnimationFrame(this.waveformAniFr)},this.canvas=s.a.createRef(),this.waveformAniFr=null}componentDidMount(){this.props.getWaveformInstance(this),window.onresize=M()(this.drawWaveform,300)}render(){return s.a.createElement("canvas",{className:"canvas-waveform",ref:A=>this.canvas=A})}}var P=O;var F=A=>{const{toggleWaveform:e,showWaveform:t,flipWaveform:i,analyser:a,initAnalyzer:r,myAudio:n,getWaveformInstance:o,song:l}=A;return s.a.createElement("div",{className:"left_info",onClick:e,title:t?"Switch to song meta":"Switch to waveform"},t&&s.a.createElement(P,{analyser:a,initAnalyzer:r,myAudio:n,getWaveformInstance:o,flipWaveform:i}),!t&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"left_title"},l.title),s.a.createElement("div",{className:"left_artist"},l.artist),s.a.createElement("div",{className:"left_album"},"(",l.album?l.album:"No Album",")")))},x=t(17);t(65);class D extends i.PureComponent{constructor(A){var e;super(A),e=this,this.initAnalyzer=()=>{if(this.state.analyser)return;const A=new(window.AudioContext||window.webkitAudioContext),e=A.createMediaElementSource(this.myAudio),t=A.createAnalyser();e.connect(t),t.connect(A.destination),t.fftSize=128,this.setState({analyser:t})},this.getAllSongs=function(A){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.setState({loading:!0});const i=A.sortBy?A.sortBy+","+A.sortOrder:e.state.params.sort;A.sortBy&&(Object(p.l)("sortBy",A.sortBy),Object(p.l)("sortOrder",A.sortOrder));const s={...e.state.params,...A,sort:i};e.setState({params:s}),g.getAllSongs(s).then(A=>{const i=e.props.match.params.id;let s={},a=0;i&&(s=A.find((A,e)=>A.path===i&&(a=e,!0))),e.setState({songData:A,loading:!1}),e.playerInstance.setPlayList(A,a),t&&s.path&&e.playSong(s),e.scrollTableToActiveSong(s)}).catch(A=>{console.log(A),r.a.error(A),e.setState({loading:!1})})},this.playSong=function(A){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(`Start playing ${A.title} - ${A.artist}...`),e.props.match.params.id!==A.path&&(window.location.href="#/bai-hat/"+A.path),A.zing_id&&(A.zingStream=Object(p.e)("/api/zing/mp3/streaming?zing_id="+A.zing_id)),e.setState({song:A},()=>{e.getLyric(A)});const i=A&&A.image_url?Object(p.e)(A.image_url):C.a;e.playerInstance.setActiveAudio(A),e.playerInstance.setMediaSessionMeta(A.title,A.artist,i),t&&e.scrollTableToActiveSong(A)},this.scrollTableToActiveSong=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Object(p.h)("songTable");if(!e||!A.id)return;const t=e.parentNode,i=Object(p.h)("tr-"+A.id);K(t,i,300)},this.getLyric=A=>{this.div_result.innerHTML=b.b,this.lines=[],A.lyric?(A.lyric.endsWith(".lrc")?(this.isLrc=!0,this.hasTranslation=!1):A.lyric.endsWith(".xlrc")?(this.isLrc=!0,this.hasTranslation=!0):(this.isLrc=!1,this.hasTranslation=!1),g.getLyric(A.lyric).then(A=>{A===b.c?this.setNoLyric():this.saveLyric(A)}).catch(A=>{console.log(A),r.a.error(A)})):this.setNoLyric()},this.saveLyric=A=>{this.lines=A.trim().split("\n"),this.initLyric()},this.isNoLyric=()=>0===this.lines.length,this.setNoLyric=()=>{this.lines=[],this.initLyric()},this.initLyric=()=>{this.setPlayLyricInterval(),this.div_result.innerHTML="",this.startTimes=[],this.endTimes=[],this.tranMaps=[],this.cntWord=0,this.offsetTime=0,this.currWordID=-1,this.playerInstance.playAudio(),this.isNoLyric()?this.div_result.innerHTML=b.e:(this.metaExist=!1,this.lyricMeta={},this.div_result.innerHTML="",this.isLrc?this.initLrcLyric():this.initTrcLyric()),this.initSettingsAtPlayer()},this.initTrcLyric=async()=>{let A,e,t,i,s,a;for await(let r of this.lines)if(A=r.match(/\[\d+:\d+\.\d+\]/g),null!=A){if(e=Object(p.b)(A[0]),A=r.substring(A[0].length),t=A.match(/<\d+>[^<]*/g),a=Object(p.a)("div",null,"line"),null==t)continue;i=e;for await(let A of t){s=i+parseFloat(A.match(/\d+/)[0])/1e3,s=Object(p.k)(s);let e=Object(p.a)("span","word-"+this.cntWord,"not-pass-word",{"time-start":i,"time-end":s});e.innerText=A.replace(/<\d+>/,""),""===e.innerText.trim()&&(e.innerHTML="&nbsp;",e.setAttribute("is-empty","1")),this.startTimes[this.cntWord]=i,this.endTimes[this.cntWord]=s,i=s,this.cntWord++,a.appendChild(e)}this.div_result.appendChild(a)}else this.readLyricMeta(r);this.appendLyricMeta()},this.initLrcLyric=async()=>{let A,e,t,i,s,a,r="",n=new Map,o=new Map;for await(let l of this.lines)if(r=l.match(/\[\d+:\d+\.\d+\]/g),e=l.match(/\[tran\d+\]/g),null!=r){A=r.reduce((A,e)=>A+e.length,0),s=l.substring(A);for await(const A of r)a=Object(p.b)(A),this.startTimes[this.cntWord]=a,n.set(a,s),this.cntWord++}else null!=e?(t=e[0].substring(1,e[0].length-1),i=l.substring(e[0].length),o.has(t)||o.set(t,new Map),o.get(t).set(a,i)):this.readLyricMeta(l);this.startTimes.sort((function(A,e){return A-e}));for(let l=0;l<this.startTimes.length;l++){let A=Object(p.a)("div",null,"line"),e=Object(p.a)("span","word-"+l,"not-pass-word",null);if(e.innerText=n.get(this.startTimes[l]),""===e.innerText&&(e.innerHTML="&nbsp",e.setAttribute("is-empty","1")),A.appendChild(e),o.size>0)for(let[t,i]of o)if(i.has(this.startTimes[l])){let e=Object(p.a)("div",null,"line-tran "+t,null);e.innerText=i.get(this.startTimes[l]),A.appendChild(e)}this.div_result.appendChild(A)}this.appendLyricMeta();for(let l=0;l<this.startTimes.length-1;l++)this.endTimes[l]=this.startTimes[l+1];this.endTimes[this.startTimes.length-1]=this.myAudio.duration},this.readLyricMeta=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=A.lastIndexOf("]");A.includes("offset:")?(e.offsetTime=A.match(/[0-9|-]+/g),e.offsetTime=parseInt(e.offsetTime)):A.includes("[author:")?(e.metaExist=!0,e.lyricMeta.by=A.substring("[author:".length,t).trim()):A.includes("[by:")?(e.metaExist=!0,e.lyricMeta.by=A.substring("[by:".length,t).trim()):A.includes("[createdDate:")?(e.metaExist=!0,e.lyricMeta.date=A.substring("[createdDate:".length,t).trim()):A.includes("[date:")?(e.metaExist=!0,e.lyricMeta.date=A.substring("[date:".length,t).trim()):A.includes("[source:")?(e.metaExist=!0,e.lyricMeta.source=A.substring("[source:".length,t).trim()):A.includes("[ti:")?(e.metaExist=!0,e.lyricMeta.title=A.substring("[ti:".length,t).trim()):A.includes("[ar:")&&(e.metaExist=!0,e.lyricMeta.artist=A.substring("[ar:".length,t).trim())},this.appendLyricMeta=()=>{if(this.metaExist){this.div_result.appendChild(Object(p.a)("div",null,"line-meta"));let A=Object(p.a)("div",null,"line-meta");A.innerText="-----------",this.div_result.appendChild(A);const e=Object(p.a)("div",null,"lyric-info");if(this.div_result.appendChild(e),this.lyricMeta.title&&(A=Object(p.a)("div",null,"line-meta",{style:"font-weight:bold"}),A.innerText=this.lyricMeta.title+" - "+this.lyricMeta.artist,e.appendChild(A)),this.lyricMeta.by&&(A=Object(p.a)("div",null,"line-meta"),A.innerText="Lyric creator: "+this.lyricMeta.by,e.appendChild(A)),this.lyricMeta.source&&(A=Object(p.a)("div",null,"line-meta"),A.innerText="Source: "+this.lyricMeta.source,e.appendChild(A)),this.lyricMeta.date){const t=new Date(this.lyricMeta.date),i=Object(p.j)(t)?Object(p.d)(t):t;A=Object(p.a)("div",null,"line-meta"),A.innerText="Date: "+i,e.appendChild(A)}}},this.setPlayLyricInterval=()=>{this.myAudio&&!this.myAudio.paused&&(this.playLyricInterval=setInterval(()=>{this.updateLyric()},30))},this.clearPlayLyricInterval=()=>{this.playLyricInterval&&clearInterval(this.playLyricInterval),this.playLyricInterval=null},this.onSeeked=()=>{this.clearCountdownInterval(),this.playLyricInterval||this.updateLyric(),setTimeout(()=>{this.isNoLyric()||this.reUpdateWordPass()},0),this.scrollLyric()},this.onPause=()=>{this.clearCountdownInterval(),this.clearPlayLyricInterval(),this.setState({isPlaying:!1,spinning:!1}),this.waveformInstance&&this.waveformInstance.stopWaveform()},this.onPlay=()=>{if(this.playLyricInterval||this.setPlayLyricInterval(),this.setState({isPlaying:!0,spinning:!0}),0===this.myAudio.currentTime){const A=this.props.match.params.id;A&&setTimeout(()=>{this.props.match.params.id===A&&g.updateListen(A).then(A=>{console.log(A)}).catch(A=>{console.log(A),r.a.error(A)})},6e4),setTimeout(()=>{if(Object(p.h)("word-0")&&!this.isNoLyric())for(let A=0;A<this.cntWord;A++)Object(p.h)("word-"+A).classList.add("not-pass-word")},0)}this.state.showWaveform&&this.waveformInstance&&this.drawWave()},this.countdownAtEmptyWord=A=>{if(Object(p.h)("word-"+(this.currWordID+1))){let e=this.endTimes[this.currWordID]-this.startTimes[this.currWordID],t=this.endTimes[this.currWordID]+this.offsetTime/1e3-this.myAudio.currentTime;(e>=5&&t<=5||e>=3&&t<=3)&&g.setBulletText(this.lyric_playground,A,Math.ceil(t))}},this.updateLyric=async()=>{if(this.isNoLyric())return void this.clearPlayLyricInterval();let A,e;if(this.currWordID>=0){const t=this.startTimes[this.currWordID]+this.offsetTime/1e3,i=this.endTimes[this.currWordID]+this.offsetTime/1e3,s=Object(p.h)("word-"+this.currWordID);if(t<=this.myAudio.currentTime&&i>=this.myAudio.currentTime)return this.div_result.classList.contains("karaoke-mode")&&g.runKaraokeEffect(this.lyric_playground,this.myAudio,s,t,i),void("1"===s.getAttribute("is-empty")&&this.countdownAtEmptyWord(s));A=Object(p.h)("word-"+this.currWordID),A&&"1"===A.getAttribute("is-empty")&&g.setBulletText(this.lyric_playground,A,0),g.fillKaraokeWord(this.lyric_playground,A),e=A.parentNode,A.classList.remove("word-active","curr-word")}this.gotoNextWord(A,e)},this.gotoNextWord=async(A,e)=>{if(this.currWordID=this.getCurrentWordByTime(this.myAudio.currentTime),this.currWordID>=0){const t=Object(p.h)("word-"+this.currWordID),i=t.parentNode;if(t.classList.add("word-active","curr-word"),t.classList.remove("not-pass-word"),e!==i){if(e){e.classList.remove("line-active");for await(let t of e.children){if(t===A)break;t.classList.remove("word-active")}}i.classList.add("line-active")}this.activeAtCurr(t,i)}else this.removeActiveLastLine()},this.activeAtCurr=(A,e)=>{let t;for(let i=0;i<e.children.length;i++){if(e.children[i]===A){t=i;break}e.children[i].classList.add("word-active")}for(let i=t+1;i<e.children.length&&e.children[i].classList.contains("word-active");i++)e.children[i].classList.remove("word-active");A===e.childNodes[0]&&setTimeout(()=>{this.scrollLyric()},110)},this.removeActiveLastLine=async()=>{const A=Object(p.h)("word-"+(this.cntWord-1)).parentNode;if(A.classList.contains("line-active")){A.classList.remove("line-active");for await(let e of A.children)e.classList.remove("word-active")}},this.scrollLyric=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==A&&(A=Object(p.h)("word-"+e.currWordID)),null!=A&&(e.div_result.scrollTop=20+A.parentNode.offsetTop-Object(p.h)("word-0").offsetTop-e.div_result.offsetHeight/2+A.parentNode.clientHeight/2)},this.getCurrentWordByTime=A=>{let e,t,i,s=0,a=this.cntWord-1;for(;s<=a;){if(e=parseInt((s+a)/2),t=this.startTimes[e]+this.offsetTime/1e3,i=this.endTimes[e]+this.offsetTime/1e3,t<=A&&i>=A)return t=this.startTimes[e+1]+this.offsetTime/1e3,i=this.endTimes[e+1]+this.offsetTime/1e3,t<=A&&i>=A?e+1:e;t>A?a=e-1:s=e+1}return 0===e||e===this.cntWord-1?e=-1:e&&e!==this.currErrWord&&(r.a.warn(`Warning: lyric is not correct near "${Object(p.h)("word-"+e).innerText}"`),this.currErrWord=e),A>this.endTimes[this.cntWord-1]&&this.clearPlayLyricInterval(),e},this.clearCountdownInterval=()=>{clearInterval(this.countdownInterval),this.countdownInterval=null},this.reUpdateWordPass=()=>{if(this.currWordID=this.getCurrentWordByTime(this.myAudio.currentTime),this.currWordID>=0){for(let A=0;A<this.currWordID;A++){let e=Object(p.h)("word-"+A);e.classList.remove("not-pass-word"),"1"===e.getAttribute("is-empty")&&(e.innerHTML="&nbsp;"),g.fillKaraokeWord(this.lyric_playground,e),this.removeLineActive(e)}for(let A=this.currWordID;A<this.cntWord;A++){let e=Object(p.h)("word-"+A);e.classList.add("not-pass-word"),"1"===e.getAttribute("is-empty")&&(e.innerHTML="&nbsp;"),g.emptyKaraokeWord(e),this.removeLineActive(e)}Object(p.h)("word-"+this.currWordID).parentNode.classList.add("line-active")}},this.removeLineActive=A=>{A.parentNode.classList.contains("line-active")&&A.parentNode.classList.remove("line-active")},this.toggleSetting=A=>{this.setState({showSetting:A})},this.toggleFullscreen=()=>{const A=!this.state.isFullscreen;A?this.setFullscreen():this.unsetFullscreen(),this.setState({isFullscreen:A}),Object(p.l)("fullscreen",A),setTimeout(()=>{this.scrollLyric()},350)},this.toggleWaveform=()=>{const A=!this.state.showWaveform;this.setState({showWaveform:A},()=>{this.waveformInstance&&(A?this.drawWave():this.waveformInstance.stopWaveform())}),Object(p.l)("showWaveform",A)},this.drawWave=async()=>{await this.initAnalyzer(),this.waveformInstance.drawWaveform()},this.setFullscreen=()=>{let A=Object(p.g)("body_wrapper");document.body.classList.add("overflow-hidden"),A.classList.add("body-fs"),A.classList.remove("body-normal")},this.unsetFullscreen=()=>{let A=Object(p.g)("body_wrapper");document.body.classList.remove("overflow-hidden"),A.classList.remove("body-fs"),A.classList.add("body-normal"),setTimeout(()=>{j(this.lyric_playground,300)},200)},this.onSearch=A=>{Object(p.c)("songTable",1,A.value?A.value:"")};let t=Object(p.i)("flipWaveform");void 0!==t&&null!==t||(t=!1),this.state={songData:[],params:{page:0},analyser:null,loading:!1,song:{},showSetting:!1,isFullscreen:!!Object(p.i)("fullscreen"),showWaveform:Object(p.i)("showWaveform")||!1,flipWaveform:t,isPlaying:!1,spinning:!1},this.lines=[],this.isLrc=!1,this.hasTranslation=!1,this.startTimes=[],this.endTimes=[],this.cntWord=0,this.offsetTime=0,this.currWordID=-1,this.metaExist=!1,this.lyricMeta={},this.myAudio=null,this.playLyricInterval=null,this.countdownInterval=null,this.currErrWord=null,this.playerInstance=null,this.waveformInstance=null,this.initSettingsAtPlayer=null,this.div_result=s.a.createRef(),this.lyric_playground=s.a.createRef(),this.div_background=s.a.createRef(),this.div_left_wrapper=s.a.createRef()}componentDidMount(){const A=Object(p.i)("sortBy"),e=Object(p.i)("sortOrder");this.getAllSongs({sortBy:A,sortOrder:e},!0),this.myAudio=this.child.myAudio,this.state.isFullscreen&&this.setFullscreen(),window.addEventListener("keydown",A=>{if(this.myAudio)switch(A.key){case"ArrowLeft":this.myAudio.currentTime-=5,this.onSeeked();break;case"ArrowRight":this.myAudio.currentTime+=5,this.onSeeked()}})}componentWillUnmount(){this.clearPlayLyricInterval(),this.clearCountdownInterval()}render(){const{songData:A,song:e,showSetting:t,isFullscreen:i,isPlaying:a,spinning:r,showWaveform:n,flipWaveform:o,analyser:l}=this.state,{theme:g}=this.context;let c;c=e.zing_id?e.zingStream:(null===e||void 0===e?void 0:e.file_name)?Object(p.e)("/api/song/file?file="+e.file_name):null;const d=(null===e||void 0===e?void 0:e.image_url)?Object(p.e)(e.image_url):C.a,I=`url(${(null===e||void 0===e?void 0:e.image_url)?"'"+Object(p.e)(e.image_url)+"'":h.a})`;return s.a.createElement("div",{className:`body_wrapper ${g===b.l?"body-light":"body-dark"} ${i?"body-fs":"body-normal"}`},s.a.createElement("div",{id:"all-song-wrapper"},s.a.createElement("div",{className:"edit-time"},"Posted on: Sep 3, 2021. Last modified: ","Jun 1, 2025","."),A&&0!==A.length&&s.a.createElement(v,{songData:A,currSong:e,getAllSongs:this.getAllSongs,playSong:this.playSong,onSearch:this.onSearch,isPlaying:a})),s.a.createElement(T,{song:e,songURL:c,onSeeked:this.onSeeked,onPause:this.onPause,onPlay:this.onPlay,ref:A=>{this.child=A},getPlayerInstance:A=>{this.playerInstance=A},playSong:this.playSong}),s.a.createElement("div",{id:"lyric_playground",ref:A=>this.lyric_playground=A,className:"lyric-pg-picture-bg"},s.a.createElement("div",{className:"background-wrapper"},s.a.createElement("div",{id:"div_background",ref:A=>this.div_background=A,className:"bg-image",style:{backgroundImage:I,textAlign:"center"}})),s.a.createElement("div",{className:"lyric-wrapper"},s.a.createElement("div",{id:"div_left_wrapper",className:"left-wrapper",ref:A=>this.div_left_wrapper=A},s.a.createElement("img",{id:"spinning_img",crossOrigin:"anonymous",style:{cursor:"pointer"},className:"left_img spinning "+(r?"":"paused-spin"),src:d,alt:"Left info",onClick:()=>{this.setState({spinning:!r})}}),s.a.createElement("canvas",{id:"spinning_canvas",style:{display:"none"}}),s.a.createElement(F,{toggleWaveform:this.toggleWaveform,showWaveform:n,flipWaveform:o,analyser:l,initAnalyzer:this.initAnalyzer,myAudio:this.myAudio,getWaveformInstance:A=>{this.waveformInstance=A},song:e})),s.a.createElement("div",{id:"div_result",className:"custom-scrollbar karaoke-mode div-res-big-active-line",style:{textAlign:"center"},ref:A=>this.div_result=A,onClick:()=>this.toggleSetting(!1)})),s.a.createElement(N,{div_result:this.div_result,lyric_playground:this.lyric_playground,div_background:this.div_background,div_left_wrapper:this.div_left_wrapper,myAudio:this.myAudio,showSetting:t,isFullscreen:i,scrollLyric:this.scrollLyric,initSettingsAtPlayer:A=>this.initSettingsAtPlayer=A,openSetting:()=>this.toggleSetting(!0),updateFlipWaveform:A=>this.setState({flipWaveform:A})}),s.a.createElement("div",{className:(i?"setbot_fs":"")+" setting_bottom"},s.a.createElement("i",{className:"fa fa-arrows-alt btn_align btn_fullscreen",onClick:this.toggleFullscreen})),s.a.createElement("div",{style:{clear:"both"}})))}}D.contextType=x.a;e.default=Object(a.g)(D)}}]);
//# sourceMappingURL=4.441ac56b.chunk.js.map